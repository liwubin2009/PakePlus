const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/tradingview-Dw0rKJFn.js","assets/index-DyY66E7G.js","assets/zixuan_list.vue_vue_type_style_index_0_lang-Bztu2ySh.js","assets/main-BeSCBoN1.js","assets/main-DMYBf86n.css","assets/zixuan_list-BvC8bdZc.css","assets/el-option-DgYD06Jd.js","assets/index-CSTuB7SG.js","assets/el-option-BHqzF8z9.css","assets/post_browser-CYSuer52.js","assets/index-DGrJy6ZA.js","assets/index-Bdt1jrkR.js","assets/index-B8aHpL5e.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/tradingview-GqHhlU-7.css","assets/el-button-CbVV1OIM.css","assets/el-input-B92SH0sA.css","assets/el-input-number-zmytgoX_.css","assets/el-popper-CgDDfGE6.css","assets/result-BTfP_B1M.js","assets/SendData-B_I2FNqn.js","assets/result-CjlbE0sg.css","assets/monitor_action-C8zyrw54.js","assets/monitor_action-BRGxEcru.css"])))=>i.map(i=>d[i]);
import{_ as D}from"./index-DyY66E7G.js";import{D as E,G as z,z as L,E as B}from"./zixuan_list.vue_vue_type_style_index_0_lang-Bztu2ySh.js";/* empty css                  */import{d as j,u as F,x as N,a as J,c as b,j as w,k as p,m as r,p as _,l as e,a0 as m,s as h,t as u,J as q,as as P}from"./main-BeSCBoN1.js";import{p as x,a as I}from"./post_browser-CYSuer52.js";import{E as v,a as K}from"./index-Bdt1jrkR.js";import{E as V}from"./index-CSTuB7SG.js";const Q={class:"radio-group-container"},X={key:0},Y={key:1},Z={class:"radio-group-container"},oo={key:0,style:{width:"300px"}},to={style:{"background-color":"rgb(27, 30, 39)",padding:"5px",margin:"0"}},eo={key:1,style:{width:"300px"}},io={key:2,style:{width:"300px"}},no={key:3,style:{width:"300px"}},ro={key:4,class:"center-container"},uo=j({__name:"monitor",setup(so){const U=F(),R=P(()=>D(()=>import("./tradingview-Dw0rKJFn.js").then(s=>s.t),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),$=P(()=>D(()=>import("./result-BTfP_B1M.js"),__vite__mapDeps([19,2,3,1,4,5,6,7,8,20,11,13,21,15]))),A=P(()=>D(()=>import("./monitor_action-C8zyrw54.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,9,13,23,15]))),S=N("monitor_item"),o=J();async function k(s){return await B.confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})}function T(s){B.alert(s)}N(0);const H=s=>{const i={};for(const[l,t]of Object.entries(s))t!=null&&t!==""&&t!==""&&(i[l]=t);return i};function M(s){const i=o.monitoractions.find(l=>l.value===s);if(i)return i.action}const O=async(s,i)=>{const l=localStorage.getItem("bot_ip"),t=localStorage.getItem("bot_key"),y=localStorage.getItem("mode"),d="http://"+l+"/takeover_order",c={...H(s),action:i,symbol:"ETH-USDT-SWAP",action_status:"del"},g={symbol:"ETH-USDT-SWAP",action:i,position_mode:"del",key:t,action_info:c};if(console.log(g),await k("确认删除监控内容吗？"))try{let n;if(y==="no"?n=await new Promise(f=>{x(g,d,function(C){f(C.data)})}):n=await I(g,d),console.log("返回结果",n),n.status==="sucess")setTimeout(function(){V({title:"执行成功",message:n.msg,type:"success"})},1e3);else{const f=await k(n.msg)}}catch(n){T("请求出现错误，请重试"),console.error(n)}};function W(s){const i=["symbol","risk","side","price_period","trade_type"];for(const l of i)if(s[l]===null||s[l]===void 0||s[l]==="")return T("有必要选项未指定"),!1;return!0}async function G(){const s=localStorage.getItem("mode");if(["rsi","macd","ema","macd_limit","trend_line_break","trend_line_support","ema_by_ema","ema_by_ema_cross","ema_break","mos_open","ema_support"].includes(o.monitor_info.action)){console.log("监控逻辑");const t=localStorage.getItem("bot_ip"),y=localStorage.getItem("bot_key"),d={ema:"ema",macd:"macd",rsi:"rsi",macd_limit:"macd_limit",trend_line_break:"trend_line_break",trend_line_support:"trend_line_support",ema_cross:"ema_cross",ema_by_ema:"ema_by_ema",ema_by_ema_cross:"ema_by_ema_cross",ema_break:"ema_break",ema_support:"ema_support",mos_open:"mos_open"},c={symbol:o.monitor_info.symbol,action:"monitor_item",key:y,position_mode:"add",action_info:{action:"monitor_item",action_status:"add",add_time:Date.now(),account_switch:o.monitor_info.account_switch,symbol:o.monitor_info.symbol,side:o.monitor_info.side,signal_type:d[o.monitor_info.action],price_period:o.monitor_info.price_period,signal_period:o.monitor_info.signal_period,loss_price:o.monitor_info.loss_price,start_price:o.monitor_info.price,end_price:o.monitor_info.end_price,win_price:o.monitor_info.win_price,auto_set:o.monitor_info.auto_set,risk:o.monitor_info.risk,lever:o.monitor_info.lever,safeorder:o.monitor_info.safeorder,win_multiple:o.monitor_info.win_multiple,loss_present:o.monitor_info.loss_present,action_change:o.monitor_info.action_change,end_time:o.monitor_info.end_time,signal_action:o.monitor_info.signal_action,half_lock:o.monitor_info.half_lock,sz_type:o.monitor_info.sz_type,out_type:o.monitor_info.out_type,out_period:o.monitor_info.out_period,ema_period:o.monitor_info.ema_period,signal_verify:o.monitor_info.signal_verify,temp_start_price:o.monitor_info.temp_start_price,mix_open:o.monitor_info.mix_open,order_type:o.monitor_info.order_type,order_num:o.monitor_info.order_num,times:o.monitor_info.times,prices:o.monitor_info.prices,order_action:o.monitor_info.order_action,mix_type:o.monitor_info.mix_type,win_type:o.monitor_info.win_type,signal_check:o.monitor_info.signal_check,limit_price:o.monitor_info.limit_price,ignore_loss:o.monitor_info.ignore_loss,first_ratio:o.monitor_info.first_ratio,have_symbol:o.monitor_info.have_symbol,reduce_type:o.monitor_info.reduce_type,testtime:o.monitor_info.testtime,trade_type:o.monitor_info.trade_type,callbackSpread:o.monitor_info.callbackSpread}},g="http://"+t+"/takeover_order";if(W(c.action_info))try{let n;if(s==="no"?n=await new Promise(f=>{x(c,g,function(C){f(C.data)})}):n=await I(c,g),console.log("返回结果",n),n.status==="sucess")setTimeout(function(){V({title:"执行成功",message:n.msg,type:"success"}),o.resetMonitor_info()},1e3);else{const f=await k(n.msg)}}catch(n){T("链接出错，需要重试"),console.error(n)}}else if(o.monitor_info.action==="monitor"){console.log("监控逻辑");const t=localStorage.getItem("bot_ip"),y=localStorage.getItem("bot_key");var i=o.monitor_info.info;Array.isArray(i)&&i.length>=2?o.monitor_info.info=i.join(", "):console.log("infoList 不是一个列表或长度小于 2");const d={symbol:"ETH-USDT-SWAP",action:"signal",key:y,position_mode:"add",action_info:{action_status:"add",symbol:"ETH-USDT-SWAP",side:"long",action:"signal",lever:o.monitor_info.lever,monitor_type:o.monitor_info.monitor_type,signal_type:o.monitor_info.monitor_item,number:o.monitor_info.number,price_period:o.monitor_info.price_period,info:o.monitor_info.info,loss_present:o.monitor_info.loss_present,win_multiple:o.monitor_info.win_multiple,safeorder:o.monitor_info.safeorder,auto_set:o.monitor_info.auto_set,risk:o.monitor_info.risk,kbars:o.monitor_info.kbars,half_lock:o.monitor_info.half_lock,signal_verify:o.monitor_info.signal_verify,new_signal_action:o.monitor_info.new_signal_action,recver:o.monitor_info.recver,rec_type:o.monitor_info.rec_type,symbols:o.monitor_info.symbols,items:o.monitor_info.items}},c="http://"+t+"/takeover_order";if(await k("确认提交监控计划吗？"))try{let a;if(s==="no"?a=await new Promise(n=>{x(d,c,function(f){n(f.data)})}):a=await I(d,c),console.log("返回结果",a),a.status==="sucess")setTimeout(function(){V({title:"执行成功",message:a.msg,type:"success"}),o.resetMonitor_info(),U.del_all_price_tool()},1e3);else{const n=await k(a.msg)}}catch(a){T("链接出错，需要重试"),console.error(a)}}else if(o.monitor_info.action==="strategy"){console.log("监控逻辑");const t=localStorage.getItem("bot_ip"),y=localStorage.getItem("bot_key"),d={symbol:o.monitor_info.symbol,action:"strategy",key:y,position_mode:"add",action_info:{action_status:"add",symbol:o.monitor_info.symbol,strategy:o.monitor_info.monitor_type,price_period:o.monitor_info.price_period,lever:o.monitor_info.lever,loss_present:o.monitor_info.loss_present,win_multiple:o.monitor_info.win_multiple,kbars:o.monitor_info.kbars,safeorder:o.monitor_info.safeorder,auto_set:o.monitor_info.auto_set,auto_monitor:"no",risk:o.monitor_info.risk,half_lock:o.monitor_info.half_lock,sz_type:o.monitor_info.sz_type}},c="http://"+t+"/takeover_order";if(await k("确认提交监控计划吗？"))try{let a;if(s==="no"?a=await new Promise(n=>{x(d,c,function(f){n(f.data)})}):a=await I(d,c),console.log("返回结果",a),a.status==="sucess")setTimeout(function(){V({title:"执行成功",message:a.msg,type:"success"}),o.resetMonitor_info()},1e3);else{const n=await k(a.msg)}}catch(a){T("链接出错，需要重试"),console.error(a)}}}return(s,i)=>{const l=L;return b(),w(q,null,[p("div",Q,[r(e(z),{size:"default",modelValue:e(o).monitor_selectTag,"onUpdate:modelValue":i[3]||(i[3]=t=>e(o).monitor_selectTag=t)},{default:_(()=>[r(e(E),{value:"ai",onClick:i[0]||(i[0]=t=>e(o).monitor_selectTag="ai")},{default:_(()=>[m("智能盯盘")]),_:1}),r(e(E),{value:"plan",onClick:i[1]||(i[1]=t=>e(o).monitor_selectTag="plan")},{default:_(()=>[m("计划中心")]),_:1}),r(e(E),{value:"signal",onClick:i[2]||(i[2]=t=>e(o).monitor_selectTag="signal")},{default:_(()=>[m("信号交易")]),_:1})]),_:1},8,["modelValue"])]),e(o).monitor_selectTag==="ai"?(b(),w("div",X,[r(e(A))])):h("",!0),e(o).monitor_selectTag==="plan"?(b(),w("div",Y,[p("div",Z,[r(e(z),{size:"default",modelValue:S.value,"onUpdate:modelValue":i[4]||(i[4]=t=>S.value=t)},{default:_(()=>[r(e(E),{value:"monitor_item"},{default:_(()=>[m("AI计划")]),_:1}),r(e(E),{value:"signal_item"},{default:_(()=>[m("信号监控")]),_:1})]),_:1},8,["modelValue"])]),S.value==="monitor_item"?(b(),w("div",oo,[p("div",null,[r(e(K),{data:e(o).bot_data.storsi_signal},{default:_(()=>[r(e(v),{type:"expand",width:"20"},{default:_(t=>[p("div",to,[r(e(A),{info:t.row,status:"edit"},null,8,["info"])])]),_:1}),r(e(v),{label:"代码",width:"65"},{default:_(t=>[m(u(t.row.symbol.split("-")[0]),1)]),_:1}),r(e(v),{label:"周期",width:"65"},{default:_(t=>[m(u(t.row.price_period),1)]),_:1}),r(e(v),{label:"方向",width:"65"},{default:_(t=>[m(u(t.row.side==="long"?"多":"空"),1)]),_:1}),r(e(v),{label:"动作",width:"85"},{default:_(t=>[m(u(M(t.row.signal_type)),1)]),_:1})]),_:1},8,["data"])])])):h("",!0),S.value==="signal_item"?(b(),w("div",eo,[p("div",null,[r(e(K),{data:e(o).bot_data.monitor_symbol_list,style:{width:"98vw"}},{default:_(()=>[r(e(v),{type:"expand",style:{width:"10vw"}},{default:_(t=>[p("div",null,[p("p",null,"周期: "+u(t.row.price_period),1),p("p",null,"名称: "+u(t.row.signal_type),1),p("p",null,"范围: "+u(t.row.number),1),r(l,{size:"small",type:"danger",round:"",onClick:y=>O(t.row,"signal")},{default:_(()=>[m("删除计划")]),_:2},1032,["onClick"])])]),_:1}),r(e(v),{label:"动作",style:{width:"30vw"}},{default:_(t=>[m(u(t.row.signal_type),1)]),_:1}),r(e(v),{label:"周期",style:{width:"30vw"}},{default:_(t=>[m(u(t.row.price_period),1)]),_:1})]),_:1},8,["data"])])])):h("",!0)])):h("",!0),e(o).monitor_selectTag==="signal"?(b(),w("div",io,[r(e(R))])):h("",!0),e(o).monitor_selectTag==="result"?(b(),w("div",no,[r(e($))])):h("",!0),e(o).monitor_selectTag==="ai"?(b(),w("div",ro,[r(l,{type:"primary",onClick:i[5]||(i[5]=t=>G())},{default:_(()=>[m("提交计划")]),_:1})])):h("",!0)],64)}}});export{uo as default};
