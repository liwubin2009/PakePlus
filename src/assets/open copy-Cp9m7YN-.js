const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/multi_action-M6zuproq.js","assets/zixuan_list.vue_vue_type_style_index_0_lang-Bztu2ySh.js","assets/main-BeSCBoN1.js","assets/index-DyY66E7G.js","assets/main-DMYBf86n.css","assets/zixuan_list-BvC8bdZc.css","assets/el-option-DgYD06Jd.js","assets/index-CSTuB7SG.js","assets/el-option-BHqzF8z9.css","assets/index-DGrJy6ZA.js","assets/multi_action-DRZdl731.css","assets/el-input-B92SH0sA.css","assets/el-input-number-zmytgoX_.css","assets/el-select-BuFPFIXc.css","assets/el-popper-CgDDfGE6.css","assets/open_board-CjsV0nyh.js","assets/_commonjsHelpers-Cpj98o6Y.js","assets/open_board-BiCcswIX.css","assets/el-button-CbVV1OIM.css","assets/out_action-DJKnS0R3.js","assets/postion_action-D8gSgXPy.js","assets/lock_position-CdXS-W2y.js","assets/reduce_postion-c-xIPZd-.js","assets/add_position-B3E7QxFc.js"])))=>i.map(i=>d[i]);
import{_ as P}from"./index-DyY66E7G.js";import{D as y,G as V,z as Q,A as X,E as W}from"./zixuan_list.vue_vue_type_style_index_0_lang-Bztu2ySh.js";/* empty css                  */import{E as b,a as Y}from"./el-option-DgYD06Jd.js";import{d as Z,u as j,x as O,a as ee,w as te,C as $,c as a,j as c,k as n,v as w,l as e,m as i,p as s,a0 as f,e as u,s as d,J as k,a1 as g,as as S}from"./main-BeSCBoN1.js";import{s as le}from"./SendData-B_I2FNqn.js";import{E as oe}from"./index-CSTuB7SG.js";const ae={class:"container"},se={key:0},ie={class:"container"},ne={class:"container"},re={class:"container"},_e={key:0,class:"container",disabled:""},de={class:"container"},ue={key:1},pe={key:0,class:"container"},ce={key:1,class:"container"},fe={class:"container"},me={class:"container"},ye={key:2},we={key:0,class:"container"},ve={class:"container"},be={class:"container"},ke={key:1,class:"container"},ge={class:"container"},Ve={class:"container"},Pe={key:2,class:"container"},Se={key:3,class:"center-container"},Be=Z({__name:"open copy",setup(Te){const p=j(),N=S(()=>P(()=>import("./multi_action-M6zuproq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),D=S(()=>P(()=>import("./open_board-CjsV0nyh.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9,16,17,18]))),z=S(()=>P(()=>import("./out_action-DJKnS0R3.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10,18,11,12,13,14]))),I=S(()=>P(()=>import("./postion_action-D8gSgXPy.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,9,10,11,12,18,13,14]))),L=S(()=>P(()=>import("./lock_position-CdXS-W2y.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9,10,18,11,12,13,14]))),R=S(()=>P(()=>import("./reduce_postion-c-xIPZd-.js"),__vite__mapDeps([22,1,2,3,4,5,9,10,18,11,12]))),K=S(()=>P(()=>import("./add_position-B3E7QxFc.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,18,11,12,13,14])));O(0);const A=O(p.all_symbols),t=ee(),h=O(!1);function E(r){r.ticker!==p.symbol.ticker&&(t.resetOrderinfo(),p.set_symbol(r))}async function G(r){return await W.confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})}function C(){const r=t.bot_data.api_list;return r?!!r.find(_=>_.ismaster==="sub"):!1}function F(r){let o=r;r!=="SWAP"&&r!=="SPOT"&&(o="SWAP");const _=t.swap_signal_info.symbol||"BTC-USDT-SWAP",T=_.endsWith("SWAP");if(o==="SPOT"&&T){const m=p.spot_list.find(l=>l.ticker===_.replace(/-SWAP$/,""))||p.spot_list.find(l=>l.shortName==="BTC-USDT");A.value=p.spot_list,t.swap_signal_info.side!=="net"&&(t.swap_signal_info.side="net"),E(m)}else if(o==="SWAP"&&!T){const m=_.endsWith("-SWAP")?_:_.concat("-SWAP"),l=p.all_symbols.find(v=>v.ticker===m)||p.spot_list.find(v=>v.shortName==="BTC-USDT-SWAP");A.value=p.all_symbols,t.swap_signal_info.side=="net"&&(t.swap_signal_info.side=""),E(l)}}function B(r){W.alert(r)}function J(r){if(t.selecttab==="master"||t.selecttab==="multiple")return!0;const o=["trade_type","account_switch","side","symbol"];for(const _ of o)if(r[_]===null||r[_]===void 0||r[_]==="")return console.log(_,r[_]),B("有必要选项未指定"),!1;return!0}async function M(){const r=localStorage.getItem("bot_ip"),o=localStorage.getItem("bot_key");if(!r||!o)return;const _=`http://${r}/takeover_order`,T=["reduce_position","reset_win_loss","reset_win_loss_part","close_position_by_ratio","close_position_by_ema","close_position_by_trend_line","close_position_by_move_stop","close_position_by_mix","mix_add"];t.swap_trade_info.master_action==="reduce_position"&&(t.swap_trade_info.action="reduce_position"),T.includes(t.swap_trade_info.action)||(t.swap_trade_info.win_price="",t.swap_trade_info.loss_price="");let m;if(t.selecttab==="swap"||t.selecttab==="multiple"?(console.log("合约模式"),m={...t.swap_signal_info,account_switch:C()?t.swap_signal_info.account_switch:"master",action:t.selecttab==="multiple"?"multiple":t.swap_signal_info.action,sub_action:t.selecttab==="multiple"?t.swap_signal_info.action:"",symbol:t.selecttab==="multiple"?"BTC-USDT-SWAP":t.swap_signal_info.symbol}):t.selecttab==="master"?(t.swap_trade_info.price_period=p.period.timeframe,m=t.swap_trade_info):(m=null,console.error("selecttab 取值不符合预期")),m){const l={tradtype:"swap",symbol:m.symbol,action:t.selecttab==="swap"||t.selecttab==="multiple"?m.action:m.master_action,action_info:m,key:o,account:m.api_key,side:m.side};if(J(m)){h.value=!0;try{const U=new Promise((he,H)=>{setTimeout(()=>{H(new Error("请求超时，请重试"))},18e4)}),x=await Promise.race([le(l,_),U]);x.status==="sucess"?setTimeout(()=>{oe({title:"执行成功",message:x.msg,type:"success"}),t.reset_swap_info(),p.del_all_price_tool()},1e3):await G(x.msg)}catch(U){B("请求出现错误，请重试"),console.error("请求错误:",U)}finally{h.value=!1}}}}function q(){try{return t.bot_data.sys_set.user_type==="vip_test"}catch{return!1}}return te(()=>t.swap_signal_info.trade_type,(r,o)=>{F(r)},{immediate:!0}),(r,o)=>{const _=Y,T=Q,m=X;return $((a(),c("div",null,[n("div",ae,[n("p",{style:w({color:e(t).color})},"交易类型:",4),i(e(V),{size:"default",modelValue:e(t).selecttab,"onUpdate:modelValue":o[3]||(o[3]=l=>e(t).selecttab=l)},{default:s(()=>[i(e(y),{value:"swap",onClick:o[0]||(o[0]=l=>e(t).swap_trade_info.symbol=e(p).symbol.ticker)},{default:s(()=>[f("手动")]),_:1}),q()?(a(),u(e(y),{key:0,value:"multiple",onClick:o[1]||(o[1]=l=>e(t).swap_trade_info.action="")},{default:s(()=>[f("批量")]),_:1})):d("",!0),i(e(y),{value:"master",onClick:o[2]||(o[2]=l=>e(t).swap_trade_info.action="")},{default:s(()=>[f("管理")]),_:1})]),_:1},8,["modelValue"])]),e(t).selecttab==="master"?(a(),c("div",se,[n("div",ie,[n("p",{style:w({color:e(t).color})},"执行账户:",4),i(e(b),{modelValue:e(t).swap_trade_info.api_key,"onUpdate:modelValue":o[4]||(o[4]=l=>e(t).swap_trade_info.api_key=l),placeholder:"选择监控项目",teleported:!1,filterable:"",style:{width:"200px"},disabled:""},{default:s(()=>[(a(!0),c(k,null,g(e(t).bot_data.api_list,l=>(a(),u(_,{key:l.api_key,label:l.account_name,value:l.api_key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",ne,[n("p",{style:w({color:e(t).color})},"合约种类:",4),i(e(b),{modelValue:e(t).swap_trade_info.symbol,"onUpdate:modelValue":o[5]||(o[5]=l=>e(t).swap_trade_info.symbol=l),placeholder:"请选择币种",style:{width:"200px"},teleported:!1,filterable:"",disabled:""},{default:s(()=>[(a(!0),c(k,null,g(e(p).all_symbols,l=>(a(),u(_,{key:l.ticker,label:l.shortName,value:l.ticker,onClick:v=>E(l)},null,8,["label","value","onClick"]))),128))]),_:1},8,["modelValue"])]),n("div",re,[n("p",{style:w({color:e(t).color})},"行情周期:",4),i(e(b),{modelValue:e(t).swap_trade_info.price_period,"onUpdate:modelValue":o[6]||(o[6]=l=>e(t).swap_trade_info.price_period=l),placeholder:"选择监控项目",teleported:!1,filterable:"",style:{width:"200px"}},{default:s(()=>[(a(!0),c(k,null,g(e(p).AllPeriods,l=>(a(),u(_,{key:l.timeframe,label:l.timeframe,value:l.timeframe,onClick:v=>e(p).set_period(l)},null,8,["label","value","onClick"]))),128))]),_:1},8,["modelValue"])]),e(t).swap_trade_info.side&&e(t).swap_trade_info.trade_type!=="SPOT"?(a(),c("div",_e,[n("p",{style:w({color:e(t).color})},"管理方向:",4),i(e(V),{size:"default",modelValue:e(t).swap_trade_info.side,"onUpdate:modelValue":o[7]||(o[7]=l=>e(t).swap_trade_info.side=l)},{default:s(()=>[e(t).swap_trade_info.side==="long"?(a(),u(e(y),{key:0,value:"long",disabled:""},{default:s(()=>[f("多单方向")]),_:1})):d("",!0),e(t).swap_trade_info.side==="short"?(a(),u(e(y),{key:1,value:"short",disabled:""},{default:s(()=>[f("空单方向")]),_:1})):d("",!0)]),_:1},8,["modelValue"])])):d("",!0),n("div",de,[n("p",{style:w({color:e(t).color})},"执行内容:",4),i(e(b),{modelValue:e(t).swap_trade_info.master_action,"onUpdate:modelValue":o[8]||(o[8]=l=>e(t).swap_trade_info.master_action=l),placeholder:"请选择币种",style:{width:"200px"},teleported:!1,filterable:"",onClick:o[9]||(o[9]=l=>e(t).swap_trade_info.action="")},{default:s(()=>[(a(!0),c(k,null,g(e(t).master_actions_list,l=>(a(),u(_,{key:l.value,label:l.action,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e(t).swap_trade_info.master_action==="lock_position"?(a(),u(e(L),{key:1})):d("",!0),e(t).swap_trade_info.master_action==="reduce_position"?(a(),u(e(R),{key:2})):d("",!0),e(t).swap_trade_info.master_action==="add_position"?(a(),u(e(K),{key:3})):d("",!0),e(t).swap_trade_info.master_action==="master_tools"?(a(),u(e(I),{key:4})):d("",!0),e(t).swap_trade_info.master_action==="close_position"?(a(),u(e(z),{key:5})):d("",!0),e(t).swap_trade_info.master_action==="multi_action"?(a(),u(e(N),{key:6})):d("",!0)])):d("",!0),e(t).selecttab==="multiple"?(a(),c("div",ue,[C()?(a(),c("div",pe,[n("p",{style:w({color:e(t).color})},"账号选择:",4),i(e(V),{size:"default",modelValue:e(t).swap_signal_info.account_switch,"onUpdate:modelValue":o[10]||(o[10]=l=>e(t).swap_signal_info.account_switch=l)},{default:s(()=>[i(e(y),{value:"master"},{default:s(()=>[f("主账户")]),_:1}),i(e(y),{value:"sub"},{default:s(()=>[f("副账户")]),_:1})]),_:1},8,["modelValue"])])):d("",!0),e(p).draw==="chart"?(a(),c("div",ce,[n("p",{style:w({color:e(t).color})},"行情周期:",4),i(e(b),{modelValue:e(t).swap_signal_info.price_period,"onUpdate:modelValue":o[11]||(o[11]=l=>e(t).swap_signal_info.price_period=l),placeholder:"选择监控项目",teleported:!1,filterable:"",style:{width:"200px"}},{default:s(()=>[(a(!0),c(k,null,g(e(p).AllPeriods,l=>(a(),u(_,{key:l.timeframe,label:l.timeframe,value:l.timeframe,onClick:v=>e(p).set_period(l)},null,8,["label","value","onClick"]))),128))]),_:1},8,["modelValue"])])):d("",!0),n("div",fe,[n("p",{style:w({color:e(t).color})},"执行动作:",4),i(e(b),{modelValue:e(t).swap_signal_info.action,"onUpdate:modelValue":o[12]||(o[12]=l=>e(t).swap_signal_info.action=l),placeholder:"选择执行的动作",teleported:!1,style:{width:"200px"}},{default:s(()=>[(a(!0),c(k,null,g(e(t).openactionlist,l=>(a(),u(_,{key:l.action,label:l.action,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",me,[n("p",{style:w({color:e(t).color})},"执行方向:",4),i(e(V),{size:"default",modelValue:e(t).swap_signal_info.side,"onUpdate:modelValue":o[13]||(o[13]=l=>e(t).swap_signal_info.side=l)},{default:s(()=>[e(t).swap_signal_info.trade_type!=="SPOT"?(a(),u(e(y),{key:0,value:"long"},{default:s(()=>[f("多单方向")]),_:1})):d("",!0),e(t).swap_signal_info.trade_type!=="SPOT"?(a(),u(e(y),{key:1,value:"short"},{default:s(()=>[f("空单方向")]),_:1})):d("",!0)]),_:1},8,["modelValue"])]),i(e(D))])):d("",!0),e(t).selecttab==="swap"?(a(),c("div",ye,[C()?(a(),c("div",we,[n("p",{style:w({color:e(t).color})},"账号选择:",4),i(e(V),{size:"default",modelValue:e(t).swap_signal_info.account_switch,"onUpdate:modelValue":o[14]||(o[14]=l=>e(t).swap_signal_info.account_switch=l)},{default:s(()=>[i(e(y),{value:"master"},{default:s(()=>[f("主账户")]),_:1}),i(e(y),{value:"sub"},{default:s(()=>[f("副账户")]),_:1})]),_:1},8,["modelValue"])])):d("",!0),n("div",ve,[n("p",{style:w({color:e(t).color})},"账号选择:",4),i(e(V),{size:"default",modelValue:e(t).swap_signal_info.trade_type,"onUpdate:modelValue":o[15]||(o[15]=l=>e(t).swap_signal_info.trade_type=l)},{default:s(()=>[i(e(y),{value:"SWAP"},{default:s(()=>[f("合约交易")]),_:1}),i(e(y),{value:"SPOT"},{default:s(()=>[f("现货交易")]),_:1})]),_:1},8,["modelValue"])]),$((a(),c("div",be,[n("p",{style:w({color:e(t).color})},"合约种类:",4),i(e(b),{modelValue:e(t).swap_signal_info.symbol,"onUpdate:modelValue":o[16]||(o[16]=l=>e(t).swap_signal_info.symbol=l),placeholder:"请选择币种",style:{width:"200px"},teleported:!1,filterable:""},{default:s(()=>[(a(!0),c(k,null,g(A.value,l=>(a(),u(_,{key:l.ticker,label:l.shortName,value:l.ticker,onClick:v=>E(l)},null,8,["label","value","onClick"]))),128))]),_:1},8,["modelValue"])])),[[m,h.value]]),e(p).draw==="chart"?(a(),c("div",ke,[n("p",{style:w({color:e(t).color})},"行情周期:",4),i(e(b),{modelValue:e(t).swap_signal_info.price_period,"onUpdate:modelValue":o[17]||(o[17]=l=>e(t).swap_signal_info.price_period=l),placeholder:"选择监控项目",teleported:!1,filterable:"",style:{width:"200px"}},{default:s(()=>[(a(!0),c(k,null,g(e(p).AllPeriods,l=>(a(),u(_,{key:l.timeframe,label:l.timeframe,value:l.timeframe,onClick:v=>e(p).set_period(l)},null,8,["label","value","onClick"]))),128))]),_:1},8,["modelValue"])])):d("",!0),n("div",ge,[n("p",{style:w({color:e(t).color})},"执行动作:",4),i(e(b),{modelValue:e(t).swap_signal_info.action,"onUpdate:modelValue":o[18]||(o[18]=l=>e(t).swap_signal_info.action=l),placeholder:"选择执行的动作",teleported:!1,style:{width:"200px"}},{default:s(()=>[(a(!0),c(k,null,g(e(t).openactionlist,l=>(a(),u(_,{key:l.action,label:l.action,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",Ve,[n("p",{style:w({color:e(t).color})},"执行方向:",4),i(e(V),{size:"default",modelValue:e(t).swap_signal_info.side,"onUpdate:modelValue":o[19]||(o[19]=l=>e(t).swap_signal_info.side=l)},{default:s(()=>[e(t).swap_signal_info.trade_type!=="SPOT"?(a(),u(e(y),{key:0,value:"long"},{default:s(()=>[f("多单方向")]),_:1})):d("",!0),e(t).swap_signal_info.trade_type!=="SPOT"?(a(),u(e(y),{key:1,value:"short"},{default:s(()=>[f("空单方向")]),_:1})):d("",!0),e(t).swap_signal_info.trade_type==="SPOT"?(a(),u(e(y),{key:2,value:"net"},{default:s(()=>[f("买入现货")]),_:1})):d("",!0)]),_:1},8,["modelValue"])]),i(e(D)),e(t).swap_signal_info.account_switch==="master"&&C()?(a(),c("div",Pe,[n("p",{style:w({color:e(t).color})},"至副账号:",4),i(e(V),{size:"default",modelValue:e(t).swap_signal_info.forward,"onUpdate:modelValue":o[20]||(o[20]=l=>e(t).swap_signal_info.forward=l)},{default:s(()=>[i(e(y),{value:"yes"},{default:s(()=>[f("转发副账号")]),_:1}),i(e(y),{value:"no"},{default:s(()=>[f("禁止转发")]),_:1})]),_:1},8,["modelValue"])])):d("",!0)])):d("",!0),e(t).orderinfo.tradtype!=="avg"?(a(),c("div",Se,[i(T,{type:"primary",onClick:o[21]||(o[21]=l=>M())},{default:s(()=>[f("提交执行")]),_:1})])):d("",!0)])),[[m,h.value]])}}});export{Be as default};
