const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/board-BxTy2jsv.js","assets/zixuan_list.vue_vue_type_style_index_0_lang-Bztu2ySh.js","assets/index-DyY66E7G.js","assets/zixuan_list-BvC8bdZc.css","assets/chart-rOLy3Hs5.js","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/index-Bdt1jrkR.js","assets/index-CSTuB7SG.js","assets/SendData-B_I2FNqn.js","assets/chart-Cv_hZwc4.css"])))=>i.map(i=>d[i]);
import{_ as Ko}from"./index-DyY66E7G.js";/**
* @vue/shared v3.4.30
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function io(e,t){const r=new Set(e.split(","));return i=>r.has(i)}const Fe={},Dr=[],vt=()=>{},Pu=()=>!1,Zi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),no=e=>e.startsWith("onUpdate:"),Ne=Object.assign,oo=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Mu=Object.prototype.hasOwnProperty,xe=(e,t)=>Mu.call(e,t),ne=Array.isArray,kr=e=>pi(e)==="[object Map]",Ji=e=>pi(e)==="[object Set]",Go=e=>pi(e)==="[object Date]",he=e=>typeof e=="function",Oe=e=>typeof e=="string",Lt=e=>typeof e=="symbol",Pe=e=>e!==null&&typeof e=="object",ls=e=>(Pe(e)||he(e))&&he(e.then)&&he(e.catch),us=Object.prototype.toString,pi=e=>us.call(e),Au=e=>pi(e).slice(8,-1),cs=e=>pi(e)==="[object Object]",ao=e=>Oe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Zr=io(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qi=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Du=/-(\w)/g,Bt=Qi(e=>e.replace(Du,(t,r)=>r?r.toUpperCase():"")),ku=/\B([A-Z])/g,Ir=Qi(e=>e.replace(ku,"-$1").toLowerCase()),en=Qi(e=>e.charAt(0).toUpperCase()+e.slice(1)),mn=Qi(e=>e?`on${en(e)}`:""),sr=(e,t)=>!Object.is(e,t),Fi=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},fs=(e,t,r,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:r})},On=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Fu=e=>{const t=Oe(e)?Number(e):NaN;return isNaN(t)?e:t};let qo;const hs=()=>qo||(qo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function so(e){if(ne(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=Oe(i)?Bu(i):so(i);if(n)for(const o in n)t[o]=n[o]}return t}else if(Oe(e)||Pe(e))return e}const Ru=/;(?![^(]*\))/g,Ou=/:([^]+)/,Lu=/\/\*[^]*?\*\//g;function Bu(e){const t={};return e.replace(Lu,"").split(Ru).forEach(r=>{if(r){const i=r.split(Ou);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function lo(e){let t="";if(Oe(e))t=e;else if(ne(e))for(let r=0;r<e.length;r++){const i=lo(e[r]);i&&(t+=i+" ")}else if(Pe(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const Nu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Vu=io(Nu);function ds(e){return!!e||e===""}function Wu(e,t){if(e.length!==t.length)return!1;let r=!0;for(let i=0;r&&i<e.length;i++)r=Vr(e[i],t[i]);return r}function Vr(e,t){if(e===t)return!0;let r=Go(e),i=Go(t);if(r||i)return r&&i?e.getTime()===t.getTime():!1;if(r=Lt(e),i=Lt(t),r||i)return e===t;if(r=ne(e),i=ne(t),r||i)return r&&i?Wu(e,t):!1;if(r=Pe(e),i=Pe(t),r||i){if(!r||!i)return!1;const n=Object.keys(e).length,o=Object.keys(t).length;if(n!==o)return!1;for(const a in e){const s=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(s&&!l||!s&&l||!Vr(e[a],t[a]))return!1}}return String(e)===String(t)}function vs(e,t){return e.findIndex(r=>Vr(r,t))}const $p=e=>Oe(e)?e:e==null?"":ne(e)||Pe(e)&&(e.toString===us||!he(e.toString))?JSON.stringify(e,ps,2):String(e),ps=(e,t)=>t&&t.__v_isRef?ps(e,t.value):kr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n],o)=>(r[_n(i,o)+" =>"]=n,r),{})}:Ji(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>_n(r))}:Lt(t)?_n(t):Pe(t)&&!ne(t)&&!cs(t)?String(t):t,_n=(e,t="")=>{var r;return Lt(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.4.30
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ht;class gs{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ht,!t&&ht&&(this.index=(ht.scopes||(ht.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=ht;try{return ht=this,t()}finally{ht=r}}}on(){ht=this}off(){ht=this.parent}stop(t){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function ms(e){return new gs(e)}function zu(e,t=ht){t&&t.active&&t.effects.push(e)}function _s(){return ht}function Hu(e){ht&&ht.cleanups.push(e)}let br;class uo{constructor(t,r,i,n){this.fn=t,this.trigger=r,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,zu(this,n)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,cr();for(let t=0;t<this._depsLength;t++){const r=this.deps[t];if(r.computed){if(r.computed.effect._dirtyLevel===2)return Xt(),!0;if(ju(r.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),Xt()}return this._dirtyLevel>=5}set dirty(t){this._dirtyLevel=t?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=ir,r=br;try{return ir=!0,br=this,this._runnings++,Zo(this),this.fn()}finally{Jo(this),this._runnings--,br=r,ir=t}}stop(){this.active&&(Zo(this),Jo(this),this.onStop&&this.onStop(),this.active=!1)}}function ju(e){return e.value}function Zo(e){e._trackId++,e._depsLength=0}function Jo(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)ys(e.deps[t],e);e.deps.length=e._depsLength}}function ys(e,t){const r=e.get(t);r!==void 0&&t._trackId!==r&&(e.delete(t),e.size===0&&e.cleanup())}let ir=!0,Ln=0;const bs=[];function cr(){bs.push(ir),ir=!1}function Xt(){const e=bs.pop();ir=e===void 0?!0:e}function co(){Ln++}function fo(){for(Ln--;!Ln&&Bn.length;)Bn.shift()()}function Ss(e,t,r){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const i=e.deps[e._depsLength];i!==t?(i&&ys(i,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Bn=[];function ws(e,t,r){co();for(const i of e.keys()){let n;if(!e.computed&&i.computed&&i._runnings>0&&(n??(n=e.get(i)===i._trackId))){i._dirtyLevel=2;continue}i._dirtyLevel<t&&(n??(n=e.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i.computed&&i._dirtyLevel===2&&(i._shouldSchedule=!0),i._dirtyLevel=t),i._shouldSchedule&&(n??(n=e.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==3&&(i._shouldSchedule=!1,i.scheduler&&Bn.push(i.scheduler)))}fo()}const xs=(e,t)=>{const r=new Map;return r.cleanup=e,r.computed=t,r},Vi=new WeakMap,Sr=Symbol(""),Nn=Symbol("");function ct(e,t,r){if(ir&&br){let i=Vi.get(e);i||Vi.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=xs(()=>i.delete(r))),Ss(br,n)}}function Ht(e,t,r,i,n,o){const a=Vi.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(r==="length"&&ne(e)){const l=Number(i);a.forEach((u,c)=>{(c==="length"||!Lt(c)&&c>=l)&&s.push(u)})}else switch(r!==void 0&&s.push(a.get(r)),t){case"add":ne(e)?ao(r)&&s.push(a.get("length")):(s.push(a.get(Sr)),kr(e)&&s.push(a.get(Nn)));break;case"delete":ne(e)||(s.push(a.get(Sr)),kr(e)&&s.push(a.get(Nn)));break;case"set":kr(e)&&s.push(a.get(Sr));break}co();for(const l of s)l&&ws(l,5);fo()}function Xu(e,t){const r=Vi.get(e);return r&&r.get(t)}const $u=io("__proto__,__v_isRef,__isVue"),Cs=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Lt)),Qo=Yu();function Yu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=Ee(this);for(let o=0,a=this.length;o<a;o++)ct(i,"get",o+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(Ee)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){cr(),co();const i=Ee(this)[t].apply(this,r);return fo(),Xt(),i}}),e}function Uu(e){Lt(e)||(e=String(e));const t=Ee(this);return ct(t,"has",e),t.hasOwnProperty(e)}class Es{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,i){const n=this._isReadonly,o=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return o;if(r==="__v_raw")return i===(n?o?ac:Ms:o?Ps:Ts).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const a=ne(t);if(!n){if(a&&xe(Qo,r))return Reflect.get(Qo,r,i);if(r==="hasOwnProperty")return Uu}const s=Reflect.get(t,r,i);return(Lt(r)?Cs.has(r):$u(r))||(n||ct(t,"get",r),o)?s:Ve(s)?a&&ao(r)?s:s.value:Pe(s)?n?As(s):ce(s):s}}class Is extends Es{constructor(t=!1){super(!1,t)}set(t,r,i,n){let o=t[r];if(!this._isShallow){const l=si(o);if(!Wi(i)&&!si(i)&&(o=Ee(o),i=Ee(i)),!ne(t)&&Ve(o)&&!Ve(i))return l?!1:(o.value=i,!0)}const a=ne(t)&&ao(r)?Number(r)<t.length:xe(t,r),s=Reflect.set(t,r,i,n);return t===Ee(n)&&(a?sr(i,o)&&Ht(t,"set",r,i):Ht(t,"add",r,i)),s}deleteProperty(t,r){const i=xe(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&i&&Ht(t,"delete",r,void 0),n}has(t,r){const i=Reflect.has(t,r);return(!Lt(r)||!Cs.has(r))&&ct(t,"has",r),i}ownKeys(t){return ct(t,"iterate",ne(t)?"length":Sr),Reflect.ownKeys(t)}}class Ku extends Es{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const Gu=new Is,qu=new Ku,Zu=new Is(!0);const ho=e=>e,tn=e=>Reflect.getPrototypeOf(e);function Si(e,t,r=!1,i=!1){e=e.__v_raw;const n=Ee(e),o=Ee(t);r||(sr(t,o)&&ct(n,"get",t),ct(n,"get",o));const{has:a}=tn(n),s=i?ho:r?mo:li;if(a.call(n,t))return s(e.get(t));if(a.call(n,o))return s(e.get(o));e!==n&&e.get(t)}function wi(e,t=!1){const r=this.__v_raw,i=Ee(r),n=Ee(e);return t||(sr(e,n)&&ct(i,"has",e),ct(i,"has",n)),e===n?r.has(e):r.has(e)||r.has(n)}function xi(e,t=!1){return e=e.__v_raw,!t&&ct(Ee(e),"iterate",Sr),Reflect.get(e,"size",e)}function ea(e){e=Ee(e);const t=Ee(this);return tn(t).has.call(t,e)||(t.add(e),Ht(t,"add",e,e)),this}function ta(e,t){t=Ee(t);const r=Ee(this),{has:i,get:n}=tn(r);let o=i.call(r,e);o||(e=Ee(e),o=i.call(r,e));const a=n.call(r,e);return r.set(e,t),o?sr(t,a)&&Ht(r,"set",e,t):Ht(r,"add",e,t),this}function ra(e){const t=Ee(this),{has:r,get:i}=tn(t);let n=r.call(t,e);n||(e=Ee(e),n=r.call(t,e)),i&&i.call(t,e);const o=t.delete(e);return n&&Ht(t,"delete",e,void 0),o}function ia(){const e=Ee(this),t=e.size!==0,r=e.clear();return t&&Ht(e,"clear",void 0,void 0),r}function Ci(e,t){return function(i,n){const o=this,a=o.__v_raw,s=Ee(a),l=t?ho:e?mo:li;return!e&&ct(s,"iterate",Sr),a.forEach((u,c)=>i.call(n,l(u),l(c),o))}}function Ei(e,t,r){return function(...i){const n=this.__v_raw,o=Ee(n),a=kr(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=n[e](...i),c=r?ho:t?mo:li;return!t&&ct(o,"iterate",l?Nn:Sr),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Ut(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ju(){const e={get(o){return Si(this,o)},get size(){return xi(this)},has:wi,add:ea,set:ta,delete:ra,clear:ia,forEach:Ci(!1,!1)},t={get(o){return Si(this,o,!1,!0)},get size(){return xi(this)},has:wi,add:ea,set:ta,delete:ra,clear:ia,forEach:Ci(!1,!0)},r={get(o){return Si(this,o,!0)},get size(){return xi(this,!0)},has(o){return wi.call(this,o,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:Ci(!0,!1)},i={get(o){return Si(this,o,!0,!0)},get size(){return xi(this,!0)},has(o){return wi.call(this,o,!0)},add:Ut("add"),set:Ut("set"),delete:Ut("delete"),clear:Ut("clear"),forEach:Ci(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Ei(o,!1,!1),r[o]=Ei(o,!0,!1),t[o]=Ei(o,!1,!0),i[o]=Ei(o,!0,!0)}),[e,r,t,i]}const[Qu,ec,tc,rc]=Ju();function vo(e,t){const r=t?e?rc:tc:e?ec:Qu;return(i,n,o)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(xe(r,n)&&n in i?r:i,n,o)}const ic={get:vo(!1,!1)},nc={get:vo(!1,!0)},oc={get:vo(!0,!1)};const Ts=new WeakMap,Ps=new WeakMap,Ms=new WeakMap,ac=new WeakMap;function sc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lc(e){return e.__v_skip||!Object.isExtensible(e)?0:sc(Au(e))}function ce(e){return si(e)?e:po(e,!1,Gu,ic,Ts)}function uc(e){return po(e,!1,Zu,nc,Ps)}function As(e){return po(e,!0,qu,oc,Ms)}function po(e,t,r,i,n){if(!Pe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=n.get(e);if(o)return o;const a=lc(e);if(a===0)return e;const s=new Proxy(e,a===2?i:r);return n.set(e,s),s}function wr(e){return si(e)?wr(e.__v_raw):!!(e&&e.__v_isReactive)}function si(e){return!!(e&&e.__v_isReadonly)}function Wi(e){return!!(e&&e.__v_isShallow)}function Ds(e){return e?!!e.__v_raw:!1}function Ee(e){const t=e&&e.__v_raw;return t?Ee(t):e}function go(e){return Object.isExtensible(e)&&fs(e,"__v_skip",!0),e}const li=e=>Pe(e)?ce(e):e,mo=e=>Pe(e)?As(e):e;class ks{constructor(t,r,i,n){this.getter=t,this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new uo(()=>t(this._value),()=>Ri(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=Ee(this),r=t.effect._dirtyLevel;return(!t._cacheable||t.effect.dirty)&&sr(t._value,t._value=t.effect.run())&&r!==3&&Ri(t,5),Fs(t),t.effect._dirtyLevel>=2&&Ri(t,3),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function cc(e,t,r=!1){let i,n;const o=he(e);return o?(i=e,n=vt):(i=e.get,n=e.set),new ks(i,n,o||!n,r)}function Fs(e){var t;ir&&br&&(e=Ee(e),Ss(br,(t=e.dep)!=null?t:e.dep=xs(()=>e.dep=void 0,e instanceof ks?e:void 0)))}function Ri(e,t=5,r,i){e=Ee(e);const n=e.dep;n&&ws(n,t)}function Ve(e){return!!(e&&e.__v_isRef===!0)}function _e(e){return Rs(e,!1)}function Yp(e){return Rs(e,!0)}function Rs(e,t){return Ve(e)?e:new fc(e,t)}class fc{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Ee(t),this._value=r?t:li(t)}get value(){return Fs(this),this._value}set value(t){const r=this.__v_isShallow||Wi(t)||si(t);t=r?t:Ee(t),sr(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=r?t:li(t),Ri(this,5))}}function Vn(e){return Ve(e)?e.value:e}const hc={get:(e,t,r)=>Vn(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return Ve(n)&&!Ve(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function Os(e){return wr(e)?e:new Proxy(e,hc)}function dc(e){const t=ne(e)?new Array(e.length):{};for(const r in e)t[r]=Ls(e,r);return t}class vc{constructor(t,r,i){this._object=t,this._key=r,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Xu(Ee(this._object),this._key)}}class pc{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Up(e,t,r){return Ve(e)?e:he(e)?new pc(e):Pe(e)&&arguments.length>1?Ls(e,t,r):_e(e)}function Ls(e,t,r){const i=e[t];return Ve(i)?i:new vc(e,t,r)}/**
* @vue/runtime-core v3.4.30
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nr(e,t,r,i){try{return i?e(...i):e()}catch(n){gi(n,t,r)}}function xt(e,t,r,i){if(he(e)){const n=nr(e,t,r,i);return n&&ls(n)&&n.catch(o=>{gi(o,t,r)}),n}if(ne(e)){const n=[];for(let o=0;o<e.length;o++)n.push(xt(e[o],t,r,i));return n}}function gi(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){cr(),nr(l,null,10,[e,a,s]),Xt();return}}gc(e,r,n,i)}function gc(e,t,r,i=!0){console.error(e)}let ui=!1,Wn=!1;const nt=[];let Ot=0;const Fr=[];let Zt=null,mr=0;const Bs=Promise.resolve();let _o=null;function Ns(e){const t=_o||Bs;return e?t.then(this?e.bind(this):e):t}function mc(e){let t=Ot+1,r=nt.length;for(;t<r;){const i=t+r>>>1,n=nt[i],o=ci(n);o<e||o===e&&n.pre?t=i+1:r=i}return t}function rn(e){(!nt.length||!nt.includes(e,ui&&e.allowRecurse?Ot+1:Ot))&&(e.id==null?nt.push(e):nt.splice(mc(e.id),0,e),Vs())}function Vs(){!ui&&!Wn&&(Wn=!0,_o=Bs.then(zs))}function _c(e){const t=nt.indexOf(e);t>Ot&&nt.splice(t,1)}function yc(e){ne(e)?Fr.push(...e):(!Zt||!Zt.includes(e,e.allowRecurse?mr+1:mr))&&Fr.push(e),Vs()}function na(e,t,r=ui?Ot+1:0){for(;r<nt.length;r++){const i=nt[r];if(i&&i.pre){if(e&&i.id!==e.uid)continue;nt.splice(r,1),r--,i()}}}function Ws(e){if(Fr.length){const t=[...new Set(Fr)].sort((r,i)=>ci(r)-ci(i));if(Fr.length=0,Zt){Zt.push(...t);return}for(Zt=t,mr=0;mr<Zt.length;mr++){const r=Zt[mr];r.active!==!1&&r()}Zt=null,mr=0}}const ci=e=>e.id==null?1/0:e.id,bc=(e,t)=>{const r=ci(e)-ci(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function zs(e){Wn=!1,ui=!0,nt.sort(bc);try{for(Ot=0;Ot<nt.length;Ot++){const t=nt[Ot];t&&t.active!==!1&&nr(t,null,14)}}finally{Ot=0,nt.length=0,Ws(),ui=!1,_o=null,(nt.length||Fr.length)&&zs()}}function Sc(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||Fe;let n=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in i){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=i[c]||Fe;h&&(n=r.map(d=>Oe(d)?d.trim():d)),f&&(n=r.map(On))}let s,l=i[s=mn(t)]||i[s=mn(Bt(t))];!l&&o&&(l=i[s=mn(Ir(t))]),l&&xt(l,e,6,n);const u=i[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,xt(u,e,6,n)}}function Hs(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const o=e.emits;let a={},s=!1;if(!he(e)){const l=u=>{const c=Hs(u,t,!0);c&&(s=!0,Ne(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(Pe(e)&&i.set(e,null),null):(ne(o)?o.forEach(l=>a[l]=null):Ne(a,o),Pe(e)&&i.set(e,a),a)}function nn(e,t){return!e||!Zi(t)?!1:(t=t.slice(2).replace(/Once$/,""),xe(e,t[0].toLowerCase()+t.slice(1))||xe(e,Ir(t))||xe(e,t))}let $e=null,on=null;function zi(e){const t=$e;return $e=e,on=e&&e.type.__scopeId||null,t}function Kp(e){on=e}function Gp(){on=null}function wc(e,t=$e,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&ba(-1);const o=zi(t);let a;try{a=e(...n)}finally{zi(o),i._d&&ba(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function yn(e){const{type:t,vnode:r,proxy:i,withProxy:n,propsOptions:[o],slots:a,attrs:s,emit:l,render:u,renderCache:c,props:f,data:h,setupState:d,ctx:v,inheritAttrs:p}=e,g=zi(e);let m,_;try{if(r.shapeFlag&4){const y=n||i,w=y;m=Ft(u.call(w,y,c,f,d,h,v)),_=s}else{const y=t;m=Ft(y.length>1?y(f,{attrs:s,slots:a,emit:l}):y(f,null)),_=t.props?s:xc(s)}}catch(y){ri.length=0,gi(y,e,1),m=Ye(ut)}let S=m;if(_&&p!==!1){const y=Object.keys(_),{shapeFlag:w}=S;y.length&&w&7&&(o&&y.some(no)&&(_=Cc(_,o)),S=lr(S,_,!1,!0))}return r.dirs&&(S=lr(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(r.dirs):r.dirs),r.transition&&(S.transition=r.transition),m=S,zi(g),m}const xc=e=>{let t;for(const r in e)(r==="class"||r==="style"||Zi(r))&&((t||(t={}))[r]=e[r]);return t},Cc=(e,t)=>{const r={};for(const i in e)(!no(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function Ec(e,t,r){const{props:i,children:n,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?oa(i,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==i[h]&&!nn(u,h))return!0}}}else return(n||s)&&(!s||!s.$stable)?!0:i===a?!1:i?a?oa(i,a,u):!0:!!a;return!1}function oa(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const o=i[n];if(t[o]!==e[o]&&!nn(r,o))return!0}return!1}function Ic({vnode:e,parent:t},r){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=r,t=t.parent;else break}}const yo="components",Tc="directives";function qp(e,t){return bo(yo,e,!0,t)||e}const js=Symbol.for("v-ndc");function Zp(e){return Oe(e)?bo(yo,e,!1)||e:e||js}function Jp(e){return bo(Tc,e)}function bo(e,t,r=!0,i=!1){const n=$e||Xe;if(n){const o=n.type;if(e===yo){const s=Tf(o,!1);if(s&&(s===t||s===Bt(t)||s===en(Bt(t))))return o}const a=aa(n[e]||o[e],t)||aa(n.appContext[e],t);return!a&&i?o:a}}function aa(e,t){return e&&(e[t]||e[Bt(t)]||e[en(Bt(t))])}const Pc=e=>e.__isSuspense;function Mc(e,t){t&&t.pendingBranch?ne(e)?t.effects.push(...e):t.effects.push(e):yc(e)}function an(e,t,r=Xe,i=!1){if(r){const n=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{cr();const s=_i(r),l=xt(t,r,e,a);return s(),Xt(),l});return i?n.unshift(o):n.push(o),o}}const Yt=e=>(t,r=Xe)=>{(!yi||e==="sp")&&an(e,(...i)=>t(...i),r)},Ac=Yt("bm"),So=Yt("m"),Dc=Yt("bu"),kc=Yt("u"),Xs=Yt("bum"),wo=Yt("um"),Fc=Yt("sp"),Rc=Yt("rtg"),Oc=Yt("rtc");function Lc(e,t=Xe){an("ec",e,t)}function Qp(e,t){if($e===null)return e;const r=ln($e),i=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[o,a,s,l=Fe]=t[n];o&&(he(o)&&(o={mounted:o,updated:o}),o.deep&&er(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:s,modifiers:l}))}return e}function hr(e,t,r,i){const n=e.dirs,o=t&&t.dirs;for(let a=0;a<n.length;a++){const s=n[a];o&&(s.oldValue=o[a].value);let l=s.dir[i];l&&(cr(),xt(l,r,8,[e.el,s,e,t]),Xt())}}function eg(e,t,r,i){let n;const o=r;if(ne(e)||Oe(e)){n=new Array(e.length);for(let a=0,s=e.length;a<s;a++)n[a]=t(e[a],a,void 0,o)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,o)}else if(Pe(e))if(e[Symbol.iterator])n=Array.from(e,(a,s)=>t(a,s,void 0,o));else{const a=Object.keys(e);n=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];n[s]=t(e[u],u,s,o)}}else n=[];return n}function tg(e,t){for(let r=0;r<t.length;r++){const i=t[r];if(ne(i))for(let n=0;n<i.length;n++)e[i[n].name]=i[n].fn;else i&&(e[i.name]=i.key?(...n)=>{const o=i.fn(...n);return o&&(o.key=i.key),o}:i.fn)}return e}/*! #__NO_SIDE_EFFECTS__ */function $s(e,t){return he(e)?Ne({name:e.name},t,{setup:e}):e}const Jr=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function sa(e){he(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:i,delay:n=200,timeout:o,suspensible:a=!0,onError:s}=e;let l=null,u,c=0;const f=()=>(c++,l=null,h()),h=()=>{let d;return l||(d=l=t().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),s)return new Promise((p,g)=>{s(v,()=>p(f()),()=>g(v),c+1)});throw v}).then(v=>d!==l&&l?l:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),u=v,v)))};return $s({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return u},setup(){const d=Xe;if(u)return()=>bn(u,d);const v=_=>{l=null,gi(_,d,13,!i)};if(a&&d.suspense||yi)return h().then(_=>()=>bn(_,d)).catch(_=>(v(_),()=>i?Ye(i,{error:_}):null));const p=_e(!1),g=_e(),m=_e(!!n);return n&&setTimeout(()=>{m.value=!1},n),o!=null&&setTimeout(()=>{if(!p.value&&!g.value){const _=new Error(`Async component timed out after ${o}ms.`);v(_),g.value=_}},o),h().then(()=>{p.value=!0,d.parent&&mi(d.parent.vnode)&&(d.parent.effect.dirty=!0,rn(d.parent.update))}).catch(_=>{v(_),g.value=_}),()=>{if(p.value&&u)return bn(u,d);if(g.value&&i)return Ye(i,{error:g.value});if(r&&!m.value)return Ye(r)}}})}function bn(e,t){const{ref:r,props:i,children:n,ce:o}=t.vnode,a=Ye(e,i,n);return a.ref=r,a.ce=o,delete t.vnode.ce,a}function rg(e,t,r={},i,n){if($e.isCE||$e.parent&&Jr($e.parent)&&$e.parent.isCE)return t!=="default"&&(r.name=t),Ye("slot",r,i&&i());let o=e[t];o&&o._c&&(o._d=!1),ii();const a=o&&Ys(o(r)),s=Xi(dt,{key:r.key||a&&a.key||`_${t}`},a||(i?i():[]),a&&e._===1?64:-2);return s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function Ys(e){return e.some(t=>$i(t)?!(t.type===ut||t.type===dt&&!Ys(t.children)):!0)?e:null}const zn=e=>e?gl(e)?ln(e):zn(e.parent):null,Qr=Ne(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>zn(e.parent),$root:e=>zn(e.root),$emit:e=>e.emit,$options:e=>xo(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,rn(e.update)}),$nextTick:e=>e.n||(e.n=Ns.bind(e.proxy)),$watch:e=>of.bind(e)}),Sn=(e,t)=>e!==Fe&&!e.__isScriptSetup&&xe(e,t),Bc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:i,data:n,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return o[t]}else{if(Sn(i,t))return a[t]=1,i[t];if(n!==Fe&&xe(n,t))return a[t]=2,n[t];if((u=e.propsOptions[0])&&xe(u,t))return a[t]=3,o[t];if(r!==Fe&&xe(r,t))return a[t]=4,r[t];Hn&&(a[t]=0)}}const c=Qr[t];let f,h;if(c)return t==="$attrs"&&ct(e.attrs,"get",""),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(r!==Fe&&xe(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,xe(h,t))return h[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:o}=e;return Sn(n,t)?(n[t]=r,!0):i!==Fe&&xe(i,t)?(i[t]=r,!0):xe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:o}},a){let s;return!!r[a]||e!==Fe&&xe(e,a)||Sn(t,a)||(s=o[0])&&xe(s,a)||xe(i,a)||xe(Qr,a)||xe(n.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:xe(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function ig(){return Us().slots}function ng(){return Us().attrs}function Us(){const e=pl();return e.setupContext||(e.setupContext=_l(e))}function la(e){return ne(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let Hn=!0;function Nc(e){const t=xo(e),r=e.proxy,i=e.ctx;Hn=!1,t.beforeCreate&&ua(t.beforeCreate,e,"bc");const{data:n,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:v,activated:p,deactivated:g,beforeDestroy:m,beforeUnmount:_,destroyed:S,unmounted:y,render:w,renderTracked:C,renderTriggered:I,errorCaptured:T,serverPrefetch:x,expose:M,inheritAttrs:D,components:P,directives:H,filters:X}=t;if(u&&Vc(u,i,null),a)for(const oe in a){const ae=a[oe];he(ae)&&(i[oe]=ae.bind(r))}if(n){const oe=n.call(r,r);Pe(oe)&&(e.data=ce(oe))}if(Hn=!0,o)for(const oe in o){const ae=o[oe],De=he(ae)?ae.bind(r,r):he(ae.get)?ae.get.bind(r,r):vt,J=!he(ae)&&he(ae.set)?ae.set.bind(r):vt,we=yl({get:De,set:J});Object.defineProperty(i,oe,{enumerable:!0,configurable:!0,get:()=>we.value,set:$=>we.value=$})}if(s)for(const oe in s)Ks(s[oe],i,r,oe);if(l){const oe=he(l)?l.call(r):l;Reflect.ownKeys(oe).forEach(ae=>{$c(ae,oe[ae])})}c&&ua(c,e,"c");function U(oe,ae){ne(ae)?ae.forEach(De=>oe(De.bind(r))):ae&&oe(ae.bind(r))}if(U(Ac,f),U(So,h),U(Dc,d),U(kc,v),U(af,p),U(sf,g),U(Lc,T),U(Oc,C),U(Rc,I),U(Xs,_),U(wo,y),U(Fc,x),ne(M))if(M.length){const oe=e.exposed||(e.exposed={});M.forEach(ae=>{Object.defineProperty(oe,ae,{get:()=>r[ae],set:De=>r[ae]=De})})}else e.exposed||(e.exposed={});w&&e.render===vt&&(e.render=w),D!=null&&(e.inheritAttrs=D),P&&(e.components=P),H&&(e.directives=H)}function Vc(e,t,r=vt){ne(e)&&(e=jn(e));for(const i in e){const n=e[i];let o;Pe(n)?"default"in n?o=ei(n.from||i,n.default,!0):o=ei(n.from||i):o=ei(n),Ve(o)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):t[i]=o}}function ua(e,t,r){xt(ne(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function Ks(e,t,r,i){const n=i.includes(".")?ol(r,i):()=>r[i];if(Oe(e)){const o=t[e];he(o)&&Oi(n,o)}else if(he(e))Oi(n,e.bind(r));else if(Pe(e))if(ne(e))e.forEach(o=>Ks(o,t,r,i));else{const o=he(e.handler)?e.handler.bind(r):t[e.handler];he(o)&&Oi(n,o,e)}}function xo(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(u=>Hi(l,u,a,!0)),Hi(l,t,a)),Pe(t)&&o.set(t,l),l}function Hi(e,t,r,i=!1){const{mixins:n,extends:o}=t;o&&Hi(e,o,r,!0),n&&n.forEach(a=>Hi(e,a,r,!0));for(const a in t)if(!(i&&a==="expose")){const s=Wc[a]||r&&r[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const Wc={data:ca,props:fa,emits:fa,methods:Gr,computed:Gr,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:Gr,directives:Gr,watch:Hc,provide:ca,inject:zc};function ca(e,t){return t?e?function(){return Ne(he(e)?e.call(this,this):e,he(t)?t.call(this,this):t)}:t:e}function zc(e,t){return Gr(jn(e),jn(t))}function jn(e){if(ne(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function Gr(e,t){return e?Ne(Object.create(null),e,t):t}function fa(e,t){return e?ne(e)&&ne(t)?[...new Set([...e,...t])]:Ne(Object.create(null),la(e),la(t??{})):t}function Hc(e,t){if(!e)return t;if(!t)return e;const r=Ne(Object.create(null),e);for(const i in t)r[i]=at(e[i],t[i]);return r}function Gs(){return{app:null,config:{isNativeTag:Pu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jc=0;function Xc(e,t){return function(i,n=null){he(i)||(i=Ne({},i)),n!=null&&!Pe(n)&&(n=null);const o=Gs(),a=new WeakSet;let s=!1;const l=o.app={_uid:jc++,_component:i,_props:n,_container:null,_context:o,_instance:null,version:Af,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&he(u.install)?(a.add(u),u.install(l,...c)):he(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=Ye(i,n);return h.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),c&&t?t(h,u):e(h,u,f),s=!0,l._container=u,u.__vue_app__=l,ln(h.component)}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l},runWithContext(u){const c=Rr;Rr=l;try{return u()}finally{Rr=c}}};return l}}let Rr=null;function $c(e,t){if(Xe){let r=Xe.provides;const i=Xe.parent&&Xe.parent.provides;i===r&&(r=Xe.provides=Object.create(i)),r[e]=t}}function ei(e,t,r=!1){const i=Xe||$e;if(i||Rr){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Rr._context.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&he(t)?t.call(i&&i.proxy):t}}function Yc(){return!!(Xe||$e||Rr)}const qs={},Zs=()=>Object.create(qs),Js=e=>Object.getPrototypeOf(e)===qs;function Uc(e,t,r,i=!1){const n={},o=Zs();e.propsDefaults=Object.create(null),Qs(e,t,n,o);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);r?e.props=i?n:uc(n):e.type.props?e.props=n:e.props=o,e.attrs=o}function Kc(e,t,r,i){const{props:n,attrs:o,vnode:{patchFlag:a}}=e,s=Ee(n),[l]=e.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(nn(e.emitsOptions,h))continue;const d=t[h];if(l)if(xe(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const v=Bt(h);n[v]=Xn(l,s,v,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{Qs(e,t,n,o)&&(u=!0);let c;for(const f in s)(!t||!xe(t,f)&&((c=Ir(f))===f||!xe(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(n[f]=Xn(l,s,f,void 0,e,!0)):delete n[f]);if(o!==s)for(const f in o)(!t||!xe(t,f))&&(delete o[f],u=!0)}u&&Ht(e.attrs,"set","")}function Qs(e,t,r,i){const[n,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(Zr(l))continue;const u=t[l];let c;n&&xe(n,c=Bt(l))?!o||!o.includes(c)?r[c]=u:(s||(s={}))[c]=u:nn(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,a=!0)}if(o){const l=Ee(r),u=s||Fe;for(let c=0;c<o.length;c++){const f=o[c];r[f]=Xn(n,l,f,u[f],e,!xe(u,f))}}return a}function Xn(e,t,r,i,n,o){const a=e[r];if(a!=null){const s=xe(a,"default");if(s&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&he(l)){const{propsDefaults:u}=n;if(r in u)i=u[r];else{const c=_i(n);i=u[r]=l.call(null,t),c()}}else i=l}a[0]&&(o&&!s?i=!1:a[1]&&(i===""||i===Ir(r))&&(i=!0))}return i}function el(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const o=e.props,a={},s=[];let l=!1;if(!he(e)){const c=f=>{l=!0;const[h,d]=el(f,t,!0);Ne(a,h),d&&s.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return Pe(e)&&i.set(e,Dr),Dr;if(ne(o))for(let c=0;c<o.length;c++){const f=Bt(o[c]);ha(f)&&(a[f]=Fe)}else if(o)for(const c in o){const f=Bt(c);if(ha(f)){const h=o[c],d=a[f]=ne(h)||he(h)?{type:h}:Ne({},h);if(d){const v=pa(Boolean,d.type),p=pa(String,d.type);d[0]=v>-1,d[1]=p<0||v<p,(v>-1||xe(d,"default"))&&s.push(f)}}}const u=[a,s];return Pe(e)&&i.set(e,u),u}function ha(e){return e[0]!=="$"&&!Zr(e)}function da(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function va(e,t){return da(e)===da(t)}function pa(e,t){return ne(t)?t.findIndex(r=>va(r,e)):he(t)&&va(t,e)?0:-1}const tl=e=>e[0]==="_"||e==="$stable",Co=e=>ne(e)?e.map(Ft):[Ft(e)],Gc=(e,t,r)=>{if(t._n)return t;const i=wc((...n)=>Co(t(...n)),r);return i._c=!1,i},rl=(e,t,r)=>{const i=e._ctx;for(const n in e){if(tl(n))continue;const o=e[n];if(he(o))t[n]=Gc(n,o,i);else if(o!=null){const a=Co(o);t[n]=()=>a}}},il=(e,t)=>{const r=Co(t);e.slots.default=()=>r},qc=(e,t)=>{const r=e.slots=Zs();if(e.vnode.shapeFlag&32){const i=t._;i?(Ne(r,t),fs(r,"_",i,!0)):rl(t,r)}else t&&il(e,t)},Zc=(e,t,r)=>{const{vnode:i,slots:n}=e;let o=!0,a=Fe;if(i.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(Ne(n,t),!r&&s===1&&delete n._):(o=!t.$stable,rl(t,n)),a=t}else t&&(il(e,t),a={default:1});if(o)for(const s in n)!tl(s)&&a[s]==null&&delete n[s]};function $n(e,t,r,i,n=!1){if(ne(e)){e.forEach((h,d)=>$n(h,t&&(ne(t)?t[d]:t),r,i,n));return}if(Jr(i)&&!n)return;const o=i.shapeFlag&4?ln(i.component):i.el,a=n?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Fe?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(Oe(u)?(c[u]=null,xe(f,u)&&(f[u]=null)):Ve(u)&&(u.value=null)),he(l))nr(l,s,12,[a,c]);else{const h=Oe(l),d=Ve(l);if(h||d){const v=()=>{if(e.f){const p=h?xe(f,l)?f[l]:c[l]:l.value;n?ne(p)&&oo(p,o):ne(p)?p.includes(o)||p.push(o):h?(c[l]=[o],xe(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,xe(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(v.id=-1,lt(v,r)):v()}}}const lt=Mc;function Jc(e){return Qc(e)}function Qc(e,t){const r=hs();r.__VUE__=!0;const{insert:i,remove:n,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=vt,insertStaticContent:v}=e,p=(b,E,k,O=null,B=null,j=null,Y=void 0,V=null,z=!!E.dynamicChildren)=>{if(b===E)return;b&&!_r(b,E)&&(O=We(b),$(b,B,j,!0),b=null),E.patchFlag===-2&&(z=!1,E.dynamicChildren=null);const{type:L,ref:K,shapeFlag:re}=E;switch(L){case sn:g(b,E,k,O);break;case ut:m(b,E,k,O);break;case Li:b==null&&_(E,k,O,Y);break;case dt:P(b,E,k,O,B,j,Y,V,z);break;default:re&1?w(b,E,k,O,B,j,Y,V,z):re&6?H(b,E,k,O,B,j,Y,V,z):(re&64||re&128)&&L.process(b,E,k,O,B,j,Y,V,z,et)}K!=null&&B&&$n(K,b&&b.ref,j,E||b,!E)},g=(b,E,k,O)=>{if(b==null)i(E.el=s(E.children),k,O);else{const B=E.el=b.el;E.children!==b.children&&u(B,E.children)}},m=(b,E,k,O)=>{b==null?i(E.el=l(E.children||""),k,O):E.el=b.el},_=(b,E,k,O)=>{[b.el,b.anchor]=v(b.children,E,k,O,b.el,b.anchor)},S=({el:b,anchor:E},k,O)=>{let B;for(;b&&b!==E;)B=h(b),i(b,k,O),b=B;i(E,k,O)},y=({el:b,anchor:E})=>{let k;for(;b&&b!==E;)k=h(b),n(b),b=k;n(E)},w=(b,E,k,O,B,j,Y,V,z)=>{E.type==="svg"?Y="svg":E.type==="math"&&(Y="mathml"),b==null?C(E,k,O,B,j,Y,V,z):x(b,E,B,j,Y,V,z)},C=(b,E,k,O,B,j,Y,V)=>{let z,L;const{props:K,shapeFlag:re,transition:Q,dirs:se}=b;if(z=b.el=a(b.type,j,K&&K.is,K),re&8?c(z,b.children):re&16&&T(b.children,z,null,O,B,wn(b,j),Y,V),se&&hr(b,null,O,"created"),I(z,b,b.scopeId,Y,O),K){for(const ge in K)ge!=="value"&&!Zr(ge)&&o(z,ge,null,K[ge],j,b.children,O,B,Se);"value"in K&&o(z,"value",null,K.value,j),(L=K.onVnodeBeforeMount)&&Dt(L,O,b)}se&&hr(b,null,O,"beforeMount");const de=ef(B,Q);de&&Q.beforeEnter(z),i(z,E,k),((L=K&&K.onVnodeMounted)||de||se)&&lt(()=>{L&&Dt(L,O,b),de&&Q.enter(z),se&&hr(b,null,O,"mounted")},B)},I=(b,E,k,O,B)=>{if(k&&d(b,k),O)for(let j=0;j<O.length;j++)d(b,O[j]);if(B){let j=B.subTree;if(E===j){const Y=B.vnode;I(b,Y,Y.scopeId,Y.slotScopeIds,B.parent)}}},T=(b,E,k,O,B,j,Y,V,z=0)=>{for(let L=z;L<b.length;L++){const K=b[L]=V?Qt(b[L]):Ft(b[L]);p(null,K,E,k,O,B,j,Y,V)}},x=(b,E,k,O,B,j,Y)=>{const V=E.el=b.el;let{patchFlag:z,dynamicChildren:L,dirs:K}=E;z|=b.patchFlag&16;const re=b.props||Fe,Q=E.props||Fe;let se;if(k&&dr(k,!1),(se=Q.onVnodeBeforeUpdate)&&Dt(se,k,E,b),K&&hr(E,b,k,"beforeUpdate"),k&&dr(k,!0),L?M(b.dynamicChildren,L,V,k,O,wn(E,B),j):Y||ae(b,E,V,null,k,O,wn(E,B),j,!1),z>0){if(z&16)D(V,E,re,Q,k,O,B);else if(z&2&&re.class!==Q.class&&o(V,"class",null,Q.class,B),z&4&&o(V,"style",re.style,Q.style,B),z&8){const de=E.dynamicProps;for(let ge=0;ge<de.length;ge++){const be=de[ge],ke=re[be],Ze=Q[be];(Ze!==ke||be==="value")&&o(V,be,ke,Ze,B,b.children,k,O,Se)}}z&1&&b.children!==E.children&&c(V,E.children)}else!Y&&L==null&&D(V,E,re,Q,k,O,B);((se=Q.onVnodeUpdated)||K)&&lt(()=>{se&&Dt(se,k,E,b),K&&hr(E,b,k,"updated")},O)},M=(b,E,k,O,B,j,Y)=>{for(let V=0;V<E.length;V++){const z=b[V],L=E[V],K=z.el&&(z.type===dt||!_r(z,L)||z.shapeFlag&70)?f(z.el):k;p(z,L,K,null,O,B,j,Y,!0)}},D=(b,E,k,O,B,j,Y)=>{if(k!==O){if(k!==Fe)for(const V in k)!Zr(V)&&!(V in O)&&o(b,V,k[V],null,Y,E.children,B,j,Se);for(const V in O){if(Zr(V))continue;const z=O[V],L=k[V];z!==L&&V!=="value"&&o(b,V,L,z,Y,E.children,B,j,Se)}"value"in O&&o(b,"value",k.value,O.value,Y)}},P=(b,E,k,O,B,j,Y,V,z)=>{const L=E.el=b?b.el:s(""),K=E.anchor=b?b.anchor:s("");let{patchFlag:re,dynamicChildren:Q,slotScopeIds:se}=E;se&&(V=V?V.concat(se):se),b==null?(i(L,k,O),i(K,k,O),T(E.children||[],k,K,B,j,Y,V,z)):re>0&&re&64&&Q&&b.dynamicChildren?(M(b.dynamicChildren,Q,k,B,j,Y,V),(E.key!=null||B&&E===B.subTree)&&Eo(b,E,!0)):ae(b,E,k,K,B,j,Y,V,z)},H=(b,E,k,O,B,j,Y,V,z)=>{E.slotScopeIds=V,b==null?E.shapeFlag&512?B.ctx.activate(E,k,O,Y,z):X(E,k,O,B,j,Y,z):G(b,E,z)},X=(b,E,k,O,B,j,Y)=>{const V=b.component=xf(b,O,B);if(mi(b)&&(V.ctx.renderer=et),Cf(V),V.asyncDep){if(B&&B.registerDep(V,U,Y),!b.el){const z=V.subTree=Ye(ut);m(null,z,E,k)}}else U(V,b,E,k,B,j,Y)},G=(b,E,k)=>{const O=E.component=b.component;if(Ec(b,E,k))if(O.asyncDep&&!O.asyncResolved){oe(O,E,k);return}else O.next=E,_c(O.update),O.effect.dirty=!0,O.update();else E.el=b.el,O.vnode=E},U=(b,E,k,O,B,j,Y)=>{const V=()=>{if(b.isMounted){let{next:K,bu:re,u:Q,parent:se,vnode:de}=b;{const Pt=nl(b);if(Pt){K&&(K.el=de.el,oe(b,K,Y)),Pt.asyncDep.then(()=>{b.isUnmounted||V()});return}}let ge=K,be;dr(b,!1),K?(K.el=de.el,oe(b,K,Y)):K=de,re&&Fi(re),(be=K.props&&K.props.onVnodeBeforeUpdate)&&Dt(be,se,K,de),dr(b,!0);const ke=yn(b),Ze=b.subTree;b.subTree=ke,p(Ze,ke,f(Ze.el),We(Ze),b,B,j),K.el=ke.el,ge===null&&Ic(b,ke.el),Q&&lt(Q,B),(be=K.props&&K.props.onVnodeUpdated)&&lt(()=>Dt(be,se,K,de),B)}else{let K;const{el:re,props:Q}=E,{bm:se,m:de,parent:ge}=b,be=Jr(E);if(dr(b,!1),se&&Fi(se),!be&&(K=Q&&Q.onVnodeBeforeMount)&&Dt(K,ge,E),dr(b,!0),re&&tt){const ke=()=>{b.subTree=yn(b),tt(re,b.subTree,b,B,null)};be?E.type.__asyncLoader().then(()=>!b.isUnmounted&&ke()):ke()}else{const ke=b.subTree=yn(b);p(null,ke,k,O,b,B,j),E.el=ke.el}if(de&&lt(de,B),!be&&(K=Q&&Q.onVnodeMounted)){const ke=E;lt(()=>Dt(K,ge,ke),B)}(E.shapeFlag&256||ge&&Jr(ge.vnode)&&ge.vnode.shapeFlag&256)&&b.a&&lt(b.a,B),b.isMounted=!0,E=k=O=null}},z=b.effect=new uo(V,vt,()=>rn(L),b.scope),L=b.update=()=>{z.dirty&&z.run()};L.id=b.uid,dr(b,!0),L()},oe=(b,E,k)=>{E.component=b;const O=b.vnode.props;b.vnode=E,b.next=null,Kc(b,E.props,O,k),Zc(b,E.children,k),cr(),na(b),Xt()},ae=(b,E,k,O,B,j,Y,V,z=!1)=>{const L=b&&b.children,K=b?b.shapeFlag:0,re=E.children,{patchFlag:Q,shapeFlag:se}=E;if(Q>0){if(Q&128){J(L,re,k,O,B,j,Y,V,z);return}else if(Q&256){De(L,re,k,O,B,j,Y,V,z);return}}se&8?(K&16&&Se(L,B,j),re!==L&&c(k,re)):K&16?se&16?J(L,re,k,O,B,j,Y,V,z):Se(L,B,j,!0):(K&8&&c(k,""),se&16&&T(re,k,O,B,j,Y,V,z))},De=(b,E,k,O,B,j,Y,V,z)=>{b=b||Dr,E=E||Dr;const L=b.length,K=E.length,re=Math.min(L,K);let Q;for(Q=0;Q<re;Q++){const se=E[Q]=z?Qt(E[Q]):Ft(E[Q]);p(b[Q],se,k,null,B,j,Y,V,z)}L>K?Se(b,B,j,!0,!1,re):T(E,k,O,B,j,Y,V,z,re)},J=(b,E,k,O,B,j,Y,V,z)=>{let L=0;const K=E.length;let re=b.length-1,Q=K-1;for(;L<=re&&L<=Q;){const se=b[L],de=E[L]=z?Qt(E[L]):Ft(E[L]);if(_r(se,de))p(se,de,k,null,B,j,Y,V,z);else break;L++}for(;L<=re&&L<=Q;){const se=b[re],de=E[Q]=z?Qt(E[Q]):Ft(E[Q]);if(_r(se,de))p(se,de,k,null,B,j,Y,V,z);else break;re--,Q--}if(L>re){if(L<=Q){const se=Q+1,de=se<K?E[se].el:O;for(;L<=Q;)p(null,E[L]=z?Qt(E[L]):Ft(E[L]),k,de,B,j,Y,V,z),L++}}else if(L>Q)for(;L<=re;)$(b[L],B,j,!0),L++;else{const se=L,de=L,ge=new Map;for(L=de;L<=Q;L++){const Ue=E[L]=z?Qt(E[L]):Ft(E[L]);Ue.key!=null&&ge.set(Ue.key,L)}let be,ke=0;const Ze=Q-de+1;let Pt=!1,fr=0;const Mt=new Array(Ze);for(L=0;L<Ze;L++)Mt[L]=0;for(L=se;L<=re;L++){const Ue=b[L];if(ke>=Ze){$(Ue,B,j,!0);continue}let Le;if(Ue.key!=null)Le=ge.get(Ue.key);else for(be=de;be<=Q;be++)if(Mt[be-de]===0&&_r(Ue,E[be])){Le=be;break}Le===void 0?$(Ue,B,j,!0):(Mt[Le-de]=L+1,Le>=fr?fr=Le:Pt=!0,p(Ue,E[Le],k,null,B,j,Y,V,z),ke++)}const rt=Pt?tf(Mt):Dr;for(be=rt.length-1,L=Ze-1;L>=0;L--){const Ue=de+L,Le=E[Ue],Pr=Ue+1<K?E[Ue+1].el:O;Mt[L]===0?p(null,Le,k,Pr,B,j,Y,V,z):Pt&&(be<0||L!==rt[be]?we(Le,k,Pr,2):be--)}}},we=(b,E,k,O,B=null)=>{const{el:j,type:Y,transition:V,children:z,shapeFlag:L}=b;if(L&6){we(b.component.subTree,E,k,O);return}if(L&128){b.suspense.move(E,k,O);return}if(L&64){Y.move(b,E,k,et);return}if(Y===dt){i(j,E,k);for(let re=0;re<z.length;re++)we(z[re],E,k,O);i(b.anchor,E,k);return}if(Y===Li){S(b,E,k);return}if(O!==2&&L&1&&V)if(O===0)V.beforeEnter(j),i(j,E,k),lt(()=>V.enter(j),B);else{const{leave:re,delayLeave:Q,afterLeave:se}=V,de=()=>i(j,E,k),ge=()=>{re(j,()=>{de(),se&&se()})};Q?Q(j,de,ge):ge()}else i(j,E,k)},$=(b,E,k,O=!1,B=!1)=>{const{type:j,props:Y,ref:V,children:z,dynamicChildren:L,shapeFlag:K,patchFlag:re,dirs:Q,memoIndex:se}=b;if(re===-2&&(B=!1),V!=null&&$n(V,null,k,b,!0),se!=null&&(E.renderCache[se]=void 0),K&256){E.ctx.deactivate(b);return}const de=K&1&&Q,ge=!Jr(b);let be;if(ge&&(be=Y&&Y.onVnodeBeforeUnmount)&&Dt(be,E,b),K&6)Me(b.component,k,O);else{if(K&128){b.suspense.unmount(k,O);return}de&&hr(b,null,E,"beforeUnmount"),K&64?b.type.remove(b,E,k,et,O):L&&(j!==dt||re>0&&re&64)?Se(L,E,k,!1,!0):(j===dt&&re&384||!B&&K&16)&&Se(z,E,k),O&&ue(b)}(ge&&(be=Y&&Y.onVnodeUnmounted)||de)&&lt(()=>{be&&Dt(be,E,b),de&&hr(b,null,E,"unmounted")},k)},ue=b=>{const{type:E,el:k,anchor:O,transition:B}=b;if(E===dt){ye(k,O);return}if(E===Li){y(b);return}const j=()=>{n(k),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(b.shapeFlag&1&&B&&!B.persisted){const{leave:Y,delayLeave:V}=B,z=()=>Y(k,j);V?V(b.el,j,z):z()}else j()},ye=(b,E)=>{let k;for(;b!==E;)k=h(b),n(b),b=k;n(E)},Me=(b,E,k)=>{const{bum:O,scope:B,update:j,subTree:Y,um:V,m:z,a:L}=b;ga(z),ga(L),O&&Fi(O),B.stop(),j&&(j.active=!1,$(Y,b,E,k)),V&&lt(V,E),lt(()=>{b.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},Se=(b,E,k,O=!1,B=!1,j=0)=>{for(let Y=j;Y<b.length;Y++)$(b[Y],E,k,O,B)},We=b=>b.shapeFlag&6?We(b.component.subTree):b.shapeFlag&128?b.suspense.next():h(b.anchor||b.el);let ze=!1;const st=(b,E,k)=>{b==null?E._vnode&&$(E._vnode,null,null,!0):p(E._vnode||null,b,E,null,null,null,k),ze||(ze=!0,na(),Ws(),ze=!1),E._vnode=b},et={p,um:$,m:we,r:ue,mt:X,mc:T,pc:ae,pbc:M,n:We,o:e};let mt,tt;return{render:st,hydrate:mt,createApp:Xc(st,mt)}}function wn({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function dr({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function ef(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Eo(e,t,r=!1){const i=e.children,n=t.children;if(ne(i)&&ne(n))for(let o=0;o<i.length;o++){const a=i[o];let s=n[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=n[o]=Qt(n[o]),s.el=a.el),!r&&s.patchFlag!==-2&&Eo(a,s)),s.type===sn&&(s.el=a.el)}}function tf(e){const t=e.slice(),r=[0];let i,n,o,a,s;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(n=r[r.length-1],e[n]<u){t[i]=n,r.push(i);continue}for(o=0,a=r.length-1;o<a;)s=o+a>>1,e[r[s]]<u?o=s+1:a=s;u<e[r[o]]&&(o>0&&(t[i]=r[o-1]),r[o]=i)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}function nl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:nl(t)}function ga(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const rf=Symbol.for("v-scx"),nf=()=>ei(rf);function og(e,t){return Io(e,null,t)}const Ii={};function Oi(e,t,r){return Io(e,t,r)}function Io(e,t,{immediate:r,deep:i,flush:n,once:o,onTrack:a,onTrigger:s}=Fe){if(t&&o){const C=t;t=(...I)=>{C(...I),w()}}const l=Xe,u=C=>i===!0?C:er(C,i===!1?1:void 0);let c,f=!1,h=!1;if(Ve(e)?(c=()=>e.value,f=Wi(e)):wr(e)?(c=()=>u(e),f=!0):ne(e)?(h=!0,f=e.some(C=>wr(C)||Wi(C)),c=()=>e.map(C=>{if(Ve(C))return C.value;if(wr(C))return u(C);if(he(C))return nr(C,l,2)})):he(e)?t?c=()=>nr(e,l,2):c=()=>(d&&d(),xt(e,l,3,[v])):c=vt,t&&i){const C=c;c=()=>er(C())}let d,v=C=>{d=S.onStop=()=>{nr(C,l,4),d=S.onStop=void 0}},p;if(yi)if(v=vt,t?r&&xt(t,l,3,[c(),h?[]:void 0,v]):c(),n==="sync"){const C=nf();p=C.__watcherHandles||(C.__watcherHandles=[])}else return vt;let g=h?new Array(e.length).fill(Ii):Ii;const m=()=>{if(!(!S.active||!S.dirty))if(t){const C=S.run();(i||f||(h?C.some((I,T)=>sr(I,g[T])):sr(C,g)))&&(d&&d(),xt(t,l,3,[C,g===Ii?void 0:h&&g[0]===Ii?[]:g,v]),g=C)}else S.run()};m.allowRecurse=!!t;let _;n==="sync"?_=m:n==="post"?_=()=>lt(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),_=()=>rn(m));const S=new uo(c,vt,_),y=_s(),w=()=>{S.stop(),y&&oo(y.effects,S)};return t?r?m():g=S.run():n==="post"?lt(S.run.bind(S),l&&l.suspense):S.run(),p&&p.push(w),w}function of(e,t,r){const i=this.proxy,n=Oe(e)?e.includes(".")?ol(i,e):()=>i[e]:e.bind(i,i);let o;he(t)?o=t:(o=t.handler,r=t);const a=_i(this),s=Io(n,o.bind(i),r);return a(),s}function ol(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function er(e,t=1/0,r){if(t<=0||!Pe(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,Ve(e))er(e.value,t,r);else if(ne(e))for(let i=0;i<e.length;i++)er(e[i],t,r);else if(Ji(e)||kr(e))e.forEach(i=>{er(i,t,r)});else if(cs(e)){for(const i in e)er(e[i],t,r);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&er(e[i],t,r)}return e}const mi=e=>e.type.__isKeepAlive;function af(e,t){al(e,"a",t)}function sf(e,t){al(e,"da",t)}function al(e,t,r=Xe){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(an(t,i,r),r){let n=r.parent;for(;n&&n.parent;)mi(n.parent.vnode)&&lf(i,t,r,n),n=n.parent}}function lf(e,t,r,i){const n=an(t,e,i,!0);wo(()=>{oo(i[t],n)},r)}const Jt=Symbol("_leaveCb"),Ti=Symbol("_enterCb");function uf(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return So(()=>{e.isMounted=!0}),Xs(()=>{e.isUnmounting=!0}),e}const yt=[Function,Array],sl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:yt,onEnter:yt,onAfterEnter:yt,onEnterCancelled:yt,onBeforeLeave:yt,onLeave:yt,onAfterLeave:yt,onLeaveCancelled:yt,onBeforeAppear:yt,onAppear:yt,onAfterAppear:yt,onAppearCancelled:yt},ll=e=>{const t=e.subTree;return t.component?ll(t.component):t},cf={name:"BaseTransition",props:sl,setup(e,{slots:t}){const r=pl(),i=uf();return()=>{const n=t.default&&cl(t.default(),!0);if(!n||!n.length)return;let o=n[0];if(n.length>1){for(const h of n)if(h.type!==ut){o=h;break}}const a=Ee(e),{mode:s}=a;if(i.isLeaving)return xn(o);const l=ma(o);if(!l)return xn(o);let u=Yn(l,a,i,r,h=>u=h);ji(l,u);const c=r.subTree,f=c&&ma(c);if(f&&f.type!==ut&&!_r(l,f)&&ll(r).type!==ut){const h=Yn(f,a,i,r);if(ji(f,h),s==="out-in"&&l.type!==ut)return i.isLeaving=!0,h.afterLeave=()=>{i.isLeaving=!1,r.update.active!==!1&&(r.effect.dirty=!0,r.update())},xn(o);s==="in-out"&&l.type!==ut&&(h.delayLeave=(d,v,p)=>{const g=ul(i,f);g[String(f.key)]=f,d[Jt]=()=>{v(),d[Jt]=void 0,delete u.delayedLeave},u.delayedLeave=p})}return o}}},ff=cf;function ul(e,t){const{leavingVNodes:r}=e;let i=r.get(t.type);return i||(i=Object.create(null),r.set(t.type,i)),i}function Yn(e,t,r,i,n){const{appear:o,mode:a,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:f,onBeforeLeave:h,onLeave:d,onAfterLeave:v,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:_,onAppearCancelled:S}=t,y=String(e.key),w=ul(r,e),C=(x,M)=>{x&&xt(x,i,9,M)},I=(x,M)=>{const D=M[1];C(x,M),ne(x)?x.every(P=>P.length<=1)&&D():x.length<=1&&D()},T={mode:a,persisted:s,beforeEnter(x){let M=l;if(!r.isMounted)if(o)M=g||l;else return;x[Jt]&&x[Jt](!0);const D=w[y];D&&_r(e,D)&&D.el[Jt]&&D.el[Jt](),C(M,[x])},enter(x){let M=u,D=c,P=f;if(!r.isMounted)if(o)M=m||u,D=_||c,P=S||f;else return;let H=!1;const X=x[Ti]=G=>{H||(H=!0,G?C(P,[x]):C(D,[x]),T.delayedLeave&&T.delayedLeave(),x[Ti]=void 0)};M?I(M,[x,X]):X()},leave(x,M){const D=String(e.key);if(x[Ti]&&x[Ti](!0),r.isUnmounting)return M();C(h,[x]);let P=!1;const H=x[Jt]=X=>{P||(P=!0,M(),X?C(p,[x]):C(v,[x]),x[Jt]=void 0,w[D]===e&&delete w[D])};w[D]=e,d?I(d,[x,H]):H()},clone(x){const M=Yn(x,t,r,i,n);return n&&n(M),M}};return T}function xn(e){if(mi(e))return e=lr(e),e.children=null,e}function ma(e){if(!mi(e))return e;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&he(r.default))return r.default()}}function ji(e,t){e.shapeFlag&6&&e.component?ji(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function cl(e,t=!1,r){let i=[],n=0;for(let o=0;o<e.length;o++){let a=e[o];const s=r==null?a.key:String(r)+String(a.key!=null?a.key:o);a.type===dt?(a.patchFlag&128&&n++,i=i.concat(cl(a.children,t,s))):(t||a.type!==ut)&&i.push(s!=null?lr(a,{key:s}):a)}if(n>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}const hf=e=>e.__isTeleport,ti=e=>e&&(e.disabled||e.disabled===""),_a=e=>typeof SVGElement<"u"&&e instanceof SVGElement,ya=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Un=(e,t)=>{const r=e&&e.to;return Oe(r)?t?t(r):null:r},df={name:"Teleport",__isTeleport:!0,process(e,t,r,i,n,o,a,s,l,u){const{mc:c,pc:f,pbc:h,o:{insert:d,querySelector:v,createText:p,createComment:g}}=u,m=ti(t.props);let{shapeFlag:_,children:S,dynamicChildren:y}=t;if(e==null){const w=t.el=p(""),C=t.anchor=p("");d(w,r,i),d(C,r,i);const I=t.target=Un(t.props,v),T=t.targetAnchor=p("");I&&(d(T,I),a==="svg"||_a(I)?a="svg":(a==="mathml"||ya(I))&&(a="mathml"));const x=(M,D)=>{_&16&&c(S,M,D,n,o,a,s,l)};m?x(r,C):I&&x(I,T)}else{t.el=e.el;const w=t.anchor=e.anchor,C=t.target=e.target,I=t.targetAnchor=e.targetAnchor,T=ti(e.props),x=T?r:C,M=T?w:I;if(a==="svg"||_a(C)?a="svg":(a==="mathml"||ya(C))&&(a="mathml"),y?(h(e.dynamicChildren,y,x,n,o,a,s),Eo(e,t,!0)):l||f(e,t,x,M,n,o,a,s,!1),m)T?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Pi(t,r,w,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const D=t.target=Un(t.props,v);D&&Pi(t,D,null,u,0)}else T&&Pi(t,C,I,u,1)}fl(t)},remove(e,t,r,{um:i,o:{remove:n}},o){const{shapeFlag:a,children:s,anchor:l,targetAnchor:u,target:c,props:f}=e;if(c&&n(u),o&&n(l),a&16){const h=o||!ti(f);for(let d=0;d<s.length;d++){const v=s[d];i(v,t,r,h,!!v.dynamicChildren)}}},move:Pi,hydrate:vf};function Pi(e,t,r,{o:{insert:i},m:n},o=2){o===0&&i(e.targetAnchor,t,r);const{el:a,anchor:s,shapeFlag:l,children:u,props:c}=e,f=o===2;if(f&&i(a,t,r),(!f||ti(c))&&l&16)for(let h=0;h<u.length;h++)n(u[h],t,r,2);f&&i(s,t,r)}function vf(e,t,r,i,n,o,{o:{nextSibling:a,parentNode:s,querySelector:l}},u){const c=t.target=Un(t.props,l);if(c){const f=c._lpa||c.firstChild;if(t.shapeFlag&16)if(ti(t.props))t.anchor=u(a(e),t,s(e),r,i,n,o),t.targetAnchor=f;else{t.anchor=a(e);let h=f;for(;h;)if(h=a(h),h&&h.nodeType===8&&h.data==="teleport anchor"){t.targetAnchor=h,c._lpa=t.targetAnchor&&a(t.targetAnchor);break}u(f,t,c,r,i,n,o)}fl(t)}return t.anchor&&a(t.anchor)}const ag=df;function fl(e){const t=e.ctx;if(t&&t.ut){let r=e.children[0].el;for(;r&&r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}const dt=Symbol.for("v-fgt"),sn=Symbol.for("v-txt"),ut=Symbol.for("v-cmt"),Li=Symbol.for("v-stc"),ri=[];let It=null;function ii(e=!1){ri.push(It=e?null:[])}function pf(){ri.pop(),It=ri[ri.length-1]||null}let fi=1;function ba(e){fi+=e}function hl(e){return e.dynamicChildren=fi>0?It||Dr:null,pf(),fi>0&&It&&It.push(e),e}function gf(e,t,r,i,n,o){return hl(vl(e,t,r,i,n,o,!0))}function Xi(e,t,r,i,n){return hl(Ye(e,t,r,i,n,!0))}function $i(e){return e?e.__v_isVNode===!0:!1}function _r(e,t){return e.type===t.type&&e.key===t.key}const dl=({key:e})=>e??null,Bi=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Oe(e)||Ve(e)||he(e)?{i:$e,r:e,k:t,f:!!r}:e:null);function vl(e,t=null,r=null,i=0,n=null,o=e===dt?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&dl(t),ref:t&&Bi(t),scopeId:on,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:$e};return s?(To(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=Oe(r)?8:16),fi>0&&!a&&It&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&It.push(l),l}const Ye=mf;function mf(e,t=null,r=null,i=0,n=null,o=!1){if((!e||e===js)&&(e=ut),$i(e)){const s=lr(e,t,!0);return r&&To(s,r),fi>0&&!o&&It&&(s.shapeFlag&6?It[It.indexOf(e)]=s:It.push(s)),s.patchFlag=-2,s}if(Pf(e)&&(e=e.__vccOpts),t){t=_f(t);let{class:s,style:l}=t;s&&!Oe(s)&&(t.class=lo(s)),Pe(l)&&(Ds(l)&&!ne(l)&&(l=Ne({},l)),t.style=so(l))}const a=Oe(e)?1:Pc(e)?128:hf(e)?64:Pe(e)?4:he(e)?2:0;return vl(e,t,r,i,n,a,o,!0)}function _f(e){return e?Ds(e)||Js(e)?Ne({},e):e:null}function lr(e,t,r=!1,i=!1){const{props:n,ref:o,patchFlag:a,children:s,transition:l}=e,u=t?bf(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&dl(u),ref:t&&t.ref?r&&o?ne(o)?o.concat(Bi(t)):[o,Bi(t)]:Bi(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==dt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&lr(e.ssContent),ssFallback:e.ssFallback&&lr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&ji(c,l.clone(c)),c}function yf(e=" ",t=0){return Ye(sn,null,e,t)}function sg(e,t){const r=Ye(Li,null,e);return r.staticCount=t,r}function Sa(e="",t=!1){return t?(ii(),Xi(ut,null,e)):Ye(ut,null,e)}function Ft(e){return e==null||typeof e=="boolean"?Ye(ut):ne(e)?Ye(dt,null,e.slice()):typeof e=="object"?Qt(e):Ye(sn,null,String(e))}function Qt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:lr(e)}function To(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(ne(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),To(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!Js(t)?t._ctx=$e:n===3&&$e&&($e.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else he(t)?(t={default:t,_ctx:$e},r=32):(t=String(t),i&64?(r=16,t=[yf(t)]):r=8);e.children=t,e.shapeFlag|=r}function bf(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=lo([t.class,i.class]));else if(n==="style")t.style=so([t.style,i.style]);else if(Zi(n)){const o=t[n],a=i[n];a&&o!==a&&!(ne(o)&&o.includes(a))&&(t[n]=o?[].concat(o,a):a)}else n!==""&&(t[n]=i[n])}return t}function Dt(e,t,r,i=null){xt(e,t,7,[r,i])}const Sf=Gs();let wf=0;function xf(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||Sf,o={uid:wf++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new gs(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:el(i,n),emitsOptions:Hs(i,n),emit:null,emitted:null,propsDefaults:Fe,inheritAttrs:i.inheritAttrs,ctx:Fe,data:Fe,props:Fe,attrs:Fe,slots:Fe,refs:Fe,setupState:Fe,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Sc.bind(null,o),e.ce&&e.ce(o),o}let Xe=null;const pl=()=>Xe||$e;let Yi,Kn;{const e=hs(),t=(r,i)=>{let n;return(n=e[r])||(n=e[r]=[]),n.push(i),o=>{n.length>1?n.forEach(a=>a(o)):n[0](o)}};Yi=t("__VUE_INSTANCE_SETTERS__",r=>Xe=r),Kn=t("__VUE_SSR_SETTERS__",r=>yi=r)}const _i=e=>{const t=Xe;return Yi(e),e.scope.on(),()=>{e.scope.off(),Yi(t)}},wa=()=>{Xe&&Xe.scope.off(),Yi(null)};function gl(e){return e.vnode.shapeFlag&4}let yi=!1;function Cf(e,t=!1){t&&Kn(t);const{props:r,children:i}=e.vnode,n=gl(e);Uc(e,r,n,t),qc(e,i);const o=n?Ef(e,t):void 0;return t&&Kn(!1),o}function Ef(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Bc);const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?_l(e):null,o=_i(e);cr();const a=nr(i,e,0,[e.props,n]);if(Xt(),o(),ls(a)){if(a.then(wa,wa),t)return a.then(s=>{xa(e,s,t)}).catch(s=>{gi(s,e,0)});e.asyncDep=a}else xa(e,a,t)}else ml(e,t)}function xa(e,t,r){he(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pe(t)&&(e.setupState=Os(t)),ml(e,r)}let Ca;function ml(e,t,r){const i=e.type;if(!e.render){if(!t&&Ca&&!i.render){const n=i.template||xo(e).template;if(n){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=i,u=Ne(Ne({isCustomElement:o,delimiters:s},a),l);i.render=Ca(n,u)}}e.render=i.render||vt}{const n=_i(e);cr();try{Nc(e)}finally{Xt(),n()}}}const If={get(e,t){return ct(e,"get",""),e[t]}};function _l(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,If),slots:e.slots,emit:e.emit,expose:t}}function ln(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Os(go(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Qr)return Qr[r](e)},has(t,r){return r in t||r in Qr}})):e.proxy}function Tf(e,t=!0){return he(e)?e.displayName||e.name:e.name||t&&e.__name}function Pf(e){return he(e)&&"__vccOpts"in e}const yl=(e,t)=>cc(e,t,yi);function Mf(e,t,r){const i=arguments.length;return i===2?Pe(t)&&!ne(t)?$i(t)?Ye(e,null,[t]):Ye(e,t):Ye(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&$i(r)&&(r=[r]),Ye(e,t,r))}const Af="3.4.30",lg=vt;/**
* @vue/runtime-dom v3.4.30
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Df="http://www.w3.org/2000/svg",kf="http://www.w3.org/1998/Math/MathML",zt=typeof document<"u"?document:null,Ea=zt&&zt.createElement("template"),Ff={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t==="svg"?zt.createElementNS(Df,e):t==="mathml"?zt.createElementNS(kf,e):r?zt.createElement(e,{is:r}):zt.createElement(e);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>zt.createTextNode(e),createComment:e=>zt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>zt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,n,o){const a=r?r.previousSibling:t.lastChild;if(n&&(n===o||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===o||!(n=n.nextSibling)););else{Ea.innerHTML=i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e;const s=Ea.content;if(i==="svg"||i==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},Kt="transition",Xr="animation",hi=Symbol("_vtc"),bl=(e,{slots:t})=>Mf(ff,Rf(e),t);bl.displayName="Transition";const Sl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};bl.props=Ne({},sl,Sl);const vr=(e,t=[])=>{ne(e)?e.forEach(r=>r(...t)):e&&e(...t)},Ia=e=>e?ne(e)?e.some(t=>t.length>1):e.length>1:!1;function Rf(e){const t={};for(const P in e)P in Sl||(t[P]=e[P]);if(e.css===!1)return t;const{name:r="v",type:i,duration:n,enterFromClass:o=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:s=`${r}-enter-to`,appearFromClass:l=o,appearActiveClass:u=a,appearToClass:c=s,leaveFromClass:f=`${r}-leave-from`,leaveActiveClass:h=`${r}-leave-active`,leaveToClass:d=`${r}-leave-to`}=e,v=Of(n),p=v&&v[0],g=v&&v[1],{onBeforeEnter:m,onEnter:_,onEnterCancelled:S,onLeave:y,onLeaveCancelled:w,onBeforeAppear:C=m,onAppear:I=_,onAppearCancelled:T=S}=t,x=(P,H,X)=>{pr(P,H?c:s),pr(P,H?u:a),X&&X()},M=(P,H)=>{P._isLeaving=!1,pr(P,f),pr(P,d),pr(P,h),H&&H()},D=P=>(H,X)=>{const G=P?I:_,U=()=>x(H,P,X);vr(G,[H,U]),Ta(()=>{pr(H,P?l:o),Gt(H,P?c:s),Ia(G)||Pa(H,i,p,U)})};return Ne(t,{onBeforeEnter(P){vr(m,[P]),Gt(P,o),Gt(P,a)},onBeforeAppear(P){vr(C,[P]),Gt(P,l),Gt(P,u)},onEnter:D(!1),onAppear:D(!0),onLeave(P,H){P._isLeaving=!0;const X=()=>M(P,H);Gt(P,f),Gt(P,h),Nf(),Ta(()=>{P._isLeaving&&(pr(P,f),Gt(P,d),Ia(y)||Pa(P,i,g,X))}),vr(y,[P,X])},onEnterCancelled(P){x(P,!1),vr(S,[P])},onAppearCancelled(P){x(P,!0),vr(T,[P])},onLeaveCancelled(P){M(P),vr(w,[P])}})}function Of(e){if(e==null)return null;if(Pe(e))return[Cn(e.enter),Cn(e.leave)];{const t=Cn(e);return[t,t]}}function Cn(e){return Fu(e)}function Gt(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[hi]||(e[hi]=new Set)).add(t)}function pr(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const r=e[hi];r&&(r.delete(t),r.size||(e[hi]=void 0))}function Ta(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Lf=0;function Pa(e,t,r,i){const n=e._endId=++Lf,o=()=>{n===e._endId&&i()};if(r)return setTimeout(o,r);const{type:a,timeout:s,propCount:l}=Bf(e,t);if(!a)return i();const u=a+"end";let c=0;const f=()=>{e.removeEventListener(u,h),o()},h=d=>{d.target===e&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},s+1),e.addEventListener(u,h)}function Bf(e,t){const r=window.getComputedStyle(e),i=v=>(r[v]||"").split(", "),n=i(`${Kt}Delay`),o=i(`${Kt}Duration`),a=Ma(n,o),s=i(`${Xr}Delay`),l=i(`${Xr}Duration`),u=Ma(s,l);let c=null,f=0,h=0;t===Kt?a>0&&(c=Kt,f=a,h=o.length):t===Xr?u>0&&(c=Xr,f=u,h=l.length):(f=Math.max(a,u),c=f>0?a>u?Kt:Xr:null,h=c?c===Kt?o.length:l.length:0);const d=c===Kt&&/\b(transform|all)(,|$)/.test(i(`${Kt}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:d}}function Ma(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,i)=>Aa(r)+Aa(e[i])))}function Aa(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Nf(){return document.body.offsetHeight}function Vf(e,t,r){const i=e[hi];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Ui=Symbol("_vod"),wl=Symbol("_vsh"),ug={beforeMount(e,{value:t},{transition:r}){e[Ui]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):$r(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:i}){!t!=!r&&(i?t?(i.beforeEnter(e),$r(e,!0),i.enter(e)):i.leave(e,()=>{$r(e,!1)}):$r(e,t))},beforeUnmount(e,{value:t}){$r(e,t)}};function $r(e,t){e.style.display=t?e[Ui]:"none",e[wl]=!t}const Wf=Symbol(""),zf=/(^|;)\s*display\s*:/;function Hf(e,t,r){const i=e.style,n=Oe(r);let o=!1;if(r&&!n){if(t)if(Oe(t))for(const a of t.split(";")){const s=a.slice(0,a.indexOf(":")).trim();r[s]==null&&Ni(i,s,"")}else for(const a in t)r[a]==null&&Ni(i,a,"");for(const a in r)a==="display"&&(o=!0),Ni(i,a,r[a])}else if(n){if(t!==r){const a=i[Wf];a&&(r+=";"+a),i.cssText=r,o=zf.test(r)}}else t&&e.removeAttribute("style");Ui in e&&(e[Ui]=o?i.display:"",e[wl]&&(i.display="none"))}const Da=/\s*!important$/;function Ni(e,t,r){if(ne(r))r.forEach(i=>Ni(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=jf(e,t);Da.test(r)?e.setProperty(Ir(i),r.replace(Da,""),"important"):e[i]=r}}const ka=["Webkit","Moz","ms"],En={};function jf(e,t){const r=En[t];if(r)return r;let i=Bt(t);if(i!=="filter"&&i in e)return En[t]=i;i=en(i);for(let n=0;n<ka.length;n++){const o=ka[n]+i;if(o in e)return En[t]=o}return t}const Fa="http://www.w3.org/1999/xlink";function Ra(e,t,r,i,n,o=Vu(t)){i&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(Fa,t.slice(6,t.length)):e.setAttributeNS(Fa,t,r):r==null||o&&!ds(r)?e.removeAttribute(t):e.setAttribute(t,o?"":Lt(r)?String(r):r)}function Xf(e,t,r,i,n,o,a){if(t==="innerHTML"||t==="textContent"){i&&a(i,n,o),e[t]=r??"";return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?e.getAttribute("value")||"":e.value,c=r==null?"":String(r);(u!==c||!("_value"in e))&&(e.value=c),r==null&&e.removeAttribute(t),e._value=r;return}let l=!1;if(r===""||r==null){const u=typeof e[t];u==="boolean"?r=ds(r):r==null&&u==="string"?(r="",l=!0):u==="number"&&(r=0,l=!0)}try{e[t]=r}catch{}l&&e.removeAttribute(t)}function tr(e,t,r,i){e.addEventListener(t,r,i)}function $f(e,t,r,i){e.removeEventListener(t,r,i)}const Oa=Symbol("_vei");function Yf(e,t,r,i,n=null){const o=e[Oa]||(e[Oa]={}),a=o[t];if(i&&a)a.value=i;else{const[s,l]=Uf(t);if(i){const u=o[t]=qf(i,n);tr(e,s,u,l)}else a&&($f(e,s,a,l),o[t]=void 0)}}const La=/(?:Once|Passive|Capture)$/;function Uf(e){let t;if(La.test(e)){t={};let i;for(;i=e.match(La);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ir(e.slice(2)),t]}let In=0;const Kf=Promise.resolve(),Gf=()=>In||(Kf.then(()=>In=0),In=Date.now());function qf(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;xt(Zf(i,r.value),t,5,[i])};return r.value=e,r.attached=Gf(),r}function Zf(e,t){if(ne(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const Ba=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Jf=(e,t,r,i,n,o,a,s,l)=>{const u=n==="svg";t==="class"?Vf(e,i,u):t==="style"?Hf(e,r,i):Zi(t)?no(t)||Yf(e,t,r,i,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Qf(e,t,i,u))?(Xf(e,t,i,o,a,s,l),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ra(e,t,i,u,a,t!=="value")):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Ra(e,t,i,u))};function Qf(e,t,r,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ba(t)&&he(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Ba(t)&&Oe(r)?!1:t in e}const Wr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ne(t)?r=>Fi(t,r):t};function eh(e){e.target.composing=!0}function Na(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const jt=Symbol("_assign"),cg={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e[jt]=Wr(n);const o=i||n.props&&n.props.type==="number";tr(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;r&&(s=s.trim()),o&&(s=On(s)),e[jt](s)}),r&&tr(e,"change",()=>{e.value=e.value.trim()}),t||(tr(e,"compositionstart",eh),tr(e,"compositionend",Na),tr(e,"change",Na))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:i,trim:n,number:o}},a){if(e[jt]=Wr(a),e.composing)return;const s=(o||e.type==="number")&&!/^0\d/.test(e.value)?On(e.value):e.value,l=t??"";s!==l&&(document.activeElement===e&&e.type!=="range"&&(i&&t===r||n&&e.value.trim()===l)||(e.value=l))}},fg={deep:!0,created(e,t,r){e[jt]=Wr(r),tr(e,"change",()=>{const i=e._modelValue,n=xl(e),o=e.checked,a=e[jt];if(ne(i)){const s=vs(i,n),l=s!==-1;if(o&&!l)a(i.concat(n));else if(!o&&l){const u=[...i];u.splice(s,1),a(u)}}else if(Ji(i)){const s=new Set(i);o?s.add(n):s.delete(n),a(s)}else a(Cl(e,o))})},mounted:Va,beforeUpdate(e,t,r){e[jt]=Wr(r),Va(e,t,r)}};function Va(e,{value:t,oldValue:r},i){e._modelValue=t,ne(t)?e.checked=vs(t,i.props.value)>-1:Ji(t)?e.checked=t.has(i.props.value):t!==r&&(e.checked=Vr(t,Cl(e,!0)))}const hg={created(e,{value:t},r){e.checked=Vr(t,r.props.value),e[jt]=Wr(r),tr(e,"change",()=>{e[jt](xl(e))})},beforeUpdate(e,{value:t,oldValue:r},i){e[jt]=Wr(i),t!==r&&(e.checked=Vr(t,i.props.value))}};function xl(e){return"_value"in e?e._value:e.value}function Cl(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const th=["ctrl","shift","alt","meta"],rh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>th.some(r=>e[`${r}Key`]&&!t.includes(r))},dg=(e,t)=>{const r=e._withMods||(e._withMods={}),i=t.join(".");return r[i]||(r[i]=(n,...o)=>{for(let a=0;a<t.length;a++){const s=rh[t[a]];if(s&&s(n,t))return}return e(n,...o)})},ih={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},vg=(e,t)=>{const r=e._withKeys||(e._withKeys={}),i=t.join(".");return r[i]||(r[i]=n=>{if(!("key"in n))return;const o=Ir(n.key);if(t.some(a=>a===o||ih[a]===o))return e(n)})},nh=Ne({patchProp:Jf},Ff);let Wa;function El(){return Wa||(Wa=Jc(nh))}const pg=(...e)=>{El().render(...e)},oh=(...e)=>{const t=El().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=sh(i);if(!n)return;const o=t._component;!he(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.innerHTML="";const a=r(n,!1,ah(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t};function ah(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function sh(e){return Oe(e)?document.querySelector(e):e}var lh=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Il;const un=e=>Il=e,Tl=Symbol();function Gn(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ni;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ni||(ni={}));function uh(){const e=ms(!0),t=e.run(()=>_e({}));let r=[],i=[];const n=go({install(o){un(n),n._a=o,o.provide(Tl,n),o.config.globalProperties.$pinia=n,i.forEach(a=>r.push(a)),i=[]},use(o){return!this._a&&!lh?i.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return n}const Pl=()=>{};function za(e,t,r,i=Pl){e.push(t);const n=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),i())};return!r&&_s()&&Hu(n),n}function Mr(e,...t){e.slice().forEach(r=>{r(...t)})}const ch=e=>e();function qn(e,t){e instanceof Map&&t instanceof Map&&t.forEach((r,i)=>e.set(i,r)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const i=t[r],n=e[r];Gn(n)&&Gn(i)&&e.hasOwnProperty(r)&&!Ve(i)&&!wr(i)?e[r]=qn(n,i):e[r]=i}return e}const fh=Symbol();function hh(e){return!Gn(e)||!e.hasOwnProperty(fh)}const{assign:qt}=Object;function dh(e){return!!(Ve(e)&&e.effect)}function vh(e,t,r,i){const{state:n,actions:o,getters:a}=t,s=r.state.value[e];let l;function u(){s||(r.state.value[e]=n?n():{});const c=dc(r.state.value[e]);return qt(c,o,Object.keys(a||{}).reduce((f,h)=>(f[h]=go(yl(()=>{un(r);const d=r._s.get(e);return a[h].call(d,d)})),f),{}))}return l=Ml(e,u,t,r,i,!0),l}function Ml(e,t,r={},i,n,o){let a;const s=qt({actions:{}},r),l={deep:!0};let u,c,f=[],h=[],d;const v=i.state.value[e];!o&&!v&&(i.state.value[e]={}),_e({});let p;function g(T){let x;u=c=!1,typeof T=="function"?(T(i.state.value[e]),x={type:ni.patchFunction,storeId:e,events:d}):(qn(i.state.value[e],T),x={type:ni.patchObject,payload:T,storeId:e,events:d});const M=p=Symbol();Ns().then(()=>{p===M&&(u=!0)}),c=!0,Mr(f,x,i.state.value[e])}const m=o?function(){const{state:x}=r,M=x?x():{};this.$patch(D=>{qt(D,M)})}:Pl;function _(){a.stop(),f=[],h=[],i._s.delete(e)}function S(T,x){return function(){un(i);const M=Array.from(arguments),D=[],P=[];function H(U){D.push(U)}function X(U){P.push(U)}Mr(h,{args:M,name:T,store:w,after:H,onError:X});let G;try{G=x.apply(this&&this.$id===e?this:w,M)}catch(U){throw Mr(P,U),U}return G instanceof Promise?G.then(U=>(Mr(D,U),U)).catch(U=>(Mr(P,U),Promise.reject(U))):(Mr(D,G),G)}}const y={_p:i,$id:e,$onAction:za.bind(null,h),$patch:g,$reset:m,$subscribe(T,x={}){const M=za(f,T,x.detached,()=>D()),D=a.run(()=>Oi(()=>i.state.value[e],P=>{(x.flush==="sync"?c:u)&&T({storeId:e,type:ni.direct,events:d},P)},qt({},l,x)));return M},$dispose:_},w=ce(y);i._s.set(e,w);const I=(i._a&&i._a.runWithContext||ch)(()=>i._e.run(()=>(a=ms()).run(t)));for(const T in I){const x=I[T];if(Ve(x)&&!dh(x)||wr(x))o||(v&&hh(x)&&(Ve(x)?x.value=v[T]:qn(x,v[T])),i.state.value[e][T]=x);else if(typeof x=="function"){const M=S(T,x);I[T]=M,s.actions[T]=x}}return qt(w,I),qt(Ee(w),I),Object.defineProperty(w,"$state",{get:()=>i.state.value[e],set:T=>{g(x=>{qt(x,T)})}}),i._p.forEach(T=>{qt(w,a.run(()=>T({store:w,app:i._a,pinia:i,options:s})))}),v&&o&&r.hydrate&&r.hydrate(w.$state,v),u=!0,c=!0,w}function Al(e,t,r){let i,n;const o=typeof t=="function";typeof e=="string"?(i=e,n=o?r:t):(n=e,i=e.id);function a(s,l){const u=Yc();return s=s||(u?ei(Tl,null):null),s&&un(s),s=Il,s._s.has(i)||(o?Ml(i,t,n,s):vh(i,n,s)),s._s.get(i)}return a.$id=i,a}const ph=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,gh=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,mh=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function _h(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){yh(e);return}return t}function yh(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function bh(e,t={}){if(typeof e!="string")return e;const r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!mh.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(ph.test(e)||gh.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,_h)}return JSON.parse(e)}catch(i){if(t.strict)throw i;return e}}const Sh=/#/g,wh=/&/g,xh=/\//g,Ch=/=/g,Po=/\+/g,Eh=/%5e/gi,Ih=/%60/gi,Th=/%7c/gi,Ph=/%20/gi;function Mh(e){return encodeURI(""+e).replace(Th,"|")}function Zn(e){return Mh(typeof e=="string"?e:JSON.stringify(e)).replace(Po,"%2B").replace(Ph,"+").replace(Sh,"%23").replace(wh,"%26").replace(Ih,"`").replace(Eh,"^").replace(xh,"%2F")}function Tn(e){return Zn(e).replace(Ch,"%3D")}function Dl(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function Ah(e){return Dl(e.replace(Po," "))}function Dh(e){return Dl(e.replace(Po," "))}function kh(e=""){const t={};e[0]==="?"&&(e=e.slice(1));for(const r of e.split("&")){const i=r.match(/([^=]+)=?(.*)/)||[];if(i.length<2)continue;const n=Ah(i[1]);if(n==="__proto__"||n==="constructor")continue;const o=Dh(i[2]||"");t[n]===void 0?t[n]=o:Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]}return t}function Fh(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(r=>`${Tn(e)}=${Zn(r)}`).join("&"):`${Tn(e)}=${Zn(t)}`:Tn(e)}function Rh(e){return Object.keys(e).filter(t=>e[t]!==void 0).map(t=>Fh(t,e[t])).filter(Boolean).join("&")}const Oh=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Lh=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Bh=/^([/\\]\s*){2,}[^/\\]/,Nh=/^\.?\//;function kl(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Oh.test(e):Lh.test(e)||(t.acceptRelative?Bh.test(e):!1)}function Vh(e="",t){return e.endsWith("/")}function Wh(e="",t){return(Vh(e)?e.slice(0,-1):e)||"/"}function zh(e="",t){return e.endsWith("/")?e:e+"/"}function Hh(e,t){if(Xh(t)||kl(e))return e;const r=Wh(t);return e.startsWith(r)?e:Yh(r,e)}function jh(e,t){const r=Uh(e),i={...kh(r.search),...t};return r.search=Rh(i),Kh(r)}function Xh(e){return!e||e==="/"}function $h(e){return e&&e!=="/"}function Yh(e,...t){let r=e||"";for(const i of t.filter(n=>$h(n)))if(r){const n=i.replace(Nh,"");r=zh(r)+n}else r=i;return r}const Fl=Symbol.for("ufo:protocolRelative");function Uh(e="",t){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,f,h=""]=r;return{protocol:f.toLowerCase(),pathname:h,href:f+h,auth:"",host:"",search:"",hash:""}}if(!kl(e,{acceptRelative:!0}))return Ha(e);const[,i="",n,o=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,a="",s=""]=o.match(/([^#/?]*)(.*)?/)||[],{pathname:l,search:u,hash:c}=Ha(s.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:i.toLowerCase(),auth:n?n.slice(0,Math.max(0,n.length-1)):"",host:a,pathname:l,search:u,hash:c,[Fl]:!i}}function Ha(e=""){const[t="",r="",i=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:i}}function Kh(e){const t=e.pathname||"",r=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",i=e.hash||"",n=e.auth?e.auth+"@":"",o=e.host||"";return(e.protocol||e[Fl]?(e.protocol||"")+"//":"")+n+o+t+r+i}class Gh extends Error{constructor(t,r){super(t,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}}function qh(e){var l,u,c,f,h;const t=((l=e.error)==null?void 0:l.message)||((u=e.error)==null?void 0:u.toString())||"",r=((c=e.request)==null?void 0:c.method)||((f=e.options)==null?void 0:f.method)||"GET",i=((h=e.request)==null?void 0:h.url)||String(e.request)||"/",n=`[${r}] ${JSON.stringify(i)}`,o=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",a=`${n}: ${o}${t?` ${t}`:""}`,s=new Gh(a,e.error?{cause:e.error}:void 0);for(const d of["request","options","response"])Object.defineProperty(s,d,{get(){return e[d]}});for(const[d,v]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(s,d,{get(){return e.response&&e.response[v]}});return s}const Zh=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function ja(e="GET"){return Zh.has(e.toUpperCase())}function Jh(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const Qh=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ed=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function td(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return ed.test(t)?"json":Qh.has(t)||t.startsWith("text/")?"text":"blob"}function rd(e,t,r=globalThis.Headers){const i={...t,...e};if(t!=null&&t.params&&(e!=null&&e.params)&&(i.params={...t==null?void 0:t.params,...e==null?void 0:e.params}),t!=null&&t.query&&(e!=null&&e.query)&&(i.query={...t==null?void 0:t.query,...e==null?void 0:e.query}),t!=null&&t.headers&&(e!=null&&e.headers)){i.headers=new r((t==null?void 0:t.headers)||{});for(const[n,o]of new r((e==null?void 0:e.headers)||{}))i.headers.set(n,o)}return i}const id=new Set([408,409,425,429,500,502,503,504]),nd=new Set([101,204,205,304]);function Rl(e={}){const{fetch:t=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:i=globalThis.AbortController}=e;async function n(s){const l=s.error&&s.error.name==="AbortError"&&!s.options.timeout||!1;if(s.options.retry!==!1&&!l){let c;typeof s.options.retry=="number"?c=s.options.retry:c=ja(s.options.method)?0:1;const f=s.response&&s.response.status||500;if(c>0&&(Array.isArray(s.options.retryStatusCodes)?s.options.retryStatusCodes.includes(f):id.has(f))){const h=s.options.retryDelay||0;return h>0&&await new Promise(d=>setTimeout(d,h)),o(s.request,{...s.options,retry:c-1})}}const u=qh(s);throw Error.captureStackTrace&&Error.captureStackTrace(u,o),u}const o=async function(l,u={}){var d;const c={request:l,options:rd(u,e.defaults,r),response:void 0,error:void 0};c.options.method=(d=c.options.method)==null?void 0:d.toUpperCase(),c.options.onRequest&&await c.options.onRequest(c),typeof c.request=="string"&&(c.options.baseURL&&(c.request=Hh(c.request,c.options.baseURL)),(c.options.query||c.options.params)&&(c.request=jh(c.request,{...c.options.params,...c.options.query}))),c.options.body&&ja(c.options.method)&&(Jh(c.options.body)?(c.options.body=typeof c.options.body=="string"?c.options.body:JSON.stringify(c.options.body),c.options.headers=new r(c.options.headers||{}),c.options.headers.has("content-type")||c.options.headers.set("content-type","application/json"),c.options.headers.has("accept")||c.options.headers.set("accept","application/json")):("pipeTo"in c.options.body&&typeof c.options.body.pipeTo=="function"||typeof c.options.body.pipe=="function")&&("duplex"in c.options||(c.options.duplex="half")));let f;if(!c.options.signal&&c.options.timeout){const v=new i;f=setTimeout(()=>v.abort(),c.options.timeout),c.options.signal=v.signal}try{c.response=await t(c.request,c.options)}catch(v){return c.error=v,c.options.onRequestError&&await c.options.onRequestError(c),await n(c)}finally{f&&clearTimeout(f)}if(c.response.body&&!nd.has(c.response.status)&&c.options.method!=="HEAD"){const v=(c.options.parseResponse?"json":c.options.responseType)||td(c.response.headers.get("content-type")||"");switch(v){case"json":{const p=await c.response.text(),g=c.options.parseResponse||bh;c.response._data=g(p);break}case"stream":{c.response._data=c.response.body;break}default:c.response._data=await c.response[v]()}}return c.options.onResponse&&await c.options.onResponse(c),!c.options.ignoreResponseError&&c.response.status>=400&&c.response.status<600?(c.options.onResponseError&&await c.options.onResponseError(c),await n(c)):c.response},a=async function(l,u){return(await o(l,u))._data};return a.raw=o,a.native=(...s)=>t(...s),a.create=(s={})=>Rl({...e,defaults:{...e.defaults,...s}}),a}const Mo=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),od=Mo.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),ad=Mo.Headers,sd=Mo.AbortController,ld=Rl({fetch:od,Headers:ad,AbortController:sd}),Pn=ld;/**
     * @license
     * KLineChart v9.8.10
     * Copyright (c) 2019 lihu.
     * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
     */var Jn=function(e,t){return Jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},Jn(e,t)};function pe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Jn(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var te=function(){return te=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},te.apply(this,arguments)};function Or(e,t,r,i){function n(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(c){try{u(i.next(c))}catch(f){a(f)}}function l(c){try{u(i.throw(c))}catch(f){a(f)}}function u(c){c.done?o(c.value):n(c.value).then(s,l)}u((i=i.apply(e,[])).next())})}function Lr(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return l([u,c])}}function l(u){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(i=1,n&&(o=u[0]&2?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){r.label=u[1];break}if(u[0]===6&&r.label<o[1]){r.label=o[1],o=u;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(u);break}o[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(c){u=[6,c],n=0}finally{i=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Cr(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function Ol(e,t,r){if(arguments.length===2)for(var i=0,n=t.length,o;i<n;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}var Te;(function(e){e.Dashed="dashed",e.Solid="solid"})(Te||(Te={}));var Ce;(function(e){e.Stroke="stroke",e.Fill="fill",e.StrokeFill="stroke_fill"})(Ce||(Ce={}));var zr;(function(e){e.Always="always",e.FollowCross="follow_cross",e.None="none"})(zr||(zr={}));var Rt;(function(e){e.Standard="standard",e.Rect="rect"})(Rt||(Rt={}));var oi;(function(e){e.Left="left",e.Middle="middle",e.Right="right"})(oi||(oi={}));var Ki;(function(e){e.Fixed="fixed",e.Pointer="pointer"})(Ki||(Ki={}));var bt;(function(e){e.CandleSolid="candle_solid",e.CandleStroke="candle_stroke",e.CandleUpStroke="candle_up_stroke",e.CandleDownStroke="candle_down_stroke",e.Ohlc="ohlc",e.Area="area"})(bt||(bt={}));var ur;(function(e){e.Left="left",e.Right="right"})(ur||(ur={}));var Qe;(function(e){e.Normal="normal",e.Percentage="percentage",e.Log="log"})(Qe||(Qe={}));var Mi="#F92855",Mn="rgba(249, 40, 85, .7)",Ai="#2DC08E",An="rgba(45, 192, 142, .7)",yr="#888888",cn="#FFFFFF",ft="#1677FF",xr="#76808F",Qn="#DDDDDD";function Br(e){return"rgba(22, 119, 255, ".concat(e,")")}function ud(){function e(){return{show:!0,size:1,color:"#EDEDED",style:Te.Dashed,dashedValue:[2,2]}}return{show:!0,horizontal:e(),vertical:e()}}function cd(){var e={show:!0,color:xr,textOffset:5,textSize:10,textFamily:"Helvetica Neue",textWeight:"normal"};return{type:bt.CandleSolid,bar:{upColor:Ai,downColor:Mi,noChangeColor:yr,upBorderColor:Ai,downBorderColor:Mi,noChangeBorderColor:yr,upWickColor:Ai,downWickColor:Mi,noChangeWickColor:yr},area:{lineSize:2,lineColor:ft,smooth:!1,value:"close",backgroundColor:[{offset:0,color:Br(.01)},{offset:1,color:Br(.2)}],point:{show:!0,color:ft,radius:4,rippleColor:Br(.3),rippleRadius:8,animation:!0,animationDuration:1e3}},priceMark:{show:!0,high:te({},e),low:te({},e),last:{show:!0,upColor:Ai,downColor:Mi,noChangeColor:yr,line:{show:!0,style:Te.Dashed,dashedValue:[4,4],size:1},text:{show:!0,style:Ce.Fill,size:12,paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderColor:"transparent",borderStyle:Te.Solid,borderSize:0,borderDashedValue:[2,2],color:cn,family:"Helvetica Neue",weight:"normal",borderRadius:2}}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:zr.Always,showType:Rt.Standard,custom:[{title:"time",value:"{time}"},{title:"open",value:"{open}"},{title:"high",value:"{high}"},{title:"low",value:"{low}"},{title:"close",value:"{close}"},{title:"volume",value:"{volume}"}],defaultValue:"n/a",rect:{position:Ki.Fixed,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,offsetLeft:4,offsetTop:4,offsetRight:4,offsetBottom:4,borderRadius:4,borderSize:1,borderColor:"#F2F3F5",color:"#FEFEFE"},text:{size:12,family:"Helvetica Neue",weight:"normal",color:xr,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}}function fd(){var e=["#FF9600","#935EBD",ft,"#E11D74","#01C5C4"].map(function(t){return{style:Te.Solid,smooth:!1,size:1,dashedValue:[2,2],color:t}});return{ohlc:{upColor:An,downColor:Mn,noChangeColor:yr},bars:[{style:Ce.Fill,borderStyle:Te.Solid,borderSize:1,borderDashedValue:[2,2],upColor:An,downColor:Mn,noChangeColor:yr}],lines:e,circles:[{style:Ce.Fill,borderStyle:Te.Solid,borderSize:1,borderDashedValue:[2,2],upColor:An,downColor:Mn,noChangeColor:yr}],lastValueMark:{show:!1,text:{show:!1,style:Ce.Fill,color:cn,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:Te.Solid,borderColor:"transparent",borderSize:0,borderDashedValue:[2,2],paddingLeft:4,paddingTop:4,paddingRight:4,paddingBottom:4,borderRadius:2}},tooltip:{offsetLeft:4,offsetTop:6,offsetRight:4,offsetBottom:6,showRule:zr.Always,showType:Rt.Standard,showName:!0,showParams:!0,defaultValue:"n/a",text:{size:12,family:"Helvetica Neue",weight:"normal",color:xr,marginLeft:8,marginTop:4,marginRight:8,marginBottom:4},icons:[]}}}function Ll(){return{show:!0,size:"auto",axisLine:{show:!0,color:Qn,size:1},tickText:{show:!0,color:xr,size:12,family:"Helvetica Neue",weight:"normal",marginStart:4,marginEnd:4},tickLine:{show:!0,size:1,length:3,color:Qn}}}function hd(){var e=Ll();return e.type=Qe.Normal,e.position=ur.Right,e.inside=!1,e.reverse=!1,e}function dd(){function e(){return{show:!0,line:{show:!0,style:Te.Dashed,dashedValue:[4,2],size:1,color:xr},text:{show:!0,style:Ce.Fill,color:cn,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:Te.Solid,borderDashedValue:[2,2],borderSize:1,borderColor:xr,borderRadius:2,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:xr}}}return{show:!0,horizontal:e(),vertical:e()}}function vd(){var e=Br(.35),t=Br(.25);function r(){return{style:Ce.Fill,color:cn,size:12,family:"Helvetica Neue",weight:"normal",borderStyle:Te.Solid,borderDashedValue:[2,2],borderSize:1,borderRadius:2,borderColor:ft,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4,backgroundColor:ft}}return{point:{color:ft,borderColor:e,borderSize:1,radius:5,activeColor:ft,activeBorderColor:e,activeBorderSize:3,activeRadius:5},line:{style:Te.Solid,smooth:!1,color:ft,size:1,dashedValue:[2,2]},rect:{style:Ce.Fill,color:t,borderColor:ft,borderSize:1,borderRadius:0,borderStyle:Te.Solid,borderDashedValue:[2,2]},polygon:{style:Ce.Fill,color:ft,borderColor:ft,borderSize:1,borderStyle:Te.Solid,borderDashedValue:[2,2]},circle:{style:Ce.Fill,color:t,borderColor:ft,borderSize:1,borderStyle:Te.Solid,borderDashedValue:[2,2]},arc:{style:Te.Solid,color:ft,size:1,dashedValue:[2,2]},text:r(),rectText:r()}}function pd(){return{size:1,color:Qn,fill:!0,activeBackgroundColor:Br(.08)}}function gd(){return{grid:ud(),candle:cd(),indicator:fd(),xAxis:Ll(),yAxis:hd(),separator:pd(),crosshair:dd(),overlay:vd()}}function pt(e,t){if(!(!Tt(e)&&!Tt(t))){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=e[r],n=t[r];Tt(n)&&Tt(i)?pt(i,n):N(t[r])&&(e[r]=Hr(t[r]))}}}function Hr(e){if(!Tt(e))return e;var t;wt(e)?t=[]:t={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];Tt(i)?t[r]=Hr(i):t[r]=i}return t}function wt(e){return Object.prototype.toString.call(e)==="[object Array]"}function Nt(e){return typeof e=="function"}function Tt(e){return typeof e=="object"&&N(e)}function ee(e){return typeof e=="number"&&!isNaN(e)}function N(e){return e!=null}function or(e){return typeof e=="boolean"}function fe(e){return typeof e=="string"}var md=/\\(\\)?/g,_d=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g");function qe(e,t,r){if(N(e)){var i=[];t.replace(_d,function(s){for(var l=[],u=1;u<arguments.length;u++)l[u-1]=arguments[u];var c=s;return N(l[1])?c=l[2].replace(md,"$1"):N(l[0])&&(c=l[0].trim()),i.push(c),""});for(var n=e,o=0,a=i.length;N(n)&&o<a;)n=n==null?void 0:n[i[o++]];return N(n)?n:r??"--"}return r??"--"}function Bl(e,t,r){var i={};return e.formatToParts(new Date(t)).forEach(function(n){var o=n.type,a=n.value;switch(o){case"year":{i.YYYY=a;break}case"month":{i.MM=a;break}case"day":{i.DD=a;break}case"hour":{i.HH=a==="24"?"00":a;break}case"minute":{i.mm=a;break}case"second":{i.ss=a;break}}}),r.replace(/YYYY|MM|DD|HH|mm|ss/g,function(n){return i[n]})}function Be(e,t){var r=+e;return ee(r)?r.toFixed(t??2):"".concat(e)}function Nl(e){var t=+e;if(ee(t)){if(t>1e9)return"".concat(+(t/1e9).toFixed(3),"B");if(t>1e6)return"".concat(+(t/1e6).toFixed(3),"M");if(t>1e3)return"".concat(+(t/1e3).toFixed(3),"K")}return"".concat(e)}function He(e,t){var r="".concat(e);if(t.length===0)return r;if(r.includes(".")){var i=r.split(".");return"".concat(i[0].replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(t)}),".").concat(i[1])}return r.replace(/(\d)(?=(\d{3})+$)/g,function(n){return"".concat(n).concat(t)})}function je(e,t){var r="".concat(e),i=new RegExp("\\.0{"+t+",}[1-9][0-9]*$");if(i.test(r)){var n=r.split("."),o=n[n.length-1],a=o.match(/0*/);if(N(a)){var s=a[0].length;return n[n.length-1]=o.replace(/0*/,"0{".concat(s,"}")),n.join(".")}}return r}var Yr;function ar(e){var t,r,i;return(i=(r=(t=e.ownerDocument)===null||t===void 0?void 0:t.defaultView)===null||r===void 0?void 0:r.devicePixelRatio)!==null&&i!==void 0?i:1}function Er(e,t,r){return"".concat(t??"normal"," ").concat(e??12,"px ").concat(r??"Helvetica Neue")}function di(e,t,r,i){if(!N(Yr)){var n=document.createElement("canvas"),o=ar(n);Yr=n.getContext("2d"),Yr.scale(o,o)}return Yr.font=Er(t,r,i),Math.round(Yr.measureText(e).width)}var Ct;(function(e){e.OnDataReady="onDataReady",e.OnZoom="onZoom",e.OnScroll="onScroll",e.OnVisibleRangeChange="onVisibleRangeChange",e.OnTooltipIconClick="onTooltipIconClick",e.OnCrosshairChange="onCrosshairChange",e.OnCandleBarClick="onCandleBarClick",e.OnPaneDrag="onPaneDrag"})(Ct||(Ct={}));var yd=function(){function e(){this._callbacks=[]}return e.prototype.subscribe=function(t){var r,i=(r=this._callbacks.indexOf(t))!==null&&r!==void 0?r:-1;i<0&&this._callbacks.push(t)},e.prototype.unsubscribe=function(t){var r;if(Nt(t)){var i=(r=this._callbacks.indexOf(t))!==null&&r!==void 0?r:-1;i>-1&&this._callbacks.splice(i,1)}else this._callbacks=[]},e.prototype.execute=function(t){this._callbacks.forEach(function(r){r(t)})},e.prototype.isEmpty=function(){return this._callbacks.length===0},e}(),gt;(function(e){e.Normal="normal",e.Price="price",e.Volume="volume"})(gt||(gt={}));function Ao(e,t,r,i,n){var o=t.result,a=t.figures,s=t.styles,l=qe(s,"circles",i.circles),u=l.length,c=qe(s,"bars",i.bars),f=c.length,h=qe(s,"lines",i.lines),d=h.length,v=0,p=0,g=0,m,_=0;a.forEach(function(S){var y;switch(S.type){case"circle":{_=v;var w=l[v%u];m=te(te({},w),{color:w.noChangeColor}),v++;break}case"bar":{_=p;var C=c[p%f];m=te(te({},C),{color:C.noChangeColor}),p++;break}case"line":{_=g,m=h[g%d],g++;break}}if(N(m)){var I={prev:{kLineData:e[r-1],indicatorData:o[r-1]},current:{kLineData:e[r],indicatorData:o[r]},next:{kLineData:e[r+1],indicatorData:o[r+1]}},T=(y=S.styles)===null||y===void 0?void 0:y.call(S,I,t,i);n(S,te(te({},m),T),_)}})}var Vl=function(){function e(t){this.result=[],this._precisionFlag=!1;var r=t.name,i=t.shortName,n=t.series,o=t.calcParams,a=t.figures,s=t.precision,l=t.shouldOhlc,u=t.shouldFormatBigNumber,c=t.visible,f=t.zLevel,h=t.minValue,d=t.maxValue,v=t.styles,p=t.extendData,g=t.regenerateFigures,m=t.createTooltipDataSource,_=t.draw;this.name=r,this.shortName=i??r,this.series=n??gt.Normal,this.precision=s??4,this.calcParams=o??[],this.figures=a??[],this.shouldOhlc=l??!1,this.shouldFormatBigNumber=u??!1,this.visible=c??!0,this.zLevel=f??0,this.minValue=h??null,this.maxValue=d??null,this.styles=Hr(v??{}),this.extendData=p,this.regenerateFigures=g??null,this.createTooltipDataSource=m??null,this.draw=_??null}return e.prototype.setShortName=function(t){return this.shortName!==t?(this.shortName=t,!0):!1},e.prototype.setSeries=function(t){return this.series!==t?(this.series=t,!0):!1},e.prototype.setPrecision=function(t,r){var i=r??!1,n=Math.floor(t);return n!==this.precision&&t>=0&&(!i||i&&!this._precisionFlag)?(this.precision=n,i||(this._precisionFlag=!0),!0):!1},e.prototype.setCalcParams=function(t){var r,i;return this.calcParams=t,this.figures=(i=(r=this.regenerateFigures)===null||r===void 0?void 0:r.call(this,t))!==null&&i!==void 0?i:this.figures,!0},e.prototype.setShouldOhlc=function(t){return this.shouldOhlc!==t?(this.shouldOhlc=t,!0):!1},e.prototype.setShouldFormatBigNumber=function(t){return this.shouldFormatBigNumber!==t?(this.shouldFormatBigNumber=t,!0):!1},e.prototype.setVisible=function(t){return this.visible!==t?(this.visible=t,!0):!1},e.prototype.setZLevel=function(t){return this.zLevel!==t?(this.zLevel=t,!0):!1},e.prototype.setStyles=function(t){return pt(this.styles,t),!0},e.prototype.setExtendData=function(t){return this.extendData!==t?(this.extendData=t,!0):!1},e.prototype.setFigures=function(t){return this.figures!==t?(this.figures=t,!0):!1},e.prototype.setMinValue=function(t){return this.minValue!==t?(this.minValue=t,!0):!1},e.prototype.setMaxValue=function(t){return this.maxValue!==t?(this.maxValue=t,!0):!1},e.prototype.setRegenerateFigures=function(t){return this.regenerateFigures!==t?(this.regenerateFigures=t,!0):!1},e.prototype.setCreateTooltipDataSource=function(t){return this.createTooltipDataSource!==t?(this.createTooltipDataSource=t,!0):!1},e.prototype.setDraw=function(t){return this.draw!==t?(this.draw=t,!0):!1},e.prototype.calcIndicator=function(t){return Or(this,void 0,void 0,function(){var r;return Lr(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.calc(t,this)];case 1:return r=i.sent(),this.result=r,[2,!0];case 2:return i.sent(),[2,!1];case 3:return[2]}})})},e.extend=function(t){var r=function(i){pe(n,i);function n(){return i.call(this,t)||this}return n.prototype.calc=function(o,a){return t.calc(o,a)},n}(e);return r},e}(),Nr;(function(e){e.Normal="normal",e.WeakMagnet="weak_magnet",e.StrongMagnet="strong_magnet"})(Nr||(Nr={}));function bd(){return["mouseClickEvent","mouseDoubleClickEvent","mouseRightClickEvent","tapEvent","doubleTapEvent","mouseDownEvent","touchStartEvent","mouseMoveEvent","touchMoveEvent"]}var Xa=1,Ur=-1,Sd="overlay_",Ar="overlay_figure_",wd=Number.MAX_SAFE_INTEGER,Wl=function(){function e(t){this.currentStep=Xa,this.points=[],this._prevPressedPoint=null,this._prevPressedPoints=[];var r=t.mode,i=t.modeSensitivity,n=t.extendData,o=t.styles,a=t.name,s=t.totalStep,l=t.lock,u=t.visible,c=t.zLevel,f=t.needDefaultPointFigure,h=t.needDefaultXAxisFigure,d=t.needDefaultYAxisFigure,v=t.createPointFigures,p=t.createXAxisFigures,g=t.createYAxisFigures,m=t.performEventPressedMove,_=t.performEventMoveForDrawing,S=t.onDrawStart,y=t.onDrawing,w=t.onDrawEnd,C=t.onClick,I=t.onDoubleClick,T=t.onRightClick,x=t.onPressedMoveStart,M=t.onPressedMoving,D=t.onPressedMoveEnd,P=t.onMouseEnter,H=t.onMouseLeave,X=t.onRemoved,G=t.onSelected,U=t.onDeselected;this.name=a,this.totalStep=!ee(s)||s<2?1:s,this.lock=l??!1,this.visible=u??!0,this.zLevel=c??0,this.needDefaultPointFigure=f??!1,this.needDefaultXAxisFigure=h??!1,this.needDefaultYAxisFigure=d??!1,this.mode=r??Nr.Normal,this.modeSensitivity=i??8,this.extendData=n,this.styles=Hr(o??{}),this.createPointFigures=v??null,this.createXAxisFigures=p??null,this.createYAxisFigures=g??null,this.performEventPressedMove=m??null,this.performEventMoveForDrawing=_??null,this.onDrawStart=S??null,this.onDrawing=y??null,this.onDrawEnd=w??null,this.onClick=C??null,this.onDoubleClick=I??null,this.onRightClick=T??null,this.onPressedMoveStart=x??null,this.onPressedMoving=M??null,this.onPressedMoveEnd=D??null,this.onMouseEnter=P??null,this.onMouseLeave=H??null,this.onRemoved=X??null,this.onSelected=G??null,this.onDeselected=U??null}return e.prototype.setId=function(t){return fe(this.id)?!1:(this.id=t,!0)},e.prototype.setGroupId=function(t){return fe(this.groupId)?!1:(this.groupId=t,!0)},e.prototype.setPaneId=function(t){this.paneId=t},e.prototype.setExtendData=function(t){return t!==this.extendData?(this.extendData=t,!0):!1},e.prototype.setStyles=function(t){return pt(this.styles,t),!0},e.prototype.setPoints=function(t){if(t.length>0){var r=void 0;if(this.points=Ol([],Tr(t),!1),t.length>=this.totalStep-1?(this.currentStep=Ur,r=this.totalStep-1):(this.currentStep=t.length+1,r=t.length),this.performEventMoveForDrawing!==null)for(var i=0;i<r;i++)this.performEventMoveForDrawing({currentStep:i+2,mode:this.mode,points:this.points,performPointIndex:i,performPoint:this.points[i]});return this.currentStep===Ur&&this.performEventPressedMove!==null&&this.performEventPressedMove({currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:this.points.length-1,performPoint:this.points[this.points.length-1]}),!0}return!1},e.prototype.setLock=function(t){return this.lock!==t?(this.lock=t,!0):!1},e.prototype.setVisible=function(t){return this.visible!==t?(this.visible=t,!0):!1},e.prototype.setZLevel=function(t){return this.zLevel!==t?(this.zLevel=t,!0):!1},e.prototype.setMode=function(t){return this.mode!==t?(this.mode=t,!0):!1},e.prototype.setModeSensitivity=function(t){return this.modeSensitivity!==t?(this.modeSensitivity=t,!0):!1},e.prototype.setOnDrawStartCallback=function(t){return this.onDrawStart!==t?(this.onDrawStart=t,!0):!1},e.prototype.setOnDrawingCallback=function(t){return this.onDrawing!==t?(this.onDrawing=t,!0):!1},e.prototype.setOnDrawEndCallback=function(t){return this.onDrawEnd!==t?(this.onDrawEnd=t,!0):!1},e.prototype.setOnClickCallback=function(t){return this.onClick!==t?(this.onClick=t,!0):!1},e.prototype.setOnDoubleClickCallback=function(t){return this.onDoubleClick!==t?(this.onDoubleClick=t,!0):!1},e.prototype.setOnRightClickCallback=function(t){return this.onRightClick!==t?(this.onRightClick=t,!0):!1},e.prototype.setOnPressedMoveStartCallback=function(t){return this.onPressedMoveStart!==t?(this.onPressedMoveStart=t,!0):!1},e.prototype.setOnPressedMovingCallback=function(t){return this.onPressedMoving!==t?(this.onPressedMoving=t,!0):!1},e.prototype.setOnPressedMoveEndCallback=function(t){return this.onPressedMoveEnd!==t?(this.onPressedMoveEnd=t,!0):!1},e.prototype.setOnMouseEnterCallback=function(t){return this.onMouseEnter!==t?(this.onMouseEnter=t,!0):!1},e.prototype.setOnMouseLeaveCallback=function(t){return this.onMouseLeave!==t?(this.onMouseLeave=t,!0):!1},e.prototype.setOnRemovedCallback=function(t){return this.onRemoved!==t?(this.onRemoved=t,!0):!1},e.prototype.setOnSelectedCallback=function(t){return this.onSelected!==t?(this.onSelected=t,!0):!1},e.prototype.setOnDeselectedCallback=function(t){return this.onDeselected!==t?(this.onDeselected=t,!0):!1},e.prototype.nextStep=function(){this.currentStep===this.totalStep-1?this.currentStep=Ur:this.currentStep++},e.prototype.forceComplete=function(){this.currentStep=Ur},e.prototype.isDrawing=function(){return this.currentStep!==Ur},e.prototype.isStart=function(){return this.currentStep===Xa},e.prototype.eventMoveForDrawing=function(t){var r,i=this.currentStep-1,n={};ee(t.timestamp)&&(n.timestamp=t.timestamp),ee(t.dataIndex)&&(n.dataIndex=t.dataIndex),ee(t.value)&&(n.value=t.value),this.points[i]=n,(r=this.performEventMoveForDrawing)===null||r===void 0||r.call(this,{currentStep:this.currentStep,mode:this.mode,points:this.points,performPointIndex:i,performPoint:n})},e.prototype.eventPressedPointMove=function(t,r){var i;ee(t.dataIndex)&&(this.points[r].dataIndex=t.dataIndex,this.points[r].timestamp=t.timestamp),ee(t.value)&&(this.points[r].value=t.value),(i=this.performEventPressedMove)===null||i===void 0||i.call(this,{currentStep:this.currentStep,points:this.points,mode:this.mode,performPointIndex:r,performPoint:this.points[r]})},e.prototype.startPressedMove=function(t){this._prevPressedPoint=te({},t),this._prevPressedPoints=Hr(this.points)},e.prototype.eventPressedOtherMove=function(t,r){if(this._prevPressedPoint!==null){var i;ee(t.dataIndex)&&ee(this._prevPressedPoint.dataIndex)&&(i=t.dataIndex-this._prevPressedPoint.dataIndex);var n;ee(t.value)&&ee(this._prevPressedPoint.value)&&(n=t.value-this._prevPressedPoint.value),this.points=this._prevPressedPoints.map(function(o){var a;ee(o.timestamp)&&(o.dataIndex=r.timestampToDataIndex(o.timestamp));var s=te({},o);return ee(i)&&ee(o.dataIndex)&&(s.dataIndex=o.dataIndex+i,s.timestamp=(a=r.dataIndexToTimestamp(s.dataIndex))!==null&&a!==void 0?a:void 0),ee(n)&&ee(o.value)&&(s.value=o.value+n),s})}},e.extend=function(t){var r=function(i){pe(n,i);function n(){return i.call(this,t)||this}return n}(e);return r},e}(),it;(function(e){e[e.Tooltip=0]="Tooltip",e[e.Crosshair=1]="Crosshair",e[e.XAxis=2]="XAxis"})(it||(it={}));function xd(){return{formatDate:Bl,formatBigNumber:Nl}}var Cd="en-US",Dn=-1;function Gi(e){return Nt(window.requestAnimationFrame)?window.requestAnimationFrame(e):window.setTimeout(e,20)}function $a(e){Nt(window.cancelAnimationFrame)?window.cancelAnimationFrame(e):window.clearTimeout(e)}var eo=function(){function e(t){this._options={duration:500,iterationCount:1},this._currentIterationCount=0,this._running=!1,this._time=0,pt(this._options,t)}return e.prototype._loop=function(){var t=this;this._running=!0;var r=function(){var i;if(t._running){var n=new Date().getTime()-t._time;n<t._options.duration?((i=t._doFrameCallback)===null||i===void 0||i.call(t,n),Gi(r)):(t.stop(),t._currentIterationCount++,t._currentIterationCount<t._options.iterationCount&&t.start())}};Gi(r)},e.prototype.doFrame=function(t){return this._doFrameCallback=t,this},e.prototype.setDuration=function(t){return this._options.duration=t,this},e.prototype.setIterationCount=function(t){return this._options.iterationCount=t,this},e.prototype.start=function(){this._running||(this._time=new Date().getTime(),this._loop())},e.prototype.stop=function(){var t;this._running&&((t=this._doFrameCallback)===null||t===void 0||t.call(this,this._options.duration)),this._running=!1},e}(),kn=1,Ya=new Date().getTime();function zl(e){var t=new Date().getTime();return t===Ya?++kn:kn=1,Ya=t,"".concat(e??"").concat(t,"_").concat(kn)}function $t(e,t){var r,i=document.createElement(e),n=t??{};for(var o in n)i.style[o]=(r=n[o])!==null&&r!==void 0?r:"";return i}function to(e,t,r){var i=0,n=0;for(n=e.length-1;i!==n;){var o=Math.floor((n+i)/2),a=n-i,s=e[o][t];if(r===e[i][t])return i;if(r===e[n][t])return n;if(r===s)return o;if(r>s?i=o:n=o,a<=2)break}return i}function Ed(e){var t=Math.floor(qr(e)),r=gr(t),i=e/r,n=0;return i<1.5?n=1:i<2.5?n=2:i<3.5?n=3:i<4.5?n=4:i<5.5?n=5:i<6.5?n=6:n=8,e=n*r,t>=-20?+e.toFixed(t<0?-t:0):e}function Ua(e,t){t==null&&(t=10),t=Math.min(Math.max(0,t),20);var r=(+e).toFixed(t);return+r}function Id(e){var t=e.toString(),r=t.indexOf("e");if(r>0){var i=+t.slice(r+1);return i<0?-i:0}else{var n=t.indexOf(".");return n<0?0:t.length-1-n}}function Hl(e,t,r){var i=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER];return e.forEach(function(n){var o,a;i[0]=Math.max((o=n[t])!==null&&o!==void 0?o:n,i[0]),i[1]=Math.min((a=n[r])!==null&&a!==void 0?a:n,i[1])}),i}function qr(e){return Math.log(e)/Math.log(10)}function gr(e){return Math.pow(10,e)}var St;(function(e){e.Init="init",e.Forward="forward",e.Backward="backward"})(St||(St={}));function Ka(){return{from:0,to:0,realFrom:0,realTo:0}}var Ga={MIN:2.5,MAX:50},Td=8,Pd=80,Md=.88,ro=10,Ad=function(){function e(t){this._dateTimeFormat=this._buildDateTimeFormat(),this._zoomEnabled=!0,this._scrollEnabled=!0,this._totalBarSpace=0,this._barSpace=Td,this._offsetRightDistance=Pd,this._startLastBarRightSideDiffBarCount=0,this._scrollLimitRole=0,this._minVisibleBarCount={left:2,right:2},this._maxOffsetDistance={left:50,right:50},this._visibleRange=Ka(),this._chartStore=t,this._gapBarSpace=this._calcGapBarSpace(),this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace}return e.prototype._calcGapBarSpace=function(){var t;return this._barSpace>3?t=Math.floor(this._barSpace*Md):(t=Math.floor(this._barSpace),t===this._barSpace&&t--),t%2===0&&t--,t=Math.max(1,t),t},e.prototype.adjustVisibleRange=function(){var t,r,i=this._chartStore.getDataList(),n=i.length,o=this._totalBarSpace/this._barSpace,a,s;this._scrollLimitRole===1?(a=(this._totalBarSpace-this._maxOffsetDistance.right)/this._barSpace,s=(this._totalBarSpace-this._maxOffsetDistance.left)/this._barSpace):(a=this._minVisibleBarCount.left,s=this._minVisibleBarCount.right),a=Math.max(0,a),s=Math.max(0,s);var l=o-Math.min(a,n);this._lastBarRightSideDiffBarCount>l&&(this._lastBarRightSideDiffBarCount=l);var u=-n+Math.min(s,n);this._lastBarRightSideDiffBarCount<u&&(this._lastBarRightSideDiffBarCount=u);var c=Math.round(this._lastBarRightSideDiffBarCount+n+.5),f=c;c>n&&(c=n);var h=Math.round(c-o)-1;h<0&&(h=0);var d=this._lastBarRightSideDiffBarCount>0?Math.round(n+this._lastBarRightSideDiffBarCount-o)-1:h;if(this._visibleRange={from:h,to:c,realFrom:d,realTo:f},this._chartStore.getActionStore().execute(Ct.OnVisibleRangeChange,this._visibleRange),this._chartStore.adjustVisibleDataList(),h===0){var v=i[0];this._chartStore.executeLoadMoreCallback((t=v==null?void 0:v.timestamp)!==null&&t!==void 0?t:null),this._chartStore.executeLoadDataCallback({type:St.Forward,data:v??null})}c===n&&this._chartStore.executeLoadDataCallback({type:St.Backward,data:(r=i[n-1])!==null&&r!==void 0?r:null})},e.prototype.getDateTimeFormat=function(){return this._dateTimeFormat},e.prototype._buildDateTimeFormat=function(t){var r={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};fe(t)&&(r.timeZone=t);var i=null;try{i=new Intl.DateTimeFormat("en",r)}catch{}return i},e.prototype.setTimezone=function(t){var r=this._buildDateTimeFormat(t);r!==null&&(this._dateTimeFormat=r)},e.prototype.getTimezone=function(){return this._dateTimeFormat.resolvedOptions().timeZone},e.prototype.getBarSpace=function(){return{bar:this._barSpace,halfBar:this._barSpace/2,gapBar:this._gapBarSpace,halfGapBar:Math.floor(this._gapBarSpace/2)}},e.prototype.setBarSpace=function(t,r){t<Ga.MIN||t>Ga.MAX||this._barSpace===t||(this._barSpace=t,this._gapBarSpace=this._calcGapBarSpace(),r==null||r(),this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0))},e.prototype.setTotalBarSpace=function(t){return this._totalBarSpace!==t&&(this._totalBarSpace=t,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0)),this},e.prototype.setOffsetRightDistance=function(t,r){return this._offsetRightDistance=this._scrollLimitRole===1?Math.min(this._maxOffsetDistance.right,t):t,this._lastBarRightSideDiffBarCount=this._offsetRightDistance/this._barSpace,(r??!1)&&(this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0)),this},e.prototype.resetOffsetRightDistance=function(){this.setOffsetRightDistance(this._offsetRightDistance)},e.prototype.getInitialOffsetRightDistance=function(){return this._offsetRightDistance},e.prototype.getOffsetRightDistance=function(){return Math.max(0,this._lastBarRightSideDiffBarCount*this._barSpace)},e.prototype.getLastBarRightSideDiffBarCount=function(){return this._lastBarRightSideDiffBarCount},e.prototype.setLastBarRightSideDiffBarCount=function(t){return this._lastBarRightSideDiffBarCount=t,this},e.prototype.setMaxOffsetLeftDistance=function(t){return this._scrollLimitRole=1,this._maxOffsetDistance.left=t,this},e.prototype.setMaxOffsetRightDistance=function(t){return this._scrollLimitRole=1,this._maxOffsetDistance.right=t,this},e.prototype.setLeftMinVisibleBarCount=function(t){return this._scrollLimitRole=0,this._minVisibleBarCount.left=t,this},e.prototype.setRightMinVisibleBarCount=function(t){return this._scrollLimitRole=0,this._minVisibleBarCount.right=t,this},e.prototype.getVisibleRange=function(){return this._visibleRange},e.prototype.startScroll=function(){this._startLastBarRightSideDiffBarCount=this._lastBarRightSideDiffBarCount},e.prototype.scroll=function(t){if(this._scrollEnabled){var r=t/this._barSpace,i=this._lastBarRightSideDiffBarCount*this._barSpace;this._lastBarRightSideDiffBarCount=this._startLastBarRightSideDiffBarCount-r,this.adjustVisibleRange(),this._chartStore.getTooltipStore().recalculateCrosshair(!0),this._chartStore.getChart().adjustPaneViewport(!1,!0,!0,!0);var n=Math.round(i-this._lastBarRightSideDiffBarCount*this._barSpace);n!==0&&this._chartStore.getActionStore().execute(Ct.OnScroll,{distance:n})}},e.prototype.getDataByDataIndex=function(t){var r;return(r=this._chartStore.getDataList()[t])!==null&&r!==void 0?r:null},e.prototype.coordinateToFloatIndex=function(t){var r=this._chartStore.getDataList().length,i=(this._totalBarSpace-t)/this._barSpace,n=r+this._lastBarRightSideDiffBarCount-i;return Math.round(n*1e6)/1e6},e.prototype.dataIndexToTimestamp=function(t){var r,i=this.getDataByDataIndex(t);return(r=i==null?void 0:i.timestamp)!==null&&r!==void 0?r:null},e.prototype.timestampToDataIndex=function(t){var r=this._chartStore.getDataList();return r.length===0?0:to(r,"timestamp",t)},e.prototype.dataIndexToCoordinate=function(t){var r=this._chartStore.getDataList().length,i=r+this._lastBarRightSideDiffBarCount-t;return Math.floor(this._totalBarSpace-(i-.5)*this._barSpace)},e.prototype.coordinateToDataIndex=function(t){return Math.ceil(this.coordinateToFloatIndex(t))-1},e.prototype.zoom=function(t,r){var i=this,n;if(this._zoomEnabled){var o=r??null;if(!ee(o==null?void 0:o.x)){var a=this._chartStore.getTooltipStore().getCrosshair();o={x:(n=a==null?void 0:a.x)!==null&&n!==void 0?n:this._totalBarSpace/2}}var s=o.x,l=this.coordinateToFloatIndex(s),u=this._barSpace,c=this._barSpace+t*(this._barSpace/ro);this.setBarSpace(c,function(){i._lastBarRightSideDiffBarCount+=l-i.coordinateToFloatIndex(s)});var f=this._barSpace/u;f!==1&&this._chartStore.getActionStore().execute(Ct.OnZoom,{scale:f})}},e.prototype.setZoomEnabled=function(t){return this._zoomEnabled=t,this},e.prototype.getZoomEnabled=function(){return this._zoomEnabled},e.prototype.setScrollEnabled=function(t){return this._scrollEnabled=t,this},e.prototype.getScrollEnabled=function(){return this._scrollEnabled},e.prototype.clear=function(){this._visibleRange=Ka()},e}(),Dd={name:"AVP",shortName:"AVP",series:gt.Price,precision:2,figures:[{key:"avp",title:"AVP: ",type:"line"}],calc:function(e){var t=0,r=0;return e.map(function(i){var n,o,a={},s=(n=i==null?void 0:i.turnover)!==null&&n!==void 0?n:0,l=(o=i==null?void 0:i.volume)!==null&&o!==void 0?o:0;return t+=s,r+=l,r!==0&&(a.avp=t/r),a})}},kd={name:"AO",shortName:"AO",calcParams:[5,34],figures:[{key:"ao",title:"AO: ",type:"bar",baseValue:0,styles:function(e,t,r){var i,n,o,a,s=e.prev,l=e.current,u=(n=(i=s.indicatorData)===null||i===void 0?void 0:i.ao)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,c=(a=(o=l.indicatorData)===null||o===void 0?void 0:o.ao)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER,f;c>u?f=qe(t.styles,"bars[0].upColor",r.bars[0].upColor):f=qe(t.styles,"bars[0].downColor",r.bars[0].downColor);var h=c>u?Ce.Stroke:Ce.Fill;return{color:f,style:h,borderColor:f}}}],calc:function(e,t){var r=t.calcParams,i=Math.max(r[0],r[1]),n=0,o=0,a=0,s=0;return e.map(function(l,u){var c={},f=(l.low+l.high)/2;if(n+=f,o+=f,u>=r[0]-1){a=n/r[0];var h=e[u-(r[0]-1)];n-=(h.low+h.high)/2}if(u>=r[1]-1){s=o/r[1];var h=e[u-(r[1]-1)];o-=(h.low+h.high)/2}return u>=i-1&&(c.ao=a-s),c})}},Fd={name:"BIAS",shortName:"BIAS",calcParams:[6,12,24],figures:[{key:"bias1",title:"BIAS6: ",type:"line"},{key:"bias2",title:"BIAS12: ",type:"line"},{key:"bias3",title:"BIAS24: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"bias".concat(r+1),title:"BIAS".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,i=t.figures,n=[];return e.map(function(o,a){var s={},l=o.close;return r.forEach(function(u,c){var f;if(n[c]=((f=n[c])!==null&&f!==void 0?f:0)+l,a>=u-1){var h=n[c]/r[c];s[i[c].key]=(l-h)/h*100,n[c]-=e[a-(u-1)].close}}),s})}};function Rd(e,t){var r=e.length,i=0;return e.forEach(function(n){var o=n.close-t;i+=o*o}),i=Math.abs(i),Math.sqrt(i/r)}var Od={name:"BOLL",shortName:"BOLL",series:gt.Price,calcParams:[20,2],precision:2,shouldOhlc:!0,figures:[{key:"up",title:"UP: ",type:"line"},{key:"mid",title:"MID: ",type:"line"},{key:"dn",title:"DN: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=r[0]-1,n=0;return e.map(function(o,a){var s=o.close,l={};if(n+=s,a>=i){l.mid=n/r[0];var u=Rd(e.slice(a-i,a+1),l.mid);l.up=l.mid+r[1]*u,l.dn=l.mid-r[1]*u,n-=e[a-i].close}return l})}},Ld={name:"BRAR",shortName:"BRAR",calcParams:[26],figures:[{key:"br",title:"BR: ",type:"line"},{key:"ar",title:"AR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=0,n=0,o=0,a=0;return e.map(function(s,l){var u,c,f={},h=s.high,d=s.low,v=s.open,p=((u=e[l-1])!==null&&u!==void 0?u:s).close;if(o+=h-v,a+=v-d,i+=h-p,n+=p-d,l>=r[0]-1){a!==0?f.ar=o/a*100:f.ar=0,n!==0?f.br=i/n*100:f.br=0;var g=e[l-(r[0]-1)],m=g.high,_=g.low,S=g.open,y=((c=e[l-r[0]])!==null&&c!==void 0?c:e[l-(r[0]-1)]).close;i-=m-y,n-=y-_,o-=m-S,a-=S-_}return f})}},Bd={name:"BBI",shortName:"BBI",series:gt.Price,precision:2,calcParams:[3,6,12,24],shouldOhlc:!0,figures:[{key:"bbi",title:"BBI: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=Math.max.apply(Math,Ol([],Tr(r),!1)),n=[],o=[];return e.map(function(a,s){var l={},u=a.close;if(r.forEach(function(f,h){var d;n[h]=((d=n[h])!==null&&d!==void 0?d:0)+u,s>=f-1&&(o[h]=n[h]/f,n[h]-=e[s-(f-1)].close)}),s>=i-1){var c=0;o.forEach(function(f){c+=f}),l.bbi=c/4}return l})}},Nd={name:"CCI",shortName:"CCI",calcParams:[20],figures:[{key:"cci",title:"CCI: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=r[0]-1,n=0,o=[];return e.map(function(a,s){var l={},u=(a.high+a.low+a.close)/3;if(n+=u,o.push(u),s>=i){var c=n/r[0],f=o.slice(s-i,s+1),h=0;f.forEach(function(p){h+=Math.abs(p-c)});var d=h/r[0];l.cci=d!==0?(u-c)/d/.015:0;var v=(e[s-i].high+e[s-i].low+e[s-i].close)/3;n-=v}return l})}},Vd={name:"CR",shortName:"CR",calcParams:[26,10,20,40,60],figures:[{key:"cr",title:"CR: ",type:"line"},{key:"ma1",title:"MA1: ",type:"line"},{key:"ma2",title:"MA2: ",type:"line"},{key:"ma3",title:"MA3: ",type:"line"},{key:"ma4",title:"MA4: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=Math.ceil(r[1]/2.5+1),n=Math.ceil(r[2]/2.5+1),o=Math.ceil(r[3]/2.5+1),a=Math.ceil(r[4]/2.5+1),s=0,l=[],u=0,c=[],f=0,h=[],d=0,v=[],p=[];return e.forEach(function(g,m){var _,S,y,w,C,I={},T=(_=e[m-1])!==null&&_!==void 0?_:g,x=(T.high+T.close+T.low+T.open)/4,M=Math.max(0,g.high-x),D=Math.max(0,x-g.low);m>=r[0]-1&&(D!==0?I.cr=M/D*100:I.cr=0,s+=I.cr,u+=I.cr,f+=I.cr,d+=I.cr,m>=r[0]+r[1]-2&&(l.push(s/r[1]),m>=r[0]+r[1]+i-3&&(I.ma1=l[l.length-1-i]),s-=(S=p[m-(r[1]-1)].cr)!==null&&S!==void 0?S:0),m>=r[0]+r[2]-2&&(c.push(u/r[2]),m>=r[0]+r[2]+n-3&&(I.ma2=c[c.length-1-n]),u-=(y=p[m-(r[2]-1)].cr)!==null&&y!==void 0?y:0),m>=r[0]+r[3]-2&&(h.push(f/r[3]),m>=r[0]+r[3]+o-3&&(I.ma3=h[h.length-1-o]),f-=(w=p[m-(r[3]-1)].cr)!==null&&w!==void 0?w:0),m>=r[0]+r[4]-2&&(v.push(d/r[4]),m>=r[0]+r[4]+a-3&&(I.ma4=v[v.length-1-a]),d-=(C=p[m-(r[4]-1)].cr)!==null&&C!==void 0?C:0)),p.push(I)}),p}},Wd={name:"DMA",shortName:"DMA",calcParams:[10,50,10],figures:[{key:"dma",title:"DMA: ",type:"line"},{key:"ama",title:"AMA: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=Math.max(r[0],r[1]),n=0,o=0,a=0,s=[];return e.forEach(function(l,u){var c,f={},h=l.close;n+=h,o+=h;var d=0,v=0;if(u>=r[0]-1&&(d=n/r[0],n-=e[u-(r[0]-1)].close),u>=r[1]-1&&(v=o/r[1],o-=e[u-(r[1]-1)].close),u>=i-1){var p=d-v;f.dma=p,a+=p,u>=i+r[2]-2&&(f.ama=a/r[2],a-=(c=s[u-(r[2]-1)].dma)!==null&&c!==void 0?c:0)}s.push(f)}),s}},zd={name:"DMI",shortName:"DMI",calcParams:[14,6],figures:[{key:"pdi",title:"PDI: ",type:"line"},{key:"mdi",title:"MDI: ",type:"line"},{key:"adx",title:"ADX: ",type:"line"},{key:"adxr",title:"ADXR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=0,n=0,o=0,a=0,s=0,l=0,u=0,c=0,f=[];return e.forEach(function(h,d){var v,p,g={},m=(v=e[d-1])!==null&&v!==void 0?v:h,_=m.close,S=h.high,y=h.low,w=S-y,C=Math.abs(S-_),I=Math.abs(_-y),T=S-m.high,x=m.low-y,M=Math.max(Math.max(w,C),I),D=T>0&&T>x?T:0,P=x>0&&x>T?x:0;if(i+=M,n+=D,o+=P,d>=r[0]-1){d>r[0]-1?(a=a-a/r[0]+M,s=s-s/r[0]+D,l=l-l/r[0]+P):(a=i,s=n,l=o);var H=0,X=0;a!==0&&(H=s*100/a,X=l*100/a),g.pdi=H,g.mdi=X;var G=0;X+H!==0&&(G=Math.abs(X-H)/(X+H)*100),u+=G,d>=r[0]*2-2&&(d>r[0]*2-2?c=(c*(r[0]-1)+G)/r[0]:c=u/r[0],g.adx=c,d>=r[0]*2+r[1]-3&&(g.adxr=(((p=f[d-(r[1]-1)].adx)!==null&&p!==void 0?p:0)+c)/2))}f.push(g)}),f}},Hd={name:"EMV",shortName:"EMV",calcParams:[14,9],figures:[{key:"emv",title:"EMV: ",type:"line"},{key:"maEmv",title:"MAEMV: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=0,n=[];return e.map(function(o,a){var s,l={};if(a>0){var u=e[a-1],c=o.high,f=o.low,h=(s=o.volume)!==null&&s!==void 0?s:0,d=(c+f)/2-(u.high+u.low)/2;if(h===0||c-f===0)l.emv=0;else{var v=h/1e8/(c-f);l.emv=d/v}i+=l.emv,n.push(l.emv),a>=r[0]&&(l.maEmv=i/r[0],i-=n[a-r[0]])}return l})}},jd={name:"EMA",shortName:"EMA",series:gt.Price,calcParams:[6,12,20],precision:2,shouldOhlc:!0,figures:[{key:"ema1",title:"EMA6: ",type:"line"},{key:"ema2",title:"EMA12: ",type:"line"},{key:"ema3",title:"EMA20: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"ema".concat(r+1),title:"EMA".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,i=t.figures,n=0,o=[];return e.map(function(a,s){var l={},u=a.close;return n+=u,r.forEach(function(c,f){s>=c-1&&(s>c-1?o[f]=(2*u+(c-1)*o[f])/(c+1):o[f]=n/c,l[i[f].key]=o[f])}),l})}},Xd={name:"MTM",shortName:"MTM",calcParams:[12,6],figures:[{key:"mtm",title:"MTM: ",type:"line"},{key:"maMtm",title:"MAMTM: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=0,n=[];return e.forEach(function(o,a){var s,l={};if(a>=r[0]){var u=o.close,c=e[a-r[0]].close;l.mtm=u-c,i+=l.mtm,a>=r[0]+r[1]-1&&(l.maMtm=i/r[1],i-=(s=n[a-(r[1]-1)].mtm)!==null&&s!==void 0?s:0)}n.push(l)}),n}},$d={name:"MA",shortName:"MA",series:gt.Price,calcParams:[5,10,30,60],precision:2,shouldOhlc:!0,figures:[{key:"ma5",title:"MA5: ",type:"line"},{key:"ma10",title:"MA10: ",type:"line"},{key:"ma30",title:"MA30: ",type:"line"},{key:"ma60",title:"MA60: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"ma".concat(r+1),title:"MA".concat(t,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,i=t.figures,n=[];return e.map(function(o,a){var s={},l=o.close;return r.forEach(function(u,c){var f;n[c]=((f=n[c])!==null&&f!==void 0?f:0)+l,a>=u-1&&(s[i[c].key]=n[c]/u,n[c]-=e[a-(u-1)].close)}),s})}},Yd={name:"MACD",shortName:"MACD",calcParams:[12,26,9],figures:[{key:"dif",title:"DIF: ",type:"line"},{key:"dea",title:"DEA: ",type:"line"},{key:"macd",title:"MACD: ",type:"bar",baseValue:0,styles:function(e,t,r){var i,n,o,a,s=e.prev,l=e.current,u=(n=(i=s.indicatorData)===null||i===void 0?void 0:i.macd)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,c=(a=(o=l.indicatorData)===null||o===void 0?void 0:o.macd)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER,f;c>0?f=qe(t.styles,"bars[0].upColor",r.bars[0].upColor):c<0?f=qe(t.styles,"bars[0].downColor",r.bars[0].downColor):f=qe(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);var h=u<c?Ce.Stroke:Ce.Fill;return{style:h,color:f,borderColor:f}}}],calc:function(e,t){var r=t.calcParams,i=0,n,o,a=0,s=0,l=0,u=Math.max(r[0],r[1]);return e.map(function(c,f){var h={},d=c.close;return i+=d,f>=r[0]-1&&(f>r[0]-1?n=(2*d+(r[0]-1)*n)/(r[0]+1):n=i/r[0]),f>=r[1]-1&&(f>r[1]-1?o=(2*d+(r[1]-1)*o)/(r[1]+1):o=i/r[1]),f>=u-1&&(a=n-o,h.dif=a,s+=a,f>=u+r[2]-2&&(f>u+r[2]-2?l=(a*2+l*(r[2]-1))/(r[2]+1):l=s/r[2],h.macd=(a-l)*2,h.dea=l)),h})}},Ud={name:"OBV",shortName:"OBV",calcParams:[30],figures:[{key:"obv",title:"OBV: ",type:"line"},{key:"maObv",title:"MAOBV: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=0,n=0,o=[];return e.forEach(function(a,s){var l,u,c,f,h=(l=e[s-1])!==null&&l!==void 0?l:a;a.close<h.close?n-=(u=a.volume)!==null&&u!==void 0?u:0:a.close>h.close&&(n+=(c=a.volume)!==null&&c!==void 0?c:0);var d={obv:n};i+=n,s>=r[0]-1&&(d.maObv=i/r[0],i-=(f=o[s-(r[0]-1)].obv)!==null&&f!==void 0?f:0),o.push(d)}),o}},Kd={name:"PVT",shortName:"PVT",figures:[{key:"pvt",title:"PVT: ",type:"line"}],calc:function(e){var t=0;return e.map(function(r,i){var n,o,a={},s=r.close,l=(n=r.volume)!==null&&n!==void 0?n:1,u=((o=e[i-1])!==null&&o!==void 0?o:r).close,c=0,f=u*l;return f!==0&&(c=(s-u)/f),t+=c,a.pvt=t,a})}},Gd={name:"PSY",shortName:"PSY",calcParams:[12,6],figures:[{key:"psy",title:"PSY: ",type:"line"},{key:"maPsy",title:"MAPSY: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=0,n=0,o=[],a=[];return e.forEach(function(s,l){var u,c,f={},h=((u=e[l-1])!==null&&u!==void 0?u:s).close,d=s.close-h>0?1:0;o.push(d),i+=d,l>=r[0]-1&&(f.psy=i/r[0]*100,n+=f.psy,l>=r[0]+r[1]-2&&(f.maPsy=n/r[1],n-=(c=a[l-(r[1]-1)].psy)!==null&&c!==void 0?c:0),i-=o[l-(r[0]-1)]),a.push(f)}),a}},qd={name:"ROC",shortName:"ROC",calcParams:[12,6],figures:[{key:"roc",title:"ROC: ",type:"line"},{key:"maRoc",title:"MAROC: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=[],n=0;return e.forEach(function(o,a){var s,l,u={};if(a>=r[0]-1){var c=o.close,f=((s=e[a-r[0]])!==null&&s!==void 0?s:e[a-(r[0]-1)]).close;f!==0?u.roc=(c-f)/f*100:u.roc=0,n+=u.roc,a>=r[0]-1+r[1]-1&&(u.maRoc=n/r[1],n-=(l=i[a-(r[1]-1)].roc)!==null&&l!==void 0?l:0)}i.push(u)}),i}},Zd={name:"RSI",shortName:"RSI",calcParams:[6,12,24],figures:[{key:"rsi1",title:"RSI1: ",type:"line"},{key:"rsi2",title:"RSI2: ",type:"line"},{key:"rsi3",title:"RSI3: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){var i=r+1;return{key:"rsi".concat(i),title:"RSI".concat(i,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,i=t.figures,n=[],o=[];return e.map(function(a,s){var l,u={},c=((l=e[s-1])!==null&&l!==void 0?l:a).close,f=a.close-c;return r.forEach(function(h,d){var v,p,g;if(f>0?n[d]=((v=n[d])!==null&&v!==void 0?v:0)+f:o[d]=((p=o[d])!==null&&p!==void 0?p:0)+Math.abs(f),s>=h-1){o[d]!==0?u[i[d].key]=100-100/(1+n[d]/o[d]):u[i[d].key]=0;var m=e[s-(h-1)],_=(g=e[s-h])!==null&&g!==void 0?g:m,S=m.close-_.close;S>0?n[d]-=S:o[d]-=Math.abs(S)}}),u})}},Jd={name:"SMA",shortName:"SMA",series:gt.Price,calcParams:[12,2],precision:2,figures:[{key:"sma",title:"SMA: ",type:"line"}],shouldOhlc:!0,calc:function(e,t){var r=t.calcParams,i=0,n=0;return e.map(function(o,a){var s={},l=o.close;return i+=l,a>=r[0]-1&&(a>r[0]-1?n=(l*r[1]+n*(r[0]-r[1]+1))/(r[0]+1):n=i/r[0],s.sma=n),s})}},Qd={name:"KDJ",shortName:"KDJ",calcParams:[9,3,3],figures:[{key:"k",title:"K: ",type:"line"},{key:"d",title:"D: ",type:"line"},{key:"j",title:"J: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=[];return e.forEach(function(n,o){var a,s,l,u,c={},f=n.close;if(o>=r[0]-1){var h=Hl(e.slice(o-(r[0]-1),o+1),"high","low"),d=h[0],v=h[1],p=d-v,g=(f-v)/(p===0?1:p)*100;c.k=((r[1]-1)*((s=(a=i[o-1])===null||a===void 0?void 0:a.k)!==null&&s!==void 0?s:50)+g)/r[1],c.d=((r[2]-1)*((u=(l=i[o-1])===null||l===void 0?void 0:l.d)!==null&&u!==void 0?u:50)+c.k)/r[2],c.j=3*c.k-2*c.d}i.push(c)}),i}},ev={name:"SAR",shortName:"SAR",series:gt.Price,calcParams:[2,2,20],precision:2,shouldOhlc:!0,figures:[{key:"sar",title:"SAR: ",type:"circle",styles:function(e,t,r){var i,n,o=e.current,a=(n=(i=o.indicatorData)===null||i===void 0?void 0:i.sar)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER,s=o.kLineData,l=((s==null?void 0:s.high)+(s==null?void 0:s.low))/2,u=a<l?qe(t.styles,"circles[0].upColor",r.circles[0].upColor):qe(t.styles,"circles[0].downColor",r.circles[0].downColor);return{color:u}}}],calc:function(e,t){var r=t.calcParams,i=r[0]/100,n=r[1]/100,o=r[2]/100,a=i,s=-100,l=!1,u=0;return e.map(function(c,f){var h=u,d=c.high,v=c.low;if(l){(s===-100||s<d)&&(s=d,a=Math.min(a+n,o)),u=h+a*(s-h);var p=Math.min(e[Math.max(1,f)-1].low,v);u>c.low?(u=s,a=i,s=-100,l=!l):u>p&&(u=p)}else{(s===-100||s>v)&&(s=v,a=Math.min(a+n,o)),u=h+a*(s-h);var g=Math.max(e[Math.max(1,f)-1].high,d);u<c.high?(u=s,a=0,s=-100,l=!l):u<g&&(u=g)}return{sar:u}})}},tv={name:"TRIX",shortName:"TRIX",calcParams:[12,9],figures:[{key:"trix",title:"TRIX: ",type:"line"},{key:"maTrix",title:"MATRIX: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=0,n,o,a,s=0,l=0,u=0,c=[];return e.forEach(function(f,h){var d,v={},p=f.close;if(i+=p,h>=r[0]-1&&(h>r[0]-1?n=(2*p+(r[0]-1)*n)/(r[0]+1):n=i/r[0],s+=n,h>=r[0]*2-2&&(h>r[0]*2-2?o=(2*n+(r[0]-1)*o)/(r[0]+1):o=s/r[0],l+=o,h>=r[0]*3-3))){var g=void 0,m=0;h>r[0]*3-3?(g=(2*o+(r[0]-1)*a)/(r[0]+1),m=(g-a)/a*100):g=l/r[0],a=g,v.trix=m,u+=m,h>=r[0]*3+r[1]-4&&(v.maTrix=u/r[1],u-=(d=c[h-(r[1]-1)].trix)!==null&&d!==void 0?d:0)}c.push(v)}),c}};function qa(){return{key:"volume",title:"VOLUME: ",type:"bar",baseValue:0,styles:function(e,t,r){var i=e.current.kLineData,n=qe(t.styles,"bars[0].noChangeColor",r.bars[0].noChangeColor);return N(i)&&(i.close>i.open?n=qe(t.styles,"bars[0].upColor",r.bars[0].upColor):i.close<i.open&&(n=qe(t.styles,"bars[0].downColor",r.bars[0].downColor))),{color:n}}}}var rv={name:"VOL",shortName:"VOL",series:gt.Volume,calcParams:[5,10,20],shouldFormatBigNumber:!0,precision:0,minValue:0,figures:[{key:"ma1",title:"MA5: ",type:"line"},{key:"ma2",title:"MA10: ",type:"line"},{key:"ma3",title:"MA20: ",type:"line"},qa()],regenerateFigures:function(e){var t=e.map(function(r,i){return{key:"ma".concat(i+1),title:"MA".concat(r,": "),type:"line"}});return t.push(qa()),t},calc:function(e,t){var r=t.calcParams,i=t.figures,n=[];return e.map(function(o,a){var s,l=(s=o.volume)!==null&&s!==void 0?s:0,u={volume:l};return r.forEach(function(c,f){var h,d;n[f]=((h=n[f])!==null&&h!==void 0?h:0)+l,a>=c-1&&(u[i[f].key]=n[f]/c,n[f]-=(d=e[a-(c-1)].volume)!==null&&d!==void 0?d:0)}),u})}},iv={name:"VR",shortName:"VR",calcParams:[26,6],figures:[{key:"vr",title:"VR: ",type:"line"},{key:"maVr",title:"MAVR: ",type:"line"}],calc:function(e,t){var r=t.calcParams,i=0,n=0,o=0,a=0,s=[];return e.forEach(function(l,u){var c,f,h,d,v,p={},g=l.close,m=((c=e[u-1])!==null&&c!==void 0?c:l).close,_=(f=l.volume)!==null&&f!==void 0?f:0;if(g>m?i+=_:g<m?n+=_:o+=_,u>=r[0]-1){var S=o/2;n+S===0?p.vr=0:p.vr=(i+S)/(n+S)*100,a+=p.vr,u>=r[0]+r[1]-2&&(p.maVr=a/r[1],a-=(h=s[u-(r[1]-1)].vr)!==null&&h!==void 0?h:0);var y=e[u-(r[0]-1)],w=(d=e[u-r[0]])!==null&&d!==void 0?d:y,C=y.close,I=(v=y.volume)!==null&&v!==void 0?v:0;C>w.close?i-=I:C<w.close?n-=I:o-=I}s.push(p)}),s}},nv={name:"WR",shortName:"WR",calcParams:[6,10,14],figures:[{key:"wr1",title:"WR1: ",type:"line"},{key:"wr2",title:"WR2: ",type:"line"},{key:"wr3",title:"WR3: ",type:"line"}],regenerateFigures:function(e){return e.map(function(t,r){return{key:"wr".concat(r+1),title:"WR".concat(r+1,": "),type:"line"}})},calc:function(e,t){var r=t.calcParams,i=t.figures;return e.map(function(n,o){var a={},s=n.close;return r.forEach(function(l,u){var c=l-1;if(o>=c){var f=Hl(e.slice(o-c,o+1),"high","low"),h=f[0],d=f[1],v=h-d;a[i[u].key]=v===0?0:(s-h)/v*100}}),a})}},Do={},ov=[Dd,kd,Fd,Od,Ld,Bd,Nd,Vd,Wd,zd,Hd,jd,Xd,$d,Yd,Ud,Kd,Gd,qd,Zd,Jd,Qd,ev,tv,rv,iv,nv];ov.forEach(function(e){Do[e.name]=Vl.extend(e)});function gg(e){Do[e.name]=Vl.extend(e)}function jl(e){var t;return(t=Do[e])!==null&&t!==void 0?t:null}var av=function(){function e(t){this._instances=new Map,this._chartStore=t}return e.prototype._overrideInstance=function(t,r){var i=r.shortName,n=r.series,o=r.calcParams,a=r.precision,s=r.figures,l=r.minValue,u=r.maxValue,c=r.shouldOhlc,f=r.shouldFormatBigNumber,h=r.visible,d=r.zLevel,v=r.styles,p=r.extendData,g=r.regenerateFigures,m=r.createTooltipDataSource,_=r.draw,S=r.calc,y=!1;fe(i)&&t.setShortName(i)&&(y=!0),N(n)&&t.setSeries(n)&&(y=!0);var w=!1;wt(o)&&t.setCalcParams(o)&&(y=!0,w=!0),wt(s)&&t.setFigures(s)&&(y=!0,w=!0),l!==void 0&&t.setMinValue(l)&&(y=!0),u!==void 0&&t.setMinValue(u)&&(y=!0),ee(a)&&t.setPrecision(a)&&(y=!0),or(c)&&t.setShouldOhlc(c)&&(y=!0),or(f)&&t.setShouldFormatBigNumber(f)&&(y=!0),or(h)&&t.setVisible(h)&&(y=!0);var C=!1;return ee(d)&&t.setZLevel(d)&&(y=!0,C=!0),N(v)&&t.setStyles(v)&&(y=!0),p!==void 0&&t.setExtendData(p)&&(y=!0,w=!0),g!==void 0&&t.setRegenerateFigures(g)&&(y=!0),m!==void 0&&t.setCreateTooltipDataSource(m)&&(y=!0),_!==void 0&&t.setDraw(_)&&(y=!0),Nt(S)&&(t.calc=S,w=!0),[y,w,C]},e.prototype._sort=function(t){var r;fe(t)?(r=this._instances.get(t))===null||r===void 0||r.sort(function(i,n){return i.zLevel-n.zLevel}):this._instances.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},e.prototype.addInstance=function(t,r,i){return Or(this,void 0,void 0,function(){var n,o,a,s,l;return Lr(this,function(u){switch(u.label){case 0:return n=t.name,o=this._instances.get(r),N(o)?(a=o.find(function(c){return c.name===n}),N(a)?[4,Promise.reject(new Error("Duplicate indicators."))]:[3,2]):[3,2];case 1:return[2,u.sent()];case 2:return N(o)||(o=[]),s=jl(n),l=new s,this.synchronizeSeriesPrecision(l),this._overrideInstance(l,t),i||(o=[]),o.push(l),this._instances.set(r,o),this._sort(r),[4,l.calcIndicator(this._chartStore.getDataList())];case 3:return[2,u.sent()]}})})},e.prototype.getInstances=function(t){var r;return(r=this._instances.get(t))!==null&&r!==void 0?r:[]},e.prototype.removeInstance=function(t,r){var i,n=!1,o=this._instances.get(t);if(N(o)){if(fe(r)){var a=o.findIndex(function(s){return s.name===r});a>-1&&(o.splice(a,1),n=!0)}else this._instances.set(t,[]),n=!0;((i=this._instances.get(t))===null||i===void 0?void 0:i.length)===0&&this._instances.delete(t)}return n},e.prototype.hasInstances=function(t){return this._instances.has(t)},e.prototype.calcInstance=function(t,r){return Or(this,void 0,void 0,function(){var i,n,o,a,s=this;return Lr(this,function(l){switch(l.label){case 0:return i=[],fe(t)?fe(r)?(n=this._instances.get(r),N(n)&&(o=n.find(function(u){return u.name===t}),N(o)&&i.push(o.calcIndicator(this._chartStore.getDataList())))):this._instances.forEach(function(u){var c=u.find(function(f){return f.name===t});N(c)&&i.push(c.calcIndicator(s._chartStore.getDataList()))}):this._instances.forEach(function(u){u.forEach(function(c){i.push(c.calcIndicator(s._chartStore.getDataList()))})}),[4,Promise.all(i)];case 1:return a=l.sent(),[2,a.includes(!0)]}})})},e.prototype.getInstanceByPaneId=function(t,r){var i,n,o=function(l){var u=new Map;return l.forEach(function(c){u.set(c.name,c)}),u};if(fe(t)){var a=(i=this._instances.get(t))!==null&&i!==void 0?i:[];return fe(r)?(n=a==null?void 0:a.find(function(l){return l.name===r}))!==null&&n!==void 0?n:null:o(a)}var s=new Map;return this._instances.forEach(function(l,u){s.set(u,o(l))}),s},e.prototype.synchronizeSeriesPrecision=function(t){var r=this._chartStore.getPrecision(),i=r.price,n=r.volume,o=function(a){switch(a.series){case gt.Price:{a.setPrecision(i,!0);break}case gt.Volume:{a.setPrecision(n,!0);break}}};N(t)?o(t):this._instances.forEach(function(a){a.forEach(function(s){o(s)})})},e.prototype.override=function(t,r){return Or(this,void 0,void 0,function(){var i,n,o,a,s,l,u,c=this;return Lr(this,function(f){switch(f.label){case 0:return i=t.name,n=new Map,r!==null?(o=this._instances.get(r),N(o)&&n.set(r,o)):n=this._instances,a=!1,s=[],l=!1,n.forEach(function(h){var d=h.find(function(p){return p.name===i});if(N(d)){var v=c._overrideInstance(d,t);v[2]&&(l=!0),v[1]?s.push(d.calcIndicator(c._chartStore.getDataList())):v[0]&&(a=!0)}}),l&&this._sort(),[4,Promise.all(s)];case 1:return u=f.sent(),[2,[a,u.includes(!0)]]}})})},e}(),sv=function(){function e(t){this._crosshair={},this._activeIcon=null,this._chartStore=t}return e.prototype.setCrosshair=function(t,r){var i=this._chartStore.getDataList(),n=t??{},o,a;ee(n.x)?(o=this._chartStore.getTimeScaleStore().coordinateToDataIndex(n.x),o<0?a=0:o>i.length-1?a=i.length-1:a=o):(o=i.length-1,a=o);var s=i[a],l=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(o),u={x:this._crosshair.x,y:this._crosshair.y,paneId:this._crosshair.paneId};this._crosshair=te(te({},n),{realX:l,kLineData:s,realDataIndex:o,dataIndex:a}),(u.x!==n.x||u.y!==n.y||u.paneId!==n.paneId)&&(s!==null&&this._chartStore.getChart().crosshairChange(this._crosshair),(r??!1)||this._chartStore.getChart().updatePane(1))},e.prototype.recalculateCrosshair=function(t){this.setCrosshair(this._crosshair,t)},e.prototype.getCrosshair=function(){return this._crosshair},e.prototype.setActiveIcon=function(t){this._activeIcon=t??null},e.prototype.getActiveIcon=function(){return this._activeIcon},e.prototype.clear=function(){this.setCrosshair({},!0),this.setActiveIcon()},e}(),lv={name:"fibonacciLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t,r=e.coordinates,i=e.bounding,n=e.overlay,o=e.precision,a=e.thousandsSeparator,s=e.decimalFoldThreshold,l=e.yAxis,u=n.points;if(r.length>0){var c=!((t=l==null?void 0:l.isInCandle())!==null&&t!==void 0)||t?o.price:o.excludePriceVolumeMax,f=[],h=[],d=0,v=i.width;if(r.length>1&&ee(u[0].value)&&ee(u[1].value)){var p=[1,.786,.618,.5,.382,.236,0],g=r[0].y-r[1].y,m=u[0].value-u[1].value;p.forEach(function(_){var S,y=r[1].y+g*_,w=je(He((((S=u[1].value)!==null&&S!==void 0?S:0)+m*_).toFixed(c),a),s);f.push({coordinates:[{x:d,y},{x:v,y}]}),h.push({x:d,y,text:"".concat(w," (").concat((_*100).toFixed(1),"%)"),baseline:"bottom"})})}return[{type:"line",attrs:f},{type:"text",isCheckEvent:!1,attrs:h}]}return[]}},uv={name:"horizontalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding,i={x:0,y:t[0].y};return N(t[1])&&t[0].x<t[1].x&&(i.x=r.width),[{type:"line",attrs:{coordinates:[t[0],i]}}]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].value=r.value,t[1].value=r.value},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,i=e.performPoint;t===2&&(r[0].value=i.value)}},cv={name:"horizontalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=[];return t.length===2&&r.push({coordinates:t}),[{type:"line",attrs:r}]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].value=r.value,t[1].value=r.value},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,i=e.performPoint;t===2&&(r[0].value=i.value)}},fv={name:"horizontalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:{coordinates:[{x:0,y:t[0].y},{x:r.width,y:t[0].y}]}}]}},ko=function(){function e(){this._children=[],this._callbacks=new Map}return e.prototype.registerEvent=function(t,r){return this._callbacks.set(t,r),this},e.prototype.onEvent=function(t,r,i){var n=this._callbacks.get(t);return N(n)&&this.checkEventOn(r)?n(r,i):!1},e.prototype.checkEventOn=function(t){var r,i;try{for(var n=Cr(this._children),o=n.next();!o.done;o=n.next()){var a=o.value;if(a.checkEventOn(t))return!0}}catch(s){r={error:s}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return!1},e.prototype.dispatchEvent=function(t,r,i){var n=this._children.length-1;if(n>-1){for(var o=n;o>-1;o--)if(this._children[o].dispatchEvent(t,r,i))return!0}return this.onEvent(t,r,i)},e.prototype.addChild=function(t){return this._children.push(t),this},e.prototype.clear=function(){this._children=[]},e}(),Ge=2,hv=function(e){pe(t,e);function t(r){var i=e.call(this)||this;return i.attrs=r.attrs,i.styles=r.styles,i}return t.prototype.checkEventOn=function(r){return this.checkEventOnImp(r,this.attrs,this.styles)},t.prototype.setAttrs=function(r){return this.attrs=r,this},t.prototype.setStyles=function(r){return this.styles=r,this},t.prototype.draw=function(r){this.drawImp(r,this.attrs,this.styles)},t.extend=function(r){var i=function(n){pe(o,n);function o(){return n!==null&&n.apply(this,arguments)||this}return o.prototype.checkEventOnImp=function(a,s,l){return r.checkEventOn(a,s,l)},o.prototype.drawImp=function(a,s,l){r.draw(a,s,l)},o}(t);return i},t}(ko);function Xl(e,t){var r=[];r=r.concat(t);for(var i=0;i<r.length;i++){var n=r[i].coordinates;if(n.length>1)for(var o=1;o<n.length;o++){var a=n[o-1],s=n[o];if(a.x===s.x){if(Math.abs(a.y-e.y)+Math.abs(s.y-e.y)-Math.abs(a.y-s.y)<Ge+Ge&&Math.abs(e.x-a.x)<Ge)return!0}else{var l=fn(a,s),u=Fo(l,e),c=Math.abs(u-e.y);if(Math.abs(a.x-e.x)+Math.abs(s.x-e.x)-Math.abs(a.x-s.x)<Ge+Ge&&c*c/(l[0]*l[0]+1)<Ge*Ge)return!0}}}return!1}function Fo(e,t){return e!==null?t.x*e[0]+e[1]:t.y}function vi(e,t,r){var i=fn(e,t);return Fo(i,r)}function fn(e,t){var r=e.x-t.x;if(r!==0){var i=(e.y-t.y)/r,n=e.y-i*e.x;return[i,n]}return null}function $l(e,t,r){var i=t.length,n=ee(r)?r>0&&r<1?r:0:r?.5:0;if(n>0&&i>2){for(var o=t[0].x,a=t[0].y,s=1;s<i-1;s++){var l=t[s-1],u=t[s],c=t[s+1],f=u.x-l.x,h=u.y-l.y,d=c.x-u.x,v=c.y-u.y,p=c.x-l.x,g=c.y-l.y,m=Math.sqrt(f*f+h*h),_=Math.sqrt(d*d+v*v),S=_/(_+m),y=u.x+p*n*S,w=u.y+g*n*S;y=Math.min(y,Math.max(c.x,u.x)),w=Math.min(w,Math.max(c.y,u.y)),y=Math.max(y,Math.min(c.x,u.x)),w=Math.max(w,Math.min(c.y,u.y)),p=y-u.x,g=w-u.y;var C=u.x-p*m/_,I=u.y-g*m/_;C=Math.min(C,Math.max(l.x,u.x)),I=Math.min(I,Math.max(l.y,u.y)),C=Math.max(C,Math.min(l.x,u.x)),I=Math.max(I,Math.min(l.y,u.y)),p=u.x-C,g=u.y-I,y=u.x+p*_/m,w=u.y+g*_/m,e.bezierCurveTo(o,a,C,I,u.x,u.y),o=y,a=w}var T=t[i-1];e.bezierCurveTo(o,a,T.x,T.y,T.x,T.y)}else for(var s=1;s<i;s++)e.lineTo(t[s].x,t[s].y)}function Yl(e,t,r){var i=[];i=i.concat(t);var n=r.style,o=n===void 0?Te.Solid:n,a=r.smooth,s=a===void 0?!1:a,l=r.size,u=l===void 0?1:l,c=r.color,f=c===void 0?"currentColor":c,h=r.dashedValue,d=h===void 0?[2,2]:h;e.lineWidth=u,e.strokeStyle=f,o===Te.Dashed?e.setLineDash(d):e.setLineDash([]);var v=u%2===1?.5:0;i.forEach(function(p){var g=p.coordinates;g.length>1&&(g.length===2&&(g[0].x===g[1].x||g[0].y===g[1].y)?(e.beginPath(),g[0].x===g[1].x?(e.moveTo(g[0].x+v,g[0].y),e.lineTo(g[1].x+v,g[1].y)):(e.moveTo(g[0].x,g[0].y+v),e.lineTo(g[1].x,g[1].y+v)),e.stroke(),e.closePath()):(e.save(),u%2===1&&e.translate(.5,.5),e.beginPath(),e.moveTo(g[0].x,g[0].y),$l(e,g,s),e.stroke(),e.closePath(),e.restore()))})}var dv={name:"line",checkEventOn:Xl,draw:function(e,t,r){Yl(e,t,r)}};function Ul(e,t,r){var i=r??0,n=[];if(e.length>1)if(e[0].x===e[1].x){var o=0,a=t.height;if(n.push({coordinates:[{x:e[0].x,y:o},{x:e[0].x,y:a}]}),e.length>2){n.push({coordinates:[{x:e[2].x,y:o},{x:e[2].x,y:a}]});for(var s=e[0].x-e[2].x,l=0;l<i;l++){var u=s*(l+1);n.push({coordinates:[{x:e[0].x+u,y:o},{x:e[0].x+u,y:a}]})}}}else{var c=0,f=t.width,h=fn(e[0],e[1]),d=h[0],v=h[1];if(n.push({coordinates:[{x:c,y:c*d+v},{x:f,y:f*d+v}]}),e.length>2){var p=e[2].y-d*e[2].x;n.push({coordinates:[{x:c,y:c*d+p},{x:f,y:f*d+p}]});for(var s=v-p,l=0;l<i;l++){var g=v+s*(l+1);n.push({coordinates:[{x:c,y:c*d+g},{x:f,y:f*d+g}]})}}}return n}var vv={name:"parallelStraightLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:Ul(t,r)}]}},pv={name:"priceChannelLine",totalStep:4,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:Ul(t,r,1)}]}},gv={name:"priceLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t,r=e.coordinates,i=e.bounding,n=e.precision,o=e.overlay,a=e.thousandsSeparator,s=e.decimalFoldThreshold,l=e.yAxis,u=o.points[0].value,c=u===void 0?0:u,f=!((t=l==null?void 0:l.isInCandle())!==null&&t!==void 0)||t?n.price:n.excludePriceVolumeMax;return[{type:"line",attrs:{coordinates:[r[0],{x:i.width,y:r[0].y}]}},{type:"text",ignoreEvent:!0,attrs:{x:r[0].x,y:r[0].y,text:je(He(c.toFixed(f),a),s),baseline:"bottom"}}]}};function mv(e,t){if(e.length>1){var r=void 0;return e[0].x===e[1].x&&e[0].y!==e[1].y?e[0].y<e[1].y?r={x:e[0].x,y:t.height}:r={x:e[0].x,y:0}:e[0].x>e[1].x?r={x:0,y:vi(e[0],e[1],{x:0,y:e[0].y})}:r={x:t.width,y:vi(e[0],e[1],{x:t.width,y:e[0].y})},{coordinates:[e[0],r]}}return[]}var _v={name:"rayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:mv(t,r)}]}},yv={name:"segment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]}},bv={name:"straightLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return t.length===2?t[0].x===t[1].x?[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:r.height}]}}]:[{type:"line",attrs:{coordinates:[{x:0,y:vi(t[0],t[1],{x:0,y:t[0].y})},{x:r.width,y:vi(t[0],t[1],{x:r.width,y:t[0].y})}]}}]:[]}},Sv={name:"verticalRayLine",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;if(t.length===2){var i={x:t[0].x,y:0};return t[0].y<t[1].y&&(i.y=r.height),[{type:"line",attrs:{coordinates:[t[0],i]}}]}return[]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].timestamp=r.timestamp,t[0].dataIndex=r.dataIndex,t[1].timestamp=r.timestamp,t[1].dataIndex=r.dataIndex},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,i=e.performPoint;t===2&&(r[0].timestamp=i.timestamp,r[0].dataIndex=i.dataIndex)}},wv={name:"verticalSegment",totalStep:3,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates;return t.length===2?[{type:"line",attrs:{coordinates:t}}]:[]},performEventPressedMove:function(e){var t=e.points,r=e.performPoint;t[0].timestamp=r.timestamp,t[0].dataIndex=r.dataIndex,t[1].timestamp=r.timestamp,t[1].dataIndex=r.dataIndex},performEventMoveForDrawing:function(e){var t=e.currentStep,r=e.points,i=e.performPoint;t===2&&(r[0].timestamp=i.timestamp,r[0].dataIndex=i.dataIndex)}},xv={name:"verticalStraightLine",totalStep:2,needDefaultPointFigure:!0,needDefaultXAxisFigure:!0,needDefaultYAxisFigure:!0,createPointFigures:function(e){var t=e.coordinates,r=e.bounding;return[{type:"line",attrs:{coordinates:[{x:t[0].x,y:0},{x:t[0].x,y:r.height}]}}]}},Cv={name:"simpleAnnotation",totalStep:2,styles:{line:{style:Te.Dashed}},createPointFigures:function(e){var t,r=e.overlay,i=e.coordinates,n;N(r.extendData)&&(Nt(r.extendData)?n=r.extendData(r):n=(t=r.extendData)!==null&&t!==void 0?t:"");var o=i[0].x,a=i[0].y-6,s=a-50,l=s-5;return[{type:"line",attrs:{coordinates:[{x:o,y:a},{x:o,y:s}]},ignoreEvent:!0},{type:"polygon",attrs:{coordinates:[{x:o,y:s},{x:o-4,y:l},{x:o+4,y:l}]},ignoreEvent:!0},{type:"text",attrs:{x:o,y:l,text:n??"",align:"center",baseline:"bottom"},ignoreEvent:!0}]}},Ev={name:"simpleTag",totalStep:2,styles:{line:{style:Te.Dashed}},createPointFigures:function(e){var t=e.bounding,r=e.coordinates;return{type:"line",attrs:{coordinates:[{x:0,y:r[0].y},{x:t.width,y:r[0].y}]},ignoreEvent:!0}},createYAxisFigures:function(e){var t,r,i=e.overlay,n=e.coordinates,o=e.bounding,a=e.yAxis,s=e.precision,l=(t=a==null?void 0:a.isFromZero())!==null&&t!==void 0?t:!1,u,c;l?(u="left",c=0):(u="right",c=o.width);var f;return N(i.extendData)&&(Nt(i.extendData)?f=i.extendData(i):f=(r=i.extendData)!==null&&r!==void 0?r:""),!N(f)&&ee(i.points[0].value)&&(f=Be(i.points[0].value,s.price)),{type:"text",attrs:{x:c,y:n[0].y,text:f??"",align:u,baseline:"middle"}}}},Ro={},Iv=[lv,uv,cv,fv,vv,pv,gv,_v,yv,bv,Sv,wv,xv,Cv,Ev];Iv.forEach(function(e){Ro[e.name]=Wl.extend(e)});function mg(e){Ro[e.name]=Wl.extend(e)}function Tv(e){var t;return(t=Ro[e])!==null&&t!==void 0?t:null}var Pv=30,Mv=100,Ie={CANDLE:"candle_pane",INDICATOR:"indicator_pane_",X_AXIS:"x_axis_pane"},Av=function(){function e(t){this._instances=new Map,this._progressInstanceInfo=null,this._pressedInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._hoverInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._clickInstanceInfo={paneId:"",instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},this._chartStore=t}return e.prototype._overrideInstance=function(t,r){var i=r.id,n=r.groupId,o=r.points,a=r.styles,s=r.lock,l=r.visible,u=r.zLevel,c=r.mode,f=r.modeSensitivity,h=r.extendData,d=r.onDrawStart,v=r.onDrawing,p=r.onDrawEnd,g=r.onClick,m=r.onDoubleClick,_=r.onRightClick,S=r.onPressedMoveStart,y=r.onPressedMoving,w=r.onPressedMoveEnd,C=r.onMouseEnter,I=r.onMouseLeave,T=r.onRemoved,x=r.onSelected,M=r.onDeselected,D=!1,P=!1;return fe(i)&&t.setId(i),fe(n)&&t.setGroupId(n),wt(o)&&t.setPoints(o)&&(D=!0),N(a)&&t.setStyles(a)&&(D=!0),or(s)&&t.setLock(s),or(l)&&t.setVisible(l)&&(D=!0),ee(u)&&t.setZLevel(u)&&(D=!0,P=!0),N(c)&&t.setMode(c),ee(f)&&t.setModeSensitivity(f),h!==void 0&&t.setExtendData(h)&&(D=!0),d!==void 0&&t.setOnDrawStartCallback(d),v!==void 0&&t.setOnDrawingCallback(v),p!==void 0&&t.setOnDrawEndCallback(p),g!==void 0&&t.setOnClickCallback(g),m!==void 0&&t.setOnDoubleClickCallback(m),_!==void 0&&t.setOnRightClickCallback(_),S!==void 0&&t.setOnPressedMoveStartCallback(S),y!==void 0&&t.setOnPressedMovingCallback(y),w!==void 0&&t.setOnPressedMoveEndCallback(w),C!==void 0&&t.setOnMouseEnterCallback(C),I!==void 0&&t.setOnMouseLeaveCallback(I),T!==void 0&&t.setOnRemovedCallback(T),x!==void 0&&t.setOnSelectedCallback(x),M!==void 0&&t.setOnDeselectedCallback(M),[D,P]},e.prototype.getInstanceById=function(t){var r,i;try{for(var n=Cr(this._instances),o=n.next();!o.done;o=n.next()){var a=o.value,s=a[1],l=s.find(function(u){return u.id===t});if(N(l))return l}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return this._progressInstanceInfo!==null&&this._progressInstanceInfo.instance.id===t?this._progressInstanceInfo.instance:null},e.prototype._sort=function(t){var r;fe(t)?(r=this._instances.get(t))===null||r===void 0||r.sort(function(i,n){return i.zLevel-n.zLevel}):this._instances.forEach(function(i){i.sort(function(n,o){return n.zLevel-o.zLevel})})},e.prototype.addInstances=function(t,r,i){var n=this,o=t.map(function(s){var l,u,c,f,h=(l=s.id)!==null&&l!==void 0?l:zl(Sd);if(n.getInstanceById(h)===null){var d=Tv(s.name);if(d!==null){var v=new d;v.setPaneId(r);var p=(u=s.groupId)!==null&&u!==void 0?u:h;return s.id=h,s.groupId=p,n._overrideInstance(v,s),v.isDrawing()?n._progressInstanceInfo={paneId:r,instance:v,appointPaneFlag:i}:(n._instances.has(r)||n._instances.set(r,[]),(c=n._instances.get(r))===null||c===void 0||c.push(v)),v.isStart()&&((f=v.onDrawStart)===null||f===void 0||f.call(v,{overlay:v})),h}}return null});if(o.some(function(s){return s!==null})){this._sort();var a=this._chartStore.getChart();a.updatePane(1,r),a.updatePane(1,Ie.X_AXIS)}return o},e.prototype.getProgressInstanceInfo=function(){return this._progressInstanceInfo},e.prototype.progressInstanceComplete=function(){var t;if(this._progressInstanceInfo!==null){var r=this._progressInstanceInfo,i=r.instance,n=r.paneId;i.isDrawing()||(this._instances.has(n)||this._instances.set(n,[]),(t=this._instances.get(n))===null||t===void 0||t.push(i),this._sort(n),this._progressInstanceInfo=null)}},e.prototype.updateProgressInstanceInfo=function(t,r){this._progressInstanceInfo!==null&&(or(r)&&r&&(this._progressInstanceInfo.appointPaneFlag=r),this._progressInstanceInfo.paneId=t,this._progressInstanceInfo.instance.setPaneId(t))},e.prototype.getInstances=function(t){var r;if(!fe(t)){var i=[];return this._instances.forEach(function(n){i=i.concat(n)}),i}return(r=this._instances.get(t))!==null&&r!==void 0?r:[]},e.prototype.override=function(t){var r=this,i=t.id,n=t.groupId,o=t.name,a=!1,s=!1,l=function(d){var v=r._overrideInstance(d,t);v[0]&&(a=!0),v[1]&&(s=!0)};if(fe(i)){var u=this.getInstanceById(i);u!==null&&l(u)}else{var c=fe(o),f=fe(n);if(this._instances.forEach(function(d){d.forEach(function(v){(c&&v.name===o||f&&v.groupId===n||!c&&!f)&&l(v)})}),this._progressInstanceInfo!==null){var h=this._progressInstanceInfo.instance;(c&&h.name===o||f&&h.groupId===n||!c&&!f)&&l(h)}}s&&this._sort(),a&&this._chartStore.getChart().updatePane(1)},e.prototype.removeInstance=function(t){var r,i,n,o=function(p,g){if(fe(p.id)){if(g.id!==p.id)return!1}else if(fe(p.groupId)){if(g.groupId!==p.groupId)return!1}else if(fe(p.name)&&g.name!==p.name)return!1;return!0},a=[],s=N(t);if(this._progressInstanceInfo!==null){var l=this._progressInstanceInfo.instance;(!s||s&&o(t,l))&&(a.push(this._progressInstanceInfo.paneId),(n=l.onRemoved)===null||n===void 0||n.call(l,{overlay:l}),this._progressInstanceInfo=null)}if(s){var u=new Map,c=function(p){var g=p[1],m=g.filter(function(_){var S;return o(t,_)?(a.includes(p[0])||a.push(p[0]),(S=_.onRemoved)===null||S===void 0||S.call(_,{overlay:_}),!1):!0});m.length>0&&u.set(p[0],m)};try{for(var f=Cr(this._instances),h=f.next();!h.done;h=f.next()){var d=h.value;c(d)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}this._instances=u}else this._instances.forEach(function(p,g){a.push(g),p.forEach(function(m){var _;(_=m.onRemoved)===null||_===void 0||_.call(m,{overlay:m})})}),this._instances.clear();if(a.length>0){var v=this._chartStore.getChart();a.forEach(function(p){v.updatePane(1,p)}),v.updatePane(1,Ie.X_AXIS)}},e.prototype.setPressedInstanceInfo=function(t){this._pressedInstanceInfo=t},e.prototype.getPressedInstanceInfo=function(){return this._pressedInstanceInfo},e.prototype.updatePointPosition=function(t,r){if(t>0){var i=this._chartStore.getDataList();this._instances.forEach(function(n){n.forEach(function(o){var a=o.points;a.forEach(function(s){if(!N(s.timestamp)&&N(s.dataIndex)){r===St.Forward&&(s.dataIndex=s.dataIndex+t);var l=i[s.dataIndex];s.timestamp=l==null?void 0:l.timestamp}})})})}},e.prototype.setHoverInstanceInfo=function(t,r){var i,n,o=this._hoverInstanceInfo,a=o.instance,s=o.figureType,l=o.figureKey,u=o.figureIndex;if(((a==null?void 0:a.id)!==((i=t.instance)===null||i===void 0?void 0:i.id)||s!==t.figureType||u!==t.figureIndex)&&(this._hoverInstanceInfo=t,(a==null?void 0:a.id)!==((n=t.instance)===null||n===void 0?void 0:n.id))){var c=!1,f=!1;a!==null&&(f=!0,Nt(a.onMouseLeave)&&(a.onMouseLeave(te({overlay:a,figureKey:l,figureIndex:u},r)),c=!0)),t.instance!==null&&(f=!0,t.instance.setZLevel(wd),Nt(t.instance.onMouseEnter)&&(t.instance.onMouseEnter(te({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},r)),c=!0)),f&&this._sort(),c||this._chartStore.getChart().updatePane(1)}},e.prototype.getHoverInstanceInfo=function(){return this._hoverInstanceInfo},e.prototype.setClickInstanceInfo=function(t,r){var i,n,o,a,s,l,u,c,f,h=this._clickInstanceInfo,d=h.paneId,v=h.instance,p=h.figureType,g=h.figureKey,m=h.figureIndex;if((n=(i=t.instance)===null||i===void 0?void 0:i.isDrawing())!==null&&n!==void 0&&n||(a=(o=t.instance)===null||o===void 0?void 0:o.onClick)===null||a===void 0||a.call(o,te({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},r)),((v==null?void 0:v.id)!==((s=t.instance)===null||s===void 0?void 0:s.id)||p!==t.figureType||m!==t.figureIndex)&&(this._clickInstanceInfo=t,(v==null?void 0:v.id)!==((l=t.instance)===null||l===void 0?void 0:l.id))){(u=v==null?void 0:v.onDeselected)===null||u===void 0||u.call(v,te({overlay:v,figureKey:g,figureIndex:m},r)),(f=(c=t.instance)===null||c===void 0?void 0:c.onSelected)===null||f===void 0||f.call(c,te({overlay:t.instance,figureKey:t.figureKey,figureIndex:t.figureIndex},r));var _=this._chartStore.getChart();_.updatePane(1,t.paneId),d!==t.paneId&&_.updatePane(1,d),_.updatePane(1,Ie.X_AXIS)}},e.prototype.getClickInstanceInfo=function(){return this._clickInstanceInfo},e.prototype.isEmpty=function(){return this._instances.size===0&&this._progressInstanceInfo===null},e.prototype.isDrawing=function(){var t,r;return this._progressInstanceInfo!==null&&((r=(t=this._progressInstanceInfo)===null||t===void 0?void 0:t.instance.isDrawing())!==null&&r!==void 0?r:!1)},e}(),Dv=function(){function e(){this._actions=new Map}return e.prototype.execute=function(t,r){var i;(i=this._actions.get(t))===null||i===void 0||i.execute(r)},e.prototype.subscribe=function(t,r){var i;this._actions.has(t)||this._actions.set(t,new yd),(i=this._actions.get(t))===null||i===void 0||i.subscribe(r)},e.prototype.unsubscribe=function(t,r){var i=this._actions.get(t);N(i)&&(i.unsubscribe(r),i.isEmpty()&&this._actions.delete(t))},e.prototype.has=function(t){var r=this._actions.get(t);return N(r)&&!r.isEmpty()},e}(),kv={grid:{horizontal:{color:"#EDEDED"},vertical:{color:"#EDEDED"}},candle:{priceMark:{high:{color:"#76808F"},low:{color:"#76808F"}},tooltip:{rect:{color:"#FEFEFE",borderColor:"#F2F3F5"},text:{color:"#76808F"}}},indicator:{tooltip:{text:{color:"#76808F"}}},xAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},yAxis:{axisLine:{color:"#DDDDDD"},tickText:{color:"#76808F"},tickLine:{color:"#DDDDDD"}},separator:{color:"#DDDDDD"},crosshair:{horizontal:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}},vertical:{line:{color:"#76808F"},text:{borderColor:"#686D76",backgroundColor:"#686D76"}}}},Fv={grid:{horizontal:{color:"#292929"},vertical:{color:"#292929"}},candle:{priceMark:{high:{color:"#929AA5"},low:{color:"#929AA5"}},tooltip:{rect:{color:"rgba(10, 10, 10, .6)",borderColor:"rgba(10, 10, 10, .6)"},text:{color:"#929AA5"}}},indicator:{tooltip:{text:{color:"#929AA5"}}},xAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},yAxis:{axisLine:{color:"#333333"},tickText:{color:"#929AA5"},tickLine:{color:"#333333"}},separator:{color:"#333333"},crosshair:{horizontal:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}},vertical:{line:{color:"#929AA5"},text:{borderColor:"#373a40",backgroundColor:"#373a40"}}}},Rv={light:kv,dark:Fv};function Kl(e){var t;return(t=Rv[e])!==null&&t!==void 0?t:null}var Ov=function(){function e(t,r){this._styles=gd(),this._customApi=xd(),this._locale=Cd,this._precision={price:2,volume:0},this._thousandsSeparator=",",this._decimalFoldThreshold=3,this._dataList=[],this._loadMoreCallback=null,this._loadDataCallback=null,this._loading=!0,this._forwardMore=!0,this._backwardMore=!0,this._timeScaleStore=new Ad(this),this._indicatorStore=new av(this),this._overlayStore=new Av(this),this._tooltipStore=new sv(this),this._actionStore=new Dv,this._visibleDataList=[],this._chart=t,this.setOptions(r)}return e.prototype.adjustVisibleDataList=function(){this._visibleDataList=[];for(var t=this._timeScaleStore.getVisibleRange(),r=t.realFrom,i=t.realTo,n=r;n<i;n++){var o=this._dataList[n],a=this._timeScaleStore.dataIndexToCoordinate(n);this._visibleDataList.push({dataIndex:n,x:a,data:o})}},e.prototype.setOptions=function(t){var r,i,n,o;if(N(t)){var a=t.locale,s=t.timezone,l=t.styles,u=t.customApi,c=t.thousandsSeparator,f=t.decimalFoldThreshold;if(fe(a)&&(this._locale=a),fe(s)&&this._timeScaleStore.setTimezone(s),N(l)){var h=null;fe(l)?h=Kl(l):h=l,pt(this._styles,h),wt((i=(r=h==null?void 0:h.candle)===null||r===void 0?void 0:r.tooltip)===null||i===void 0?void 0:i.custom)&&(this._styles.candle.tooltip.custom=(o=(n=h==null?void 0:h.candle)===null||n===void 0?void 0:n.tooltip)===null||o===void 0?void 0:o.custom)}N(u)&&pt(this._customApi,u),fe(c)&&(this._thousandsSeparator=c),ee(f)&&f>0&&(this._decimalFoldThreshold=f)}return this},e.prototype.getStyles=function(){return this._styles},e.prototype.getLocale=function(){return this._locale},e.prototype.getCustomApi=function(){return this._customApi},e.prototype.getThousandsSeparator=function(){return this._thousandsSeparator},e.prototype.getDecimalFoldThreshold=function(){return this._decimalFoldThreshold},e.prototype.getPrecision=function(){return this._precision},e.prototype.setPrecision=function(t){return this._precision=t,this._indicatorStore.synchronizeSeriesPrecision(),this},e.prototype.getDataList=function(){return this._dataList},e.prototype.getVisibleFirstData=function(){var t,r=this._timeScaleStore.getVisibleRange().from;return(t=this._dataList[r])!==null&&t!==void 0?t:null},e.prototype.getVisibleDataList=function(){return this._visibleDataList},e.prototype.addData=function(t,r,i){return Or(this,void 0,void 0,function(){var n,o,a,s,l,u,c;return Lr(this,function(f){switch(f.label){case 0:if(n=!1,o=!1,a=0,wt(t)){switch(a=t.length,r){case St.Init:{this.clear(),this._dataList=t,this._forwardMore=i??!0,this._timeScaleStore.resetOffsetRightDistance(),o=!0;break}case St.Backward:{this._dataList=this._dataList.concat(t),this._backwardMore=i??!1,o=a>0;break}case St.Forward:this._dataList=t.concat(this._dataList),this._forwardMore=i??!1,o=a>0}this._loading=!1,n=!0}else s=this._dataList.length,l=t.timestamp,u=qe(this._dataList[s-1],"timestamp",0),l>u?(this._dataList.push(t),c=this._timeScaleStore.getLastBarRightSideDiffBarCount(),c<0&&this._timeScaleStore.setLastBarRightSideDiffBarCount(--c),a=1,n=!0,o=!0):l===u&&(this._dataList[s-1]=t,n=!0,o=!0);if(!n)return[3,5];f.label=1;case 1:return f.trys.push([1,4,,5]),this._overlayStore.updatePointPosition(a,r),o?(this._timeScaleStore.adjustVisibleRange(),this._tooltipStore.recalculateCrosshair(!0),[4,this._indicatorStore.calcInstance()]):[3,3];case 2:f.sent(),this._chart.adjustPaneViewport(!1,!0,!0,!0),f.label=3;case 3:return this._actionStore.execute(Ct.OnDataReady),[3,5];case 4:return f.sent(),[3,5];case 5:return[2]}})})},e.prototype.setLoadMoreCallback=function(t){this._loadMoreCallback=t},e.prototype.executeLoadMoreCallback=function(t){this._forwardMore&&!this._loading&&N(this._loadMoreCallback)&&(this._loading=!0,this._loadMoreCallback(t))},e.prototype.setLoadDataCallback=function(t){this._loadDataCallback=t},e.prototype.executeLoadDataCallback=function(t){var r=this;if(!this._loading&&N(this._loadDataCallback)&&(this._forwardMore&&t.type===St.Forward||this._backwardMore&&t.type===St.Backward)){var i=function(n,o){r.addData(n,t.type,o).then(function(){}).catch(function(){})};this._loading=!0,this._loadDataCallback(te(te({},t),{callback:i}))}},e.prototype.clear=function(){this._forwardMore=!0,this._backwardMore=!0,this._loading=!0,this._dataList=[],this._visibleDataList=[],this._timeScaleStore.clear(),this._tooltipStore.clear()},e.prototype.getTimeScaleStore=function(){return this._timeScaleStore},e.prototype.getIndicatorStore=function(){return this._indicatorStore},e.prototype.getOverlayStore=function(){return this._overlayStore},e.prototype.getTooltipStore=function(){return this._tooltipStore},e.prototype.getActionStore=function(){return this._actionStore},e.prototype.getChart=function(){return this._chart},e}(),me={MAIN:"main",X_AXIS:"xAxis",Y_AXIS:"yAxis",SEPARATOR:"separator"},ai=7;function Lv(){return Or(this,void 0,void 0,function(){return Lr(this,function(e){switch(e.label){case 0:return[4,new Promise(function(t){var r=new ResizeObserver(function(i){t(i.every(function(n){return"devicePixelContentBoxSize"in n})),r.disconnect()});r.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})];case 1:return[2,e.sent()]}})})}var Za=function(){function e(t,r){var i=this;this._supportedDevicePixelContentBox=!1,this._width=0,this._height=0,this._pixelWidth=0,this._pixelHeight=0,this._nextPixelWidth=0,this._nextPixelHeight=0,this._requestAnimationId=Dn,this._mediaQueryListener=function(){var n=ar(i._element);i._nextPixelWidth=Math.round(i._element.clientWidth*n),i._nextPixelHeight=Math.round(i._element.clientHeight*n),i._resetPixelRatio()},this._listener=r,this._element=$t("canvas",t),this._ctx=this._element.getContext("2d",{willReadFrequently:!0}),Lv().then(function(n){i._supportedDevicePixelContentBox=n,n?(i._resizeObserver=new ResizeObserver(function(o){var a,s=o.find(function(u){return u.target===i._element}),l=(a=s==null?void 0:s.devicePixelContentBoxSize)===null||a===void 0?void 0:a[0];N(l)&&(i._nextPixelWidth=l.inlineSize,i._nextPixelHeight=l.blockSize,(i._pixelWidth!==i._nextPixelWidth||i._pixelHeight!==i._nextPixelHeight)&&i._resetPixelRatio())}),i._resizeObserver.observe(i._element,{box:"device-pixel-content-box"})):(i._mediaQueryList=window.matchMedia("(resolution: ".concat(ar(i._element),"dppx)")),i._mediaQueryList.addListener(i._mediaQueryListener))}).catch(function(n){return!1})}return e.prototype._resetPixelRatio=function(){var t=this;this._executeListener(function(){var r=t._element.clientWidth,i=t._element.clientHeight,n=t._nextPixelWidth/r,o=t._nextPixelHeight/i;t._width=r,t._height=i,t._pixelWidth=t._nextPixelWidth,t._pixelHeight=t._nextPixelHeight,t._element.width=t._nextPixelWidth,t._element.height=t._nextPixelHeight,t._ctx.scale(n,o)})},e.prototype._executeListener=function(t){var r=this;this._requestAnimationId===Dn&&(this._requestAnimationId=Gi(function(){r._ctx.clearRect(0,0,r._width,r._height),t==null||t(),r._listener(),r._requestAnimationId=Dn}))},e.prototype.update=function(t,r){if(this._width!==t||this._height!==r){if(this._element.style.width="".concat(t,"px"),this._element.style.height="".concat(r,"px"),!this._supportedDevicePixelContentBox){var i=ar(this._element);this._nextPixelWidth=Math.round(t*i),this._nextPixelHeight=Math.round(r*i),this._resetPixelRatio()}}else this._executeListener()},e.prototype.getElement=function(){return this._element},e.prototype.getContext=function(){return this._ctx},e.prototype.destroy=function(){var t,r;(t=this._resizeObserver)===null||t===void 0||t.unobserve(this._element),(r=this._mediaQueryList)===null||r===void 0||r.removeListener(this._mediaQueryListener)},e}();function Gl(e){var t={width:0,height:0,left:0,right:0,top:0,bottom:0};return N(e)&&pt(t,e),t}var ql=function(e){pe(t,e);function t(r,i){var n=e.call(this)||this;return n._bounding=Gl(),n._pane=i,n.init(r),n}return t.prototype.init=function(r){this._rootContainer=r,this._container=this.createContainer(),r.appendChild(this._container)},t.prototype.setBounding=function(r){return pt(this._bounding,r),this},t.prototype.getContainer=function(){return this._container},t.prototype.getBounding=function(){return this._bounding},t.prototype.getPane=function(){return this._pane},t.prototype.update=function(r){this.updateImp(this._container,this._bounding,r??3)},t.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},t}(ko),Oo=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r){var i=this;e.prototype.init.call(this,r),this._mainCanvas=new Za({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateMain(i._mainCanvas.getContext())}),this._overlayCanvas=new Za({position:"absolute",top:"0",left:"0",zIndex:"2",boxSizing:"border-box"},function(){i.updateOverlay(i._overlayCanvas.getContext())});var n=this.getContainer();n.appendChild(this._mainCanvas.getElement()),n.appendChild(this._overlayCanvas.getElement())},t.prototype.createContainer=function(){return $t("div",{margin:"0",padding:"0",position:"absolute",top:"0",overflow:"hidden",boxSizing:"border-box",zIndex:"1"})},t.prototype.updateImp=function(r,i,n){var o=i.width,a=i.height,s=i.left;r.style.left="".concat(s,"px");var l=n,u=r.clientWidth,c=r.clientHeight;switch((o!==u||a!==c)&&(r.style.width="".concat(o,"px"),r.style.height="".concat(a,"px"),l=3),l){case 0:{this._mainCanvas.update(o,a);break}case 1:{this._overlayCanvas.update(o,a);break}case 3:case 4:{this._mainCanvas.update(o,a),this._overlayCanvas.update(o,a);break}}},t.prototype.destroy=function(){this._mainCanvas.destroy(),this._overlayCanvas.destroy()},t.prototype.getImage=function(r){var i=this.getBounding(),n=i.width,o=i.height,a=$t("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=ar(a);return a.width=n*l,a.height=o*l,s.scale(l,l),s.drawImage(this._mainCanvas.getElement(),0,0,n,o),r&&s.drawImage(this._overlayCanvas.getElement(),0,0,n,o),a},t}(ql);function jr(e){return e==="transparent"||e==="none"||/^[rR][gG][Bb][Aa]\(([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)[\s]*,){3}[\s]*0[\s]*\)$/.test(e)||/^[hH][Ss][Ll][Aa]\(([\s]*(360｜3[0-5][0-9]|[012]?[0-9][0-9]?)[\s]*,)([\s]*((100|[0-9][0-9]?)%|0)[\s]*,){2}([\s]*0[\s]*)\)$/.test(e)}function Zl(e,t){var r=[];r=r.concat(t);for(var i=0;i<r.length;i++){var n=r[i],o=n.x,a=n.y,s=n.r,l=e.x-o,u=e.y-a;if(!(l*l+u*u>s*s))return!0}return!1}function Jl(e,t,r){var i=[];i=i.concat(t);var n=r.style,o=n===void 0?Ce.Fill:n,a=r.color,s=a===void 0?"currentColor":a,l=r.borderSize,u=l===void 0?1:l,c=r.borderColor,f=c===void 0?"currentColor":c,h=r.borderStyle,d=h===void 0?Te.Solid:h,v=r.borderDashedValue,p=v===void 0?[2,2]:v,g=(o===Ce.Fill||r.style===Ce.StrokeFill)&&(!fe(s)||!jr(s));g&&(e.fillStyle=s,i.forEach(function(m){var _=m.x,S=m.y,y=m.r;e.beginPath(),e.arc(_,S,y,0,Math.PI*2),e.closePath(),e.fill()})),(o===Ce.Stroke||r.style===Ce.StrokeFill)&&u>0&&!jr(f)&&(e.strokeStyle=f,e.lineWidth=u,d===Te.Dashed?e.setLineDash(p):e.setLineDash([]),i.forEach(function(m){var _=m.x,S=m.y,y=m.r;(!g||y>u)&&(e.beginPath(),e.arc(_,S,y,0,Math.PI*2),e.closePath(),e.stroke())}))}var Bv={name:"circle",checkEventOn:Zl,draw:function(e,t,r){Jl(e,t,r)}};function Ql(e,t){var r=[];r=r.concat(t);for(var i=0;i<r.length;i++){for(var n=!1,o=r[i].coordinates,a=0,s=o.length-1;a<o.length;s=a++)o[a].y>e.y!=o[s].y>e.y&&e.x<(o[s].x-o[a].x)*(e.y-o[a].y)/(o[s].y-o[a].y)+o[a].x&&(n=!n);if(n)return!0}return!1}function eu(e,t,r){var i=[];i=i.concat(t);var n=r.style,o=n===void 0?Ce.Fill:n,a=r.color,s=a===void 0?"currentColor":a,l=r.borderSize,u=l===void 0?1:l,c=r.borderColor,f=c===void 0?"currentColor":c,h=r.borderStyle,d=h===void 0?Te.Solid:h,v=r.borderDashedValue,p=v===void 0?[2,2]:v;(o===Ce.Fill||r.style===Ce.StrokeFill)&&(!fe(s)||!jr(s))&&(e.fillStyle=s,i.forEach(function(g){var m=g.coordinates;e.beginPath(),e.moveTo(m[0].x,m[0].y);for(var _=1;_<m.length;_++)e.lineTo(m[_].x,m[_].y);e.closePath(),e.fill()})),(o===Ce.Stroke||r.style===Ce.StrokeFill)&&u>0&&!jr(f)&&(e.strokeStyle=f,e.lineWidth=u,d===Te.Dashed?e.setLineDash(p):e.setLineDash([]),i.forEach(function(g){var m=g.coordinates;e.beginPath(),e.moveTo(m[0].x,m[0].y);for(var _=1;_<m.length;_++)e.lineTo(m[_].x,m[_].y);e.closePath(),e.stroke()}))}var Nv={name:"polygon",checkEventOn:Ql,draw:function(e,t,r){eu(e,t,r)}};function tu(e,t){var r=[];r=r.concat(t);for(var i=0;i<r.length;i++){var n=r[i],o=n.x,a=n.width;a<Ge*2&&(o-=Ge,a=Ge*2);var s=n.y,l=n.height;if(l<Ge*2&&(s-=Ge,l=Ge*2),e.x>=o&&e.x<=o+a&&e.y>=s&&e.y<=s+l)return!0}return!1}function Lo(e,t,r){var i,n=[];n=n.concat(t);var o=r.style,a=o===void 0?Ce.Fill:o,s=r.color,l=s===void 0?"transparent":s,u=r.borderSize,c=u===void 0?1:u,f=r.borderColor,h=f===void 0?"transparent":f,d=r.borderStyle,v=d===void 0?Te.Solid:d,p=r.borderRadius,g=p===void 0?0:p,m=r.borderDashedValue,_=m===void 0?[2,2]:m,S=(i=e.roundRect)!==null&&i!==void 0?i:e.rect,y=(a===Ce.Fill||r.style===Ce.StrokeFill)&&(!fe(l)||!jr(l));if(y&&(e.fillStyle=l,n.forEach(function(I){var T=I.x,x=I.y,M=I.width,D=I.height;e.beginPath(),S.call(e,T,x,M,D,g),e.closePath(),e.fill()})),(a===Ce.Stroke||r.style===Ce.StrokeFill)&&c>0&&!jr(h)){e.strokeStyle=h,e.fillStyle=h,e.lineWidth=c,v===Te.Dashed?e.setLineDash(_):e.setLineDash([]);var w=c%2===1?.5:0,C=Math.round(w*2);n.forEach(function(I){var T=I.x,x=I.y,M=I.width,D=I.height;M>c*2&&D>c*2?(e.beginPath(),S.call(e,T+w,x+w,M-C,D-C,g),e.closePath(),e.stroke()):y||e.fillRect(T,x,M,D)})}}var Vv={name:"rect",checkEventOn:tu,draw:function(e,t,r){Lo(e,t,r)}};function ru(e,t){var r=t.size,i=r===void 0?12:r,n=t.paddingLeft,o=n===void 0?0:n,a=t.paddingTop,s=a===void 0?0:a,l=t.paddingRight,u=l===void 0?0:l,c=t.paddingBottom,f=c===void 0?0:c,h=t.weight,d=h===void 0?"normal":h,v=t.family,p=e.x,g=e.y,m=e.text,_=e.align,S=_===void 0?"left":_,y=e.baseline,w=y===void 0?"top":y,C=e.width,I=e.height,T=C??o+di(m,i,d,v)+u,x=I??s+i+f,M;switch(S){case"left":case"start":{M=p;break}case"right":case"end":{M=p-T;break}default:{M=p-T/2;break}}var D;switch(w){case"top":case"hanging":{D=g;break}case"bottom":case"ideographic":case"alphabetic":{D=g-x;break}default:{D=g-x/2;break}}return{x:M,y:D,width:T,height:x}}function iu(e,t,r){var i=[];i=i.concat(t);for(var n=0;n<i.length;n++){var o=ru(i[n],r),a=o.x,s=o.y,l=o.width,u=o.height;if(e.x>=a&&e.x<=a+l&&e.y>=s&&e.y<=s+u)return!0}return!1}function Bo(e,t,r){var i=[];i=i.concat(t);var n=r.color,o=n===void 0?"currentColor":n,a=r.size,s=a===void 0?12:a,l=r.family,u=r.weight,c=r.paddingLeft,f=c===void 0?0:c,h=r.paddingTop,d=h===void 0?0:h,v=r.paddingRight,p=v===void 0?0:v,g=i.map(function(m){return ru(m,r)});Lo(e,g,te(te({},r),{color:r.backgroundColor})),e.textAlign="left",e.textBaseline="top",e.font=Er(s,u,l),e.fillStyle=o,i.forEach(function(m,_){var S=g[_];e.fillText(m.text,S.x+f,S.y+d,S.width-f-p)})}var nu={name:"text",checkEventOn:iu,draw:function(e,t,r){Bo(e,t,r)}},Wv=nu,zv=Bo;function Hv(e,t){var r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)}function ou(e,t){var r=[];r=r.concat(t);for(var i=0;i<r.length;i++){var n=r[i];if(Math.abs(Hv(e,n)-n.r)<Ge){var o=n.r,a=n.startAngle,s=n.endAngle,l=o*Math.cos(a)+n.x,u=o*Math.sin(a)+n.y,c=o*Math.cos(s)+n.x,f=o*Math.sin(s)+n.y;if(e.x<=Math.max(l,c)+Ge&&e.x>=Math.min(l,c)-Ge&&e.y<=Math.max(u,f)+Ge&&e.y>=Math.min(u,f)-Ge)return!0}}return!1}function au(e,t,r){var i=[];i=i.concat(t);var n=r.style,o=n===void 0?Te.Solid:n,a=r.size,s=a===void 0?1:a,l=r.color,u=l===void 0?"currentColor":l,c=r.dashedValue,f=c===void 0?[2,2]:c;e.lineWidth=s,e.strokeStyle=u,o===Te.Dashed?e.setLineDash(f):e.setLineDash([]),i.forEach(function(h){var d=h.x,v=h.y,p=h.r,g=h.startAngle,m=h.endAngle;e.beginPath(),e.arc(d,v,p,g,m),e.stroke(),e.closePath()})}var jv={name:"arc",checkEventOn:ou,draw:function(e,t,r){au(e,t,r)}},su={},Xv=[Bv,dv,Nv,Vv,nu,Wv,jv];Xv.forEach(function(e){su[e.name]=hv.extend(e)});function $v(e){var t;return(t=su[e])!==null&&t!==void 0?t:null}var Vt=function(e){pe(t,e);function t(r){var i=e.call(this)||this;return i._widget=r,i}return t.prototype.getWidget=function(){return this._widget},t.prototype.createFigure=function(r,i){var n=$v(r.name);if(n!==null){var o=new n(r);if(N(i)){for(var a in i)i.hasOwnProperty(a)&&o.registerEvent(a,i[a]);this.addChild(o)}return o}return null},t.prototype.draw=function(r){this.clear(),this.drawImp(r)},t}(ko),Yv=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i,n,o=this.getWidget(),a=this.getWidget().getPane(),s=a.getChart(),l=o.getBounding(),u=s.getStyles().grid,c=u.show;if(c){r.save(),r.globalCompositeOperation="destination-over";var f=u.horizontal,h=f.show;if(h){var d=a.getAxisComponent(),v=d.getTicks().map(function(_){return{coordinates:[{x:0,y:_.coord},{x:l.width,y:_.coord}]}});(i=this.createFigure({name:"line",attrs:v,styles:f}))===null||i===void 0||i.draw(r)}var p=u.vertical,g=p.show;if(g){var m=s.getXAxisPane().getAxisComponent(),v=m.getTicks().map(function(S){return{coordinates:[{x:S.coord,y:0},{x:S.coord,y:l.height}]}});(n=this.createFigure({name:"line",attrs:v,styles:p}))===null||n===void 0||n.draw(r)}r.restore()}},t}(Vt),No=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.eachChildren=function(r){var i=this.getWidget().getPane(),n=i.getChart().getChartStore(),o=n.getVisibleDataList(),a=n.getTimeScaleStore().getBarSpace();o.forEach(function(s,l){r(s,a,l)})},t}(Vt),lu=function(e){pe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._boundCandleBarClickEvent=function(i){return function(){return r.getWidget().getPane().getChart().getChartStore().getActionStore().execute(Ct.OnCandleBarClick,i),!1}},r}return t.prototype.drawImp=function(r){var i=this,n=this.getWidget().getPane(),o=n.getId()===Ie.CANDLE,a=n.getChart().getChartStore(),s=this.getCandleBarOptions(a);if(s!==null){var l=0,u=0;if(s.type===bt.Ohlc){var c=a.getTimeScaleStore().getBarSpace().gapBar;l=Math.min(Math.max(Math.round(c*.2),1),8),l>2&&l%2===1&&l--,u=Math.floor(u/2)}var f=n.getAxisComponent();this.eachChildren(function(h,d){var v=h.data,p=h.x;if(N(v)){var g=v.open,m=v.high,_=v.low,S=v.close,y=s.type,w=s.styles,C=[];S>g?(C[0]=w.upColor,C[1]=w.upBorderColor,C[2]=w.upWickColor):S<g?(C[0]=w.downColor,C[1]=w.downBorderColor,C[2]=w.downWickColor):(C[0]=w.noChangeColor,C[1]=w.noChangeBorderColor,C[2]=w.noChangeWickColor);var I=f.convertToPixel(g),T=f.convertToPixel(S),x=[I,T,f.convertToPixel(m),f.convertToPixel(_)];x.sort(function(D,P){return D-P});var M=[];switch(y){case bt.CandleSolid:{M=i._createSolidBar(p,x,d,C);break}case bt.CandleStroke:{M=i._createStrokeBar(p,x,d,C);break}case bt.CandleUpStroke:{S>g?M=i._createStrokeBar(p,x,d,C):M=i._createSolidBar(p,x,d,C);break}case bt.CandleDownStroke:{g>S?M=i._createStrokeBar(p,x,d,C):M=i._createSolidBar(p,x,d,C);break}case bt.Ohlc:{M=[{name:"rect",attrs:[{x:p-u,y:x[0],width:l,height:x[3]-x[0]},{x:p-d.halfGapBar,y:I+l>x[3]?x[3]-l:I,width:d.halfGapBar,height:l},{x:p+u,y:T+l>x[3]?x[3]-l:T,width:d.halfGapBar-u,height:l}],styles:{color:C[0]}}];break}}M.forEach(function(D){var P,H;o&&(H={mouseClickEvent:i._boundCandleBarClickEvent(h)}),(P=i.createFigure(D,H))===null||P===void 0||P.draw(r)})}})}},t.prototype.getCandleBarOptions=function(r){var i=r.getStyles().candle;return{type:i.type,styles:i.bar}},t.prototype._createSolidBar=function(r,i,n,o){return[{name:"rect",attrs:{x:r,y:i[0],width:1,height:i[3]-i[0]},styles:{color:o[2]}},{name:"rect",attrs:{x:r-n.halfGapBar,y:i[1],width:n.gapBar,height:Math.max(1,i[2]-i[1])},styles:{style:Ce.StrokeFill,color:o[0],borderColor:o[1]}}]},t.prototype._createStrokeBar=function(r,i,n,o){return[{name:"rect",attrs:[{x:r,y:i[0],width:1,height:i[1]-i[0]},{x:r,y:i[2],width:1,height:i[3]-i[2]}],styles:{color:o[2]}},{name:"rect",attrs:{x:r-n.halfGapBar,y:i[1],width:n.gapBar,height:Math.max(1,i[2]-i[1])},styles:{style:Ce.Stroke,borderColor:o[1]}}]},t}(No),Uv=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCandleBarOptions=function(r){var i,n,o=this.getWidget().getPane(),a=o.getAxisComponent();if(!a.isInCandle()){var s=r.getIndicatorStore().getInstances(o.getId());try{for(var l=Cr(s),u=l.next();!u.done;u=l.next()){var c=u.value;if(c.shouldOhlc&&c.visible){var f=c.styles,h=r.getStyles().indicator,d=qe(f,"ohlc.upColor",h.ohlc.upColor),v=qe(f,"ohlc.downColor",h.ohlc.downColor),p=qe(f,"ohlc.noChangeColor",h.ohlc.noChangeColor);return{type:bt.Ohlc,styles:{upColor:d,downColor:v,noChangeColor:p,upBorderColor:d,downBorderColor:v,noChangeBorderColor:p,upWickColor:d,downWickColor:v,noChangeWickColor:p}}}}}catch(g){i={error:g}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}}return null},t.prototype.drawImp=function(r){var i=this;e.prototype.drawImp.call(this,r);var n=this.getWidget(),o=n.getPane(),a=o.getChart(),s=n.getBounding(),l=a.getXAxisPane().getAxisComponent(),u=o.getAxisComponent(),c=a.getChartStore(),f=c.getDataList(),h=c.getTimeScaleStore(),d=h.getVisibleRange(),v=c.getIndicatorStore().getInstances(o.getId()),p=c.getStyles().indicator;r.save(),v.forEach(function(g){var m;if(g.visible){g.zLevel<0?r.globalCompositeOperation="destination-over":r.globalCompositeOperation="source-over";var _=!1;if(g.draw!==null&&(r.save(),_=(m=g.draw({ctx:r,kLineDataList:f,indicator:g,visibleRange:d,bounding:s,barSpace:h.getBarSpace(),defaultStyles:p,xAxis:l,yAxis:u}))!==null&&m!==void 0?m:!1,r.restore()),!_){var S=g.result,y=[];i.eachChildren(function(w,C){var I,T,x,M=C.halfGapBar,D=w.dataIndex,P=w.x,H=l.convertToPixel(D-1),X=l.convertToPixel(D+1),G=(I=S[D-1])!==null&&I!==void 0?I:null,U=(T=S[D])!==null&&T!==void 0?T:null,oe=(x=S[D+1])!==null&&x!==void 0?x:null,ae={x:H},De={x:P},J={x:X};g.figures.forEach(function(we){var $=we.key,ue=G==null?void 0:G[$];ee(ue)&&(ae[$]=u.convertToPixel(ue));var ye=U==null?void 0:U[$];ee(ye)&&(De[$]=u.convertToPixel(ye));var Me=oe==null?void 0:oe[$];ee(Me)&&(J[$]=u.convertToPixel(Me))}),Ao(f,g,D,p,function(we,$,ue){var ye,Me,Se;if(N(U==null?void 0:U[we.key])){var We=De[we.key],ze=(ye=we.attrs)===null||ye===void 0?void 0:ye.call(we,{data:{prev:G,current:U,next:oe},coordinate:{prev:ae,current:De,next:J},bounding:s,barSpace:C,xAxis:l,yAxis:u});if(!N(ze))switch(we.type){case"circle":{ze={x:P,y:We,r:Math.max(1,M)};break}case"rect":case"bar":{var st=(Me=we.baseValue)!==null&&Me!==void 0?Me:u.getRange().from,et=u.convertToPixel(st),mt=Math.abs(et-We);st!==(U==null?void 0:U[we.key])&&(mt=Math.max(1,mt));var tt=void 0;We>et?tt=et:tt=We,ze={x:P-M,y:tt,width:Math.max(1,M*2),height:mt};break}case"line":{N(y[ue])||(y[ue]=[]),ee(De[we.key])&&ee(J[we.key])&&y[ue].push({coordinates:[{x:De.x,y:De[we.key]},{x:J.x,y:J[we.key]}],styles:$});break}}var b=we.type;N(ze)&&b!=="line"&&((Se=i.createFigure({name:b==="bar"?"rect":b,attrs:ze,styles:$}))===null||Se===void 0||Se.draw(r))}})}),y.forEach(function(w){if(w.length>1){for(var C=[{coordinates:[w[0].coordinates[0],w[0].coordinates[1]],styles:w[0].styles}],I=1;I<w.length;I++){var T=C[C.length-1],x=w[I],M=T.coordinates[T.coordinates.length-1];M.x===x.coordinates[0].x&&M.y===x.coordinates[0].y&&T.styles.style===x.styles.style&&T.styles.color===x.styles.color&&T.styles.size===x.styles.size&&T.styles.smooth===x.styles.smooth&&T.styles.dashedValue[0]===x.styles.dashedValue[0]&&T.styles.dashedValue[1]===x.styles.dashedValue[1]?T.coordinates.push(x.coordinates[1]):C.push({coordinates:[x.coordinates[0],x.coordinates[1]],styles:x.styles})}C.forEach(function(D){var P,H=D.coordinates,X=D.styles;(P=i.createFigure({name:"line",attrs:{coordinates:H},styles:X}))===null||P===void 0||P.draw(r)})}})}}}),r.restore()},t}(lu),Kv=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i=this.getWidget(),n=i.getPane(),o=i.getBounding(),a=i.getPane().getChart().getChartStore(),s=a.getTooltipStore().getCrosshair(),l=a.getStyles().crosshair;if(fe(s.paneId)&&l.show){if(s.paneId===n.getId()){var u=s.y;this._drawLine(r,[{x:0,y:u},{x:o.width,y:u}],l.horizontal)}var c=s.realX;this._drawLine(r,[{x:c,y:0},{x:c,y:o.height}],l.vertical)}},t.prototype._drawLine=function(r,i,n){var o;if(n.show){var a=n.line;a.show&&((o=this.createFigure({name:"line",attrs:{coordinates:i},styles:a}))===null||o===void 0||o.draw(r))}},t}(Vt),uu=function(e){pe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._boundIconClickEvent=function(i){return function(){var n=r.getWidget().getPane();return n.getChart().getChartStore().getActionStore().execute(Ct.OnTooltipIconClick,te({},i)),!0}},r._boundIconMouseMoveEvent=function(i){return function(){var n=r.getWidget().getPane(),o=n.getChart().getChartStore().getTooltipStore();return o.setActiveIcon(te({},i)),!0}},r}return t.prototype.drawImp=function(r){var i=this.getWidget(),n=i.getPane(),o=n.getChart().getChartStore(),a=o.getTooltipStore().getCrosshair();if(N(a.kLineData)){var s=i.getBounding(),l=o.getCustomApi(),u=o.getThousandsSeparator(),c=o.getDecimalFoldThreshold(),f=o.getIndicatorStore().getInstances(n.getId()),h=o.getTooltipStore().getActiveIcon(),d=o.getStyles().indicator,v=d.tooltip,p=v.offsetLeft,g=v.offsetTop,m=v.offsetRight;this.drawIndicatorTooltip(r,n.getId(),o.getDataList(),a,h,f,l,u,c,p,g,s.width-m,d)}},t.prototype.drawIndicatorTooltip=function(r,i,n,o,a,s,l,u,c,f,h,d,v){var p=this,g=v.tooltip;if(this.isDrawTooltip(o,g)){var m=g.text;s.forEach(function(_){var S=0,y={x:f,y:h},w=p.getIndicatorTooltipData(n,o,_,l,u,c,v),C=w.name,I=w.calcParamsText,T=w.values,x=w.icons,M=C.length>0,D=T.length>0;if(M||D){var P=Tr(p.classifyTooltipIcons(x),3),H=P[0],X=P[1],G=P[2];if(S=p.drawStandardTooltipIcons(r,a,H,y,i,_.name,f,S,d),M){var U=C;I.length>0&&(U="".concat(U).concat(I)),S=p.drawStandardTooltipLegends(r,[{title:{text:"",color:m.color},value:{text:U,color:m.color}}],y,f,S,d,m)}S=p.drawStandardTooltipIcons(r,a,X,y,i,_.name,f,S,d),D&&(S=p.drawStandardTooltipLegends(r,T,y,f,S,d,g.text)),S=p.drawStandardTooltipIcons(r,a,G,y,i,_.name,f,S,d),h=y.y+S}})}return h},t.prototype.drawStandardTooltipIcons=function(r,i,n,o,a,s,l,u,c){var f=this;if(n.length>0){var h=0,d=0;n.forEach(function(v){var p=v.marginLeft,g=p===void 0?0:p,m=v.marginTop,_=m===void 0?0:m,S=v.marginRight,y=S===void 0?0:S,w=v.marginBottom,C=w===void 0?0:w,I=v.paddingLeft,T=I===void 0?0:I,x=v.paddingTop,M=x===void 0?0:x,D=v.paddingRight,P=D===void 0?0:D,H=v.paddingBottom,X=H===void 0?0:H,G=v.size,U=v.fontFamily,oe=v.icon;r.font=Er(G,"normal",U),h+=g+T+r.measureText(oe).width+P+y,d=Math.max(d,_+M+G+X+C)}),o.x+h>c?(o.x=l,o.y+=u,u=d):u=Math.max(u,d),n.forEach(function(v){var p,g=v.marginLeft,m=g===void 0?0:g,_=v.marginTop,S=_===void 0?0:_,y=v.marginRight,w=y===void 0?0:y,C=v.paddingLeft,I=C===void 0?0:C,T=v.paddingTop,x=T===void 0?0:T,M=v.paddingRight,D=M===void 0?0:M,P=v.paddingBottom,H=P===void 0?0:P,X=v.color,G=v.activeColor,U=v.size,oe=v.fontFamily,ae=v.icon,De=v.backgroundColor,J=v.activeBackgroundColor,we=(i==null?void 0:i.paneId)===a&&(i==null?void 0:i.indicatorName)===s&&(i==null?void 0:i.iconId)===v.id;(p=f.createFigure({name:"text",attrs:{text:ae,x:o.x+m,y:o.y+S},styles:{paddingLeft:I,paddingTop:x,paddingRight:D,paddingBottom:H,color:we?G:X,size:U,family:oe,backgroundColor:we?J:De}},{mouseClickEvent:f._boundIconClickEvent({paneId:a,indicatorName:s,iconId:v.id}),mouseMoveEvent:f._boundIconMouseMoveEvent({paneId:a,indicatorName:s,iconId:v.id})}))===null||p===void 0||p.draw(r),o.x+=m+I+r.measureText(ae).width+D+w})}return u},t.prototype.drawStandardTooltipLegends=function(r,i,n,o,a,s,l){var u=this;if(i.length>0){var c=l.marginLeft,f=l.marginTop,h=l.marginRight,d=l.marginBottom,v=l.size,p=l.family,g=l.weight;r.font=Er(v,g,p),i.forEach(function(m){var _,S,y=m.title,w=m.value,C=r.measureText(y.text).width,I=r.measureText(w.text).width,T=C+I,x=f+v+d;n.x+c+T+h>s?(n.x=o,n.y+=a,a=x):a=Math.max(a,x),y.text.length>0&&((_=u.createFigure({name:"text",attrs:{x:n.x+c,y:n.y+f,text:y.text},styles:{color:y.color,size:v,family:p,weight:g}}))===null||_===void 0||_.draw(r)),(S=u.createFigure({name:"text",attrs:{x:n.x+c+C,y:n.y+f,text:w.text},styles:{color:w.color,size:v,family:p,weight:g}}))===null||S===void 0||S.draw(r),n.x+=c+T+h})}return a},t.prototype.isDrawTooltip=function(r,i){var n=i.showRule;return n===zr.Always||n===zr.FollowCross&&fe(r.paneId)},t.prototype.getIndicatorTooltipData=function(r,i,n,o,a,s,l){var u,c,f=l.tooltip,h=f.showName?n.shortName:"",d="",v=n.calcParams;v.length>0&&f.showParams&&(d="(".concat(v.join(","),")"));var p={name:h,calcParamsText:d,values:[],icons:f.icons},g=i.dataIndex,m=(u=n.result)!==null&&u!==void 0?u:[],_=[];if(n.visible){var S=(c=m[g])!==null&&c!==void 0?c:{};Ao(r,n,g,l,function(X,G){if(fe(X.title)){var U=G.color,oe=S[X.key];ee(oe)&&(oe=Be(oe,n.precision),n.shouldFormatBigNumber&&(oe=o.formatBigNumber(oe))),_.push({title:{text:X.title,color:U},value:{text:je(He(oe??f.defaultValue,a),s),color:U}})}}),p.values=_}if(n.createTooltipDataSource!==null){var y=this.getWidget(),w=y.getPane(),C=w.getChart().getChartStore(),I=n.createTooltipDataSource({kLineDataList:r,indicator:n,visibleRange:C.getTimeScaleStore().getVisibleRange(),bounding:y.getBounding(),crosshair:i,defaultStyles:l,xAxis:w.getChart().getXAxisPane().getAxisComponent(),yAxis:w.getAxisComponent()}),T=I.name,x=I.calcParamsText,M=I.values,D=I.icons;if(fe(T)&&f.showName&&(p.name=T),fe(x)&&f.showParams&&(p.calcParamsText=x),N(D)&&(p.icons=D),N(M)&&n.visible){var P=[],H=l.tooltip.text.color;M.forEach(function(X){var G={text:"",color:H};Tt(X.title)?G=X.title:G.text=X.title;var U={text:"",color:H};Tt(X.value)?U=X.value:U.text=X.value,U.text=je(He(U.text,a),s),P.push({title:G,value:U})}),p.values=P}}return p},t.prototype.classifyTooltipIcons=function(r){var i=[],n=[],o=[];return r.forEach(function(a){switch(a.position){case oi.Left:{i.push(a);break}case oi.Middle:{n.push(a);break}case oi.Right:{o.push(a);break}}}),[i,n,o]},t}(Vt),cu=function(e){pe(t,e);function t(r){var i=e.call(this,r)||this;return i._initEvent(),i}return t.prototype._initEvent=function(){var r=this,i=this.getWidget().getPane(),n=i.getId(),o=i.getChart().getChartStore().getOverlayStore();this.registerEvent("mouseMoveEvent",function(a){var s,l=o.getProgressInstanceInfo();if(l!==null){var u=l.instance,c=l.paneId;u.isStart()&&(o.updateProgressInstanceInfo(n),c=n);var f=u.points.length-1,h="".concat(Ar,"point_").concat(f);return u.isDrawing()&&c===n&&(u.eventMoveForDrawing(r._coordinateToPoint(l.instance,a)),(s=u.onDrawing)===null||s===void 0||s.call(u,te({overlay:u,figureKey:h,figureIndex:f},a))),r._figureMouseMoveEvent(u,1,h,f,0)(a)}return o.setHoverInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},a),!1}).registerEvent("mouseClickEvent",function(a){var s,l,u=o.getProgressInstanceInfo();if(u!==null){var c=u.instance,f=u.paneId;c.isStart()&&(o.updateProgressInstanceInfo(n,!0),f=n);var h=c.points.length-1,d="".concat(Ar,"point_").concat(h);return c.isDrawing()&&f===n&&(c.eventMoveForDrawing(r._coordinateToPoint(c,a)),(s=c.onDrawing)===null||s===void 0||s.call(c,te({overlay:c,figureKey:d,figureIndex:h},a)),c.nextStep(),c.isDrawing()||(o.progressInstanceComplete(),(l=c.onDrawEnd)===null||l===void 0||l.call(c,te({overlay:c,figureKey:d,figureIndex:h},a)))),r._figureMouseClickEvent(c,1,d,h,0)(a)}return o.setClickInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1},a),!1}).registerEvent("mouseDoubleClickEvent",function(a){var s,l=o.getProgressInstanceInfo();if(l!==null){var u=l.instance,c=l.paneId;if(u.isDrawing()&&c===n&&(u.forceComplete(),!u.isDrawing())){o.progressInstanceComplete();var f=u.points.length-1,h="".concat(Ar,"point_").concat(f);(s=u.onDrawEnd)===null||s===void 0||s.call(u,te({overlay:u,figureKey:h,figureIndex:f},a))}var d=u.points.length-1;return r._figureMouseClickEvent(u,1,"".concat(Ar,"point_").concat(d),d,0)(a)}return!1}).registerEvent("mouseRightClickEvent",function(a){var s=o.getProgressInstanceInfo();if(s!==null){var l=s.instance;if(l.isDrawing()){var u=l.points.length-1;return r._figureMouseRightClickEvent(l,1,"".concat(Ar,"point_").concat(u),u,0)(a)}}return!1}).registerEvent("mouseUpEvent",function(a){var s,l=o.getPressedInstanceInfo(),u=l.instance,c=l.figureIndex,f=l.figureKey;return u!==null&&((s=u.onPressedMoveEnd)===null||s===void 0||s.call(u,te({overlay:u,figureKey:f,figureIndex:c},a))),o.setPressedInstanceInfo({paneId:n,instance:null,figureType:0,figureKey:"",figureIndex:-1,attrsIndex:-1}),!1}).registerEvent("pressedMouseMoveEvent",function(a){var s,l,u=o.getPressedInstanceInfo(),c=u.instance,f=u.figureType,h=u.figureIndex,d=u.figureKey;if(c!==null){if(!c.lock&&!((l=(s=c.onPressedMoving)===null||s===void 0?void 0:s.call(c,te({overlay:c,figureIndex:h,figureKey:d},a)))!==null&&l!==void 0&&l)){var v=r._coordinateToPoint(c,a);f===1?c.eventPressedPointMove(v,h):c.eventPressedOtherMove(v,r.getWidget().getPane().getChart().getChartStore().getTimeScaleStore())}return!0}return!1})},t.prototype._createFigureEvents=function(r,i,n,o,a,s){var l;if(!r.isDrawing()){var u=[];if(N(s)&&(or(s)?s&&(u=bd()):u=s),u.length===0)return{mouseMoveEvent:this._figureMouseMoveEvent(r,i,n,o,a),mouseDownEvent:this._figureMouseDownEvent(r,i,n,o,a),mouseClickEvent:this._figureMouseClickEvent(r,i,n,o,a),mouseRightClickEvent:this._figureMouseRightClickEvent(r,i,n,o,a),mouseDoubleClickEvent:this._figureMouseDoubleClickEvent(r,i,n,o,a)};l={},!u.includes("mouseMoveEvent")&&!u.includes("touchMoveEvent")&&(l.mouseMoveEvent=this._figureMouseMoveEvent(r,i,n,o,a)),!u.includes("mouseDownEvent")&&!u.includes("touchStartEvent")&&(l.mouseDownEvent=this._figureMouseDownEvent(r,i,n,o,a)),!u.includes("mouseClickEvent")&&!u.includes("tapEvent")&&(l.mouseClickEvent=this._figureMouseClickEvent(r,i,n,o,a)),!u.includes("mouseDoubleClickEvent")&&!u.includes("doubleTapEvent")&&(l.mouseDoubleClickEvent=this._figureMouseDoubleClickEvent(r,i,n,o,a)),u.includes("mouseRightClickEvent")||(l.mouseRightClickEvent=this._figureMouseRightClickEvent(r,i,n,o,a))}return l},t.prototype._figureMouseMoveEvent=function(r,i,n,o,a){var s=this;return function(l){var u=s.getWidget().getPane(),c=u.getChart().getChartStore().getOverlayStore();return c.setHoverInstanceInfo({paneId:u.getId(),instance:r,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a},l),!0}},t.prototype._figureMouseDownEvent=function(r,i,n,o,a){var s=this;return function(l){var u,c=s.getWidget().getPane(),f=c.getId(),h=c.getChart().getChartStore().getOverlayStore();return r.startPressedMove(s._coordinateToPoint(r,l)),(u=r.onPressedMoveStart)===null||u===void 0||u.call(r,te({overlay:r,figureIndex:o,figureKey:n},l)),h.setPressedInstanceInfo({paneId:f,instance:r,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a}),!0}},t.prototype._figureMouseClickEvent=function(r,i,n,o,a){var s=this;return function(l){var u=s.getWidget().getPane(),c=u.getId(),f=u.getChart().getChartStore().getOverlayStore();return f.setClickInstanceInfo({paneId:c,instance:r,figureType:i,figureKey:n,figureIndex:o,attrsIndex:a},l),!0}},t.prototype._figureMouseDoubleClickEvent=function(r,i,n,o,a){return function(s){var l;return(l=r.onDoubleClick)===null||l===void 0||l.call(r,te(te({},s),{figureIndex:o,figureKey:n,overlay:r})),!0}},t.prototype._figureMouseRightClickEvent=function(r,i,n,o,a){var s=this;return function(l){var u,c;if(!((c=(u=r.onRightClick)===null||u===void 0?void 0:u.call(r,te({overlay:r,figureIndex:o,figureKey:n},l)))!==null&&c!==void 0&&c)){var f=s.getWidget().getPane(),h=f.getChart().getChartStore().getOverlayStore();h.removeInstance(r)}return!0}},t.prototype._coordinateToPoint=function(r,i){var n,o={},a=this.getWidget().getPane(),s=a.getChart(),l=a.getId(),u=s.getChartStore().getTimeScaleStore();if(this.coordinateToPointTimestampDataIndexFlag()){var c=s.getXAxisPane().getAxisComponent(),f=c.convertFromPixel(i.x),h=(n=u.dataIndexToTimestamp(f))!==null&&n!==void 0?n:void 0;o.dataIndex=f,o.timestamp=h}if(this.coordinateToPointValueFlag()){var d=a.getAxisComponent(),v=d.convertFromPixel(i.y);if(r.mode!==Nr.Normal&&l===Ie.CANDLE&&ee(o.dataIndex)){var p=u.getDataByDataIndex(o.dataIndex);if(p!==null){var g=r.modeSensitivity;if(v>p.high)if(r.mode===Nr.WeakMagnet){var m=d.convertToPixel(p.high),_=d.convertFromPixel(m-g);v<_&&(v=p.high)}else v=p.high;else if(v<p.low)if(r.mode===Nr.WeakMagnet){var S=d.convertToPixel(p.low),_=d.convertFromPixel(S-g);v>_&&(v=p.low)}else v=p.low;else{var y=Math.max(p.open,p.close),w=Math.min(p.open,p.close);v>y?v-y<p.high-v?v=y:v=p.high:v<w?v-p.low<w-v?v=p.low:v=w:y-v<v-w?v=y:v=w}}}o.value=v}return o},t.prototype.coordinateToPointValueFlag=function(){return!0},t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.dispatchEvent=function(r,i,n){return this.getWidget().getPane().getChart().getChartStore().getOverlayStore().isDrawing()?this.onEvent(r,i,n):e.prototype.dispatchEvent.call(this,r,i,n)},t.prototype.checkEventOn=function(){return!0},t.prototype.drawImp=function(r){var i=this,n=this.getWidget(),o=n.getPane(),a=o.getId(),s=o.getChart(),l=o.getAxisComponent(),u=s.getXAxisPane().getAxisComponent(),c=n.getBounding(),f=s.getChartStore(),h=f.getCustomApi(),d=f.getThousandsSeparator(),v=f.getDecimalFoldThreshold(),p=f.getTimeScaleStore(),g=p.getDateTimeFormat(),m=p.getBarSpace(),_=f.getPrecision(),S=f.getStyles().overlay,y=f.getOverlayStore(),w=y.getHoverInstanceInfo(),C=y.getClickInstanceInfo(),I=this.getCompleteOverlays(y,a),T=f.getIndicatorStore().getInstances(a),x=T.reduce(function(P,H){var X=H.precision;return P[H.name]=X,P.max=Math.max(P.max,X),P.min=Math.min(P.min,X),P.excludePriceVolumeMax=Math.max(P.excludePriceVolumeMax,X),P.excludePriceVolumeMin=Math.min(P.excludePriceVolumeMin,X),P},te(te({},_),{max:Math.max(_.price,_.volume),min:Math.min(_.price,_.volume),excludePriceVolumeMax:Number.MIN_SAFE_INTEGER,excludePriceVolumeMin:Number.MAX_SAFE_INTEGER}));I.forEach(function(P){P.visible&&i._drawOverlay(r,P,c,m,x,g,h,d,v,S,u,l,w,C,p)});var M=y.getProgressInstanceInfo();if(M!==null){var D=this.getProgressOverlay(M,a);D!==null&&D.visible&&this._drawOverlay(r,D,c,m,x,g,h,d,v,S,u,l,w,C,p)}},t.prototype._drawOverlay=function(r,i,n,o,a,s,l,u,c,f,h,d,v,p,g){var m=i.points,_=m.map(function(y){var w,C,I=y.dataIndex;ee(y.timestamp)&&(I=g.timestampToDataIndex(y.timestamp));var T={x:0,y:0};return ee(I)&&(T.x=(w=h==null?void 0:h.convertToPixel(I))!==null&&w!==void 0?w:0),ee(y.value)&&(T.y=(C=d==null?void 0:d.convertToPixel(y.value))!==null&&C!==void 0?C:0),T});if(_.length>0){var S=new Array().concat(this.getFigures(i,_,n,o,a,u,c,s,f,h,d));this.drawFigures(r,i,S,f)}this.drawDefaultFigures(r,i,_,n,a,s,l,u,c,f,h,d,v,p)},t.prototype.drawFigures=function(r,i,n,o){var a=this;n.forEach(function(s,l){var u=s.type,c=s.styles,f=s.attrs,h=s.ignoreEvent,d=[].concat(f);d.forEach(function(v,p){var g,m,_,S=a._createFigureEvents(i,2,(g=s.key)!==null&&g!==void 0?g:"",l,p,h),y=te(te(te({},o[u]),(m=i.styles)===null||m===void 0?void 0:m[u]),c);(_=a.createFigure({name:u,attrs:v,styles:y},S))===null||_===void 0||_.draw(r)})})},t.prototype.getCompleteOverlays=function(r,i){return r.getInstances(i)},t.prototype.getProgressOverlay=function(r,i){return r.paneId===i?r.instance:null},t.prototype.getFigures=function(r,i,n,o,a,s,l,u,c,f,h){var d,v;return(v=(d=r.createPointFigures)===null||d===void 0?void 0:d.call(r,{overlay:r,coordinates:i,bounding:n,barSpace:o,precision:a,thousandsSeparator:s,decimalFoldThreshold:l,dateTimeFormat:u,defaultStyles:c,xAxis:f,yAxis:h}))!==null&&v!==void 0?v:[]},t.prototype.drawDefaultFigures=function(r,i,n,o,a,s,l,u,c,f,h,d,v,p){var g=this,m,_;if(i.needDefaultPointFigure&&(((m=v.instance)===null||m===void 0?void 0:m.id)===i.id&&v.figureType!==0||((_=p.instance)===null||_===void 0?void 0:_.id)===i.id&&p.figureType!==0)){var S=i.styles,y=te(te({},f.point),S==null?void 0:S.point);n.forEach(function(w,C){var I,T,x,M=w.x,D=w.y,P=y.radius,H=y.color,X=y.borderColor,G=y.borderSize;((I=v.instance)===null||I===void 0?void 0:I.id)===i.id&&v.figureType===1&&v.figureIndex===C&&(P=y.activeRadius,H=y.activeColor,X=y.activeBorderColor,G=y.activeBorderSize),(T=g.createFigure({name:"circle",attrs:{x:M,y:D,r:P+G},styles:{color:X}},g._createFigureEvents(i,1,"".concat(Ar,"point_").concat(C),C,0)))===null||T===void 0||T.draw(r),(x=g.createFigure({name:"circle",attrs:{x:M,y:D,r:P},styles:{color:H}}))===null||x===void 0||x.draw(r)})}},t}(Vt),fu=function(e){pe(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n._gridView=new Yv(n),n._indicatorView=new Uv(n),n._crosshairLineView=new Kv(n),n._tooltipView=n.createTooltipView(),n._overlayView=new cu(n),n.addChild(n._tooltipView),n.addChild(n._overlayView),n.getContainer().style.cursor="crosshair",n.registerEvent("mouseMoveEvent",function(){return i.getChart().getChartStore().getTooltipStore().setActiveIcon(),!1}),n}return t.prototype.getName=function(){return me.MAIN},t.prototype.updateMain=function(r){this.updateMainContent(r),this._indicatorView.draw(r),this._gridView.draw(r)},t.prototype.createTooltipView=function(){return new uu(this)},t.prototype.updateMainContent=function(r){},t.prototype.updateOverlay=function(r){this._overlayView.draw(r),this._crosshairLineView.draw(r),this._tooltipView.draw(r)},t}(Oo),Gv=function(e){pe(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._ripplePoint=r.createFigure({name:"circle",attrs:{x:0,y:0,r:0},styles:{style:"fill"}}),r._animationFrameTime=0,r._animation=new eo({iterationCount:1/0}).doFrame(function(i){r._animationFrameTime=i;var n=r.getWidget().getPane();n.getChart().updatePane(0,n.getId())}),r}return t.prototype.drawImp=function(r){var i,n,o,a=this.getWidget(),s=a.getPane(),l=s.getChart(),u=l.getDataList(),c=u.length-1,f=a.getBounding(),h=s.getAxisComponent(),d=l.getStyles().candle.area,v=[],p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER,m=null;if(this.eachChildren(function(I){var T=I.data,x=I.x,M=T==null?void 0:T[d.value];if(ee(M)){var D=h.convertToPixel(M);g===Number.MIN_SAFE_INTEGER&&(g=x),v.push({x,y:D}),p=Math.min(p,D),I.dataIndex===c&&(m={x,y:D})}}),v.length>0){(i=this.createFigure({name:"line",attrs:{coordinates:v},styles:{color:d.lineColor,size:d.lineSize,smooth:d.smooth}}))===null||i===void 0||i.draw(r);var _=d.backgroundColor,S=void 0;if(wt(_)){var y=r.createLinearGradient(0,f.height,0,p);try{_.forEach(function(I){var T=I.offset,x=I.color;y.addColorStop(T,x)})}catch{}S=y}else S=_;r.fillStyle=S,r.beginPath(),r.moveTo(g,f.height),r.lineTo(v[0].x,v[0].y),$l(r,v,d.smooth),r.lineTo(v[v.length-1].x,f.height),r.closePath(),r.fill()}var w=d.point;if(w.show&&N(m)){(n=this.createFigure({name:"circle",attrs:{x:m.x,y:m.y,r:w.radius},styles:{style:"fill",color:w.color}}))===null||n===void 0||n.draw(r);var C=w.rippleRadius;w.animation&&(C=w.radius+this._animationFrameTime/w.animationDuration*(w.rippleRadius-w.radius),this._animation.setDuration(w.animationDuration).start()),(o=this._ripplePoint)===null||o===void 0||o.setAttrs({x:m.x,y:m.y,r:C}).setStyles({style:"fill",color:w.rippleColor}).draw(r)}else this.stopAnimation()},t.prototype.stopAnimation=function(){this._animation.stop()},t}(No),qv=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i=this.getWidget(),n=i.getPane(),o=n.getChart().getChartStore(),a=o.getStyles().candle.priceMark,s=a.high,l=a.low;if(a.show&&(s.show||l.show)){var u=o.getThousandsSeparator(),c=o.getDecimalFoldThreshold(),f=o.getPrecision(),h=n.getAxisComponent(),d=Number.MIN_SAFE_INTEGER,v=0,p=Number.MAX_SAFE_INTEGER,g=0;this.eachChildren(function(S){var y=S.data,w=S.x;N(y)&&(d<y.high&&(d=y.high,v=w),p>y.low&&(p=y.low,g=w))});var m=h.convertToPixel(d),_=h.convertToPixel(p);s.show&&d!==Number.MIN_SAFE_INTEGER&&this._drawMark(r,je(He(Be(d,f.price),u),c),{x:v,y:m},m<_?[-2,-5]:[2,5],s),l.show&&p!==Number.MAX_SAFE_INTEGER&&this._drawMark(r,je(He(Be(p,f.price),u),c),{x:g,y:_},m<_?[2,5]:[-2,-5],l)}},t.prototype._drawMark=function(r,i,n,o,a){var s,l,u,c=n.x,f=n.y+o[0];(s=this.createFigure({name:"line",attrs:{coordinates:[{x:c-2,y:f+o[0]},{x:c,y:f},{x:c+2,y:f+o[0]}]},styles:{color:a.color}}))===null||s===void 0||s.draw(r);var h,d,v,p=this.getWidget().getBounding().width;c>p/2?(h=c-5,d=h-a.textOffset,v="right"):(h=c+5,v="left",d=h+a.textOffset);var g=f+o[1];(l=this.createFigure({name:"line",attrs:{coordinates:[{x:c,y:f},{x:c,y:g},{x:h,y:g}]},styles:{color:a.color}}))===null||l===void 0||l.draw(r),(u=this.createFigure({name:"text",attrs:{x:d,y:g,text:i,align:v,baseline:"middle"},styles:{color:a.color,size:a.textSize,family:a.textFamily,weight:a.textWeight}}))===null||u===void 0||u.draw(r)},t}(No),Zv=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().candle.priceMark,u=l.last,c=u.line;if(l.show&&u.show&&c.show){var f=o.getAxisComponent(),h=s.getDataList(),d=h[h.length-1];if(d!=null){var v=d.close,p=d.open,g=f.convertToNicePixel(v),m=void 0;v>p?m=u.upColor:v<p?m=u.downColor:m=u.noChangeColor,(i=this.createFigure({name:"line",attrs:{coordinates:[{x:0,y:g},{x:a.width,y:g}]},styles:{style:c.style,color:m,size:c.size,dashedValue:c.dashedValue}}))===null||i===void 0||i.draw(r)}}},t}(Vt),Jv={time:"时间：",open:"开：",high:"高：",low:"低：",close:"收：",volume:"成交量：",turnover:"成交额：",change:"涨幅："},Qv={time:"Time: ",open:"Open: ",high:"High: ",low:"Low: ",close:"Close: ",volume:"Volume: ",turnover:"Turnover: ",change:"Change: "},ep={"zh-CN":Jv,"en-US":Qv};function tp(e,t){var r,i;return(i=(r=ep[t])===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:e}var rp=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i=this.getWidget(),n=i.getPane(),o=n.getId(),a=n.getChart().getChartStore(),s=a.getTooltipStore().getCrosshair();if(N(s.kLineData)){var l=i.getBounding(),u=n.getYAxisWidget().getBounding(),c=a.getDataList(),f=a.getPrecision(),h=a.getLocale(),d=a.getCustomApi(),v=a.getThousandsSeparator(),p=a.getDecimalFoldThreshold(),g=a.getTooltipStore().getActiveIcon(),m=a.getIndicatorStore().getInstances(n.getId()),_=a.getTimeScaleStore().getDateTimeFormat(),S=a.getStyles(),y=S.candle,w=S.indicator;if(y.tooltip.showType===Rt.Rect&&w.tooltip.showType===Rt.Rect){var C=this.isDrawTooltip(s,y.tooltip),I=this.isDrawTooltip(s,w.tooltip);this._drawRectTooltip(r,c,m,l,u,s,f,_,h,d,v,p,C,I,y.tooltip.offsetTop,S)}else if(y.tooltip.showType===Rt.Standard&&w.tooltip.showType===Rt.Standard){var T=y.tooltip,x=T.offsetLeft,M=T.offsetTop,D=T.offsetRight,P=l.width-D,H=this._drawCandleStandardTooltip(r,c,o,s,g,f,_,h,d,v,p,x,M,P,y);this.drawIndicatorTooltip(r,o,c,s,g,m,d,v,p,x,H,P,w)}else if(y.tooltip.showType===Rt.Rect&&w.tooltip.showType===Rt.Standard){var X=y.tooltip,x=X.offsetLeft,M=X.offsetTop,D=X.offsetRight,P=l.width-D,G=this.drawIndicatorTooltip(r,o,c,s,g,m,d,v,p,x,M,P,w),C=this.isDrawTooltip(s,y.tooltip);this._drawRectTooltip(r,c,m,l,u,s,f,_,h,d,v,p,C,!1,G,S)}else{var U=y.tooltip,x=U.offsetLeft,M=U.offsetTop,D=U.offsetRight,P=l.width-D,oe=this._drawCandleStandardTooltip(r,c,o,s,g,f,_,h,d,v,p,x,M,P,y),I=this.isDrawTooltip(s,w.tooltip);this._drawRectTooltip(r,c,m,l,u,s,f,_,h,d,v,p,!1,I,oe,S)}}},t.prototype._drawCandleStandardTooltip=function(r,i,n,o,a,s,l,u,c,f,h,d,v,p,g){var m,_,S,y=g.tooltip,w=y.text,C=0,I={x:d,y:v};if(this.isDrawTooltip(o,y)){var T=(m=o.dataIndex)!==null&&m!==void 0?m:0,x=this._getCandleTooltipLegends({prev:(_=i[T-1])!==null&&_!==void 0?_:null,current:o.kLineData,next:(S=i[T+1])!==null&&S!==void 0?S:null},s,l,u,c,f,h,g),M=Tr(this.classifyTooltipIcons(y.icons),3),D=M[0],P=M[1],H=M[2];C=this.drawStandardTooltipIcons(r,a,D,I,n,"",d,C,p),C=this.drawStandardTooltipIcons(r,a,P,I,n,"",d,C,p),x.length>0&&(C=this.drawStandardTooltipLegends(r,x,I,d,C,p,w)),C=this.drawStandardTooltipIcons(r,a,H,I,n,"",d,C,p)}return I.y+C},t.prototype._drawRectTooltip=function(r,i,n,o,a,s,l,u,c,f,h,d,v,p,g,m){var _=this,S,y,w,C,I,T=m.candle,x=m.indicator,M=T.tooltip,D=x.tooltip;if(v||p){var P=(S=s.dataIndex)!==null&&S!==void 0?S:0,H=this._getCandleTooltipLegends({prev:(y=i[P-1])!==null&&y!==void 0?y:null,current:s.kLineData,next:(w=i[P+1])!==null&&w!==void 0?w:null},l,u,c,f,h,d,T),X=M.offsetLeft,G=M.offsetTop,U=M.offsetRight,oe=M.offsetBottom,ae=M.text,De=ae.marginLeft,J=ae.marginRight,we=ae.marginTop,$=ae.marginBottom,ue=ae.size,ye=ae.weight,Me=ae.family,Se=M.rect,We=Se.position,ze=Se.paddingLeft,st=Se.paddingRight,et=Se.paddingTop,mt=Se.paddingBottom,tt=Se.offsetLeft,b=Se.offsetRight,E=Se.offsetTop,k=Se.offsetBottom,O=Se.borderSize,B=Se.borderRadius,j=Se.borderColor,Y=Se.color,V=0,z=0,L=0;v&&(r.font=Er(ue,ye,Me),H.forEach(function(A){var F=A.title,R=A.value,W="".concat(F.text).concat(R.text),Z=r.measureText(W).width+De+J;V=Math.max(V,Z)}),L+=($+we+ue)*H.length);var K=D.text,re=K.marginLeft,Q=K.marginRight,se=K.marginTop,de=K.marginBottom,ge=K.size,be=K.weight,ke=K.family,Ze=[];if(p&&(r.font=Er(ge,be,ke),n.forEach(function(A){var F,R=(F=_.getIndicatorTooltipData(i,s,A,f,h,d,x).values)!==null&&F!==void 0?F:[];Ze.push(R),R.forEach(function(W){var Z=W.title,le=W.value,Ae="".concat(Z.text).concat(le.text),ie=r.measureText(Ae).width+re+Q;V=Math.max(V,ie),L+=se+de+ge})})),z+=V,z!==0&&L!==0){z+=O*2+ze+st,L+=O*2+et+mt;var Pt=o.width/2,fr=We===Ki.Pointer&&s.paneId===Ie.CANDLE,Mt=((C=s.realX)!==null&&C!==void 0?C:0)>Pt,rt=0;if(fr){var Ue=s.realX;Mt?rt=Ue-b-z:rt=Ue+tt}else Mt?(rt=tt+X,m.yAxis.inside&&m.yAxis.position===ur.Left&&(rt+=a.width)):(rt=o.width-b-z-U,m.yAxis.inside&&m.yAxis.position===ur.Right&&(rt-=a.width));var Le=g+E;if(fr){var Pr=s.y;Le=Pr-L/2,Le+L>o.height-k-oe&&(Le=o.height-k-L-oe),Le<g+E&&(Le=g+E+G)}(I=this.createFigure({name:"rect",attrs:{x:rt,y:Le,width:z,height:L},styles:{style:Ce.StrokeFill,color:Y,borderColor:j,borderSize:O,borderRadius:B}}))===null||I===void 0||I.draw(r);var vn=rt+O+ze+De,At=Le+O+et;if(v&&H.forEach(function(A){var F,R;At+=we;var W=A.title;(F=_.createFigure({name:"text",attrs:{x:vn,y:At,text:W.text},styles:{color:W.color,size:ue,family:Me,weight:ye}}))===null||F===void 0||F.draw(r);var Z=A.value;(R=_.createFigure({name:"text",attrs:{x:rt+z-O-J-st,y:At,text:Z.text,align:"right"},styles:{color:Z.color,size:ue,family:Me,weight:ye}}))===null||R===void 0||R.draw(r),At+=ue+$}),p){var pn=rt+O+ze+re;Ze.forEach(function(A){A.forEach(function(F){var R,W;At+=se;var Z=F.title,le=F.value;(R=_.createFigure({name:"text",attrs:{x:pn,y:At,text:Z.text},styles:{color:Z.color,size:ge,family:ke,weight:be}}))===null||R===void 0||R.draw(r),(W=_.createFigure({name:"text",attrs:{x:rt+z-O-Q-st,y:At,text:le.text,align:"right"},styles:{color:le.color,size:ge,family:ke,weight:be}}))===null||W===void 0||W.draw(r),At+=ge+de})})}}}},t.prototype._getCandleTooltipLegends=function(r,i,n,o,a,s,l,u){var c,f,h,d,v,p=u.tooltip,g=p.text.color,m=r.current,_=(f=(c=r.prev)===null||c===void 0?void 0:c.close)!==null&&f!==void 0?f:m.close,S=m.close-_,y=i.price,w=i.volume,C={"{time}":a.formatDate(n,m.timestamp,"YYYY-MM-DD HH:mm",it.Tooltip),"{open}":je(He(Be(m.open,y),s),l),"{high}":je(He(Be(m.high,y),s),l),"{low}":je(He(Be(m.low,y),s),l),"{close}":je(He(Be(m.close,y),s),l),"{volume}":je(He(a.formatBigNumber(Be((h=m.volume)!==null&&h!==void 0?h:p.defaultValue,w)),s),l),"{turnover}":je(He(Be((d=m.turnover)!==null&&d!==void 0?d:p.defaultValue,y),s),l),"{change}":_===0?p.defaultValue:"".concat(He(Be(S/_*100),s),"%")},I=(v=Nt(p.custom)?p.custom(r,u):p.custom)!==null&&v!==void 0?v:[];return I.map(function(T){var x,M=T.title,D=T.value,P={text:"",color:""};Tt(M)?P=te({},M):(P.text=M,P.color=g),P.text=tp(P.text,o);var H={text:p.defaultValue,color:""};Tt(D)?H=te({},D):(H.text=D,H.color=g);var X=H.text.match(/{(\S*)}/);if(X!==null&&X.length>1){var G="{".concat(X[1],"}");H.text=H.text.replace(G,(x=C[G])!==null&&x!==void 0?x:p.defaultValue),G==="{change}"&&(H.color=S===0?u.priceMark.last.noChangeColor:S>0?u.priceMark.last.upColor:u.priceMark.last.downColor)}return{title:P,value:H}})},t}(uu),ip=function(e){pe(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n._candleBarView=new lu(n),n._candleAreaView=new Gv(n),n._candleHighLowPriceView=new qv(n),n._candleLastPriceLineView=new Zv(n),n.addChild(n._candleBarView),n}return t.prototype.updateMainContent=function(r){var i=this.getPane().getChart().getStyles().candle;i.type!==bt.Area?(this._candleBarView.draw(r),this._candleHighLowPriceView.draw(r),this._candleAreaView.stopAnimation()):this._candleAreaView.draw(r),this._candleLastPriceLineView.draw(r)},t.prototype.createTooltipView=function(){return new rp(this)},t}(fu),hu=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i=this,n,o,a=this.getWidget(),s=a.getPane(),l=a.getBounding(),u=s.getAxisComponent(),c=this.getAxisStyles(s.getChart().getStyles());if(c.show){c.axisLine.show&&((n=this.createFigure({name:"line",attrs:this.createAxisLine(l,c),styles:c.axisLine}))===null||n===void 0||n.draw(r));var f=u.getTicks();if(c.tickLine.show){var h=this.createTickLines(f,l,c);h.forEach(function(v){var p;(p=i.createFigure({name:"line",attrs:v,styles:c.tickLine}))===null||p===void 0||p.draw(r)})}if(c.tickText.show){var d=this.createTickTexts(f,l,c);(o=this.createFigure({name:"text",attrs:d,styles:c.tickText}))===null||o===void 0||o.draw(r)}}},t}(Vt),np=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(r){return r.yAxis},t.prototype.createAxisLine=function(r,i){var n=this.getWidget().getPane().getAxisComponent(),o=i.axisLine.size,a;return n.isFromZero()?a=0:a=r.width-o,{coordinates:[{x:a,y:0},{x:a,y:r.height}]}},t.prototype.createTickLines=function(r,i,n){var o=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=0,u=0;return o.isFromZero()?(l=0,a.show&&(l+=a.size),u=l+s.length):(l=i.width,a.show&&(l-=a.size),u=l-s.length),r.map(function(c){return{coordinates:[{x:l,y:c.coord},{x:u,y:c.coord}]}})},t.prototype.createTickTexts=function(r,i,n){var o=this.getWidget().getPane().getAxisComponent(),a=n.axisLine,s=n.tickLine,l=n.tickText,u=0;o.isFromZero()?(u=l.marginStart,a.show&&(u+=a.size),s.show&&(u+=s.length)):(u=i.width-l.marginEnd,a.show&&(u-=a.size),s.show&&(u-=s.length));var c=this.getWidget().getPane().getAxisComponent().isFromZero()?"left":"right";return r.map(function(f){return{x:u,y:f.coord,text:f.text,align:c,baseline:"middle"}})},t}(hu),op=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getStyles().candle.priceMark,u=l.last,c=u.text;if(l.show&&u.show&&c.show){var f=s.getPrecision(),h=o.getAxisComponent(),d=s.getDataList(),v=d[d.length-1];if(N(v)){var p=v.close,g=v.open,m=h.convertToNicePixel(p),_=void 0;p>g?_=u.upColor:p<g?_=u.downColor:_=u.noChangeColor;var S=void 0;if(h.getType()===Qe.Percentage){var y=s.getVisibleFirstData(),w=y.close;S="".concat(((p-w)/w*100).toFixed(2),"%")}else S=Be(p,f.price);S=je(He(S,s.getThousandsSeparator()),s.getDecimalFoldThreshold());var C=void 0,I=void 0;h.isFromZero()?(C=0,I="left"):(C=a.width,I="right"),(i=this.createFigure({name:"text",attrs:{x:C,y:m,text:S,align:I,baseline:"middle"},styles:te(te({},c),{backgroundColor:_})}))===null||i===void 0||i.draw(r)}}},t}(Vt),ap=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i=this,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=o.getChart().getChartStore(),l=s.getCustomApi(),u=s.getStyles().indicator,c=u.lastValueMark,f=c.text;if(c.show){var h=o.getAxisComponent(),d=s.getDataList(),v=d.length-1,p=s.getIndicatorStore().getInstances(o.getId()),g=s.getThousandsSeparator(),m=s.getDecimalFoldThreshold();p.forEach(function(_){var S=_.result,y=S[v];if(N(y)&&_.visible){var w=_.precision;Ao(d,_,v,u,function(C,I){var T,x=y[C.key];if(ee(x)){var M=h.convertToNicePixel(x),D=Be(x,w);_.shouldFormatBigNumber&&(D=l.formatBigNumber(D)),D=je(He(D,g),m);var P=void 0,H=void 0;h.isFromZero()?(P=0,H="left"):(P=a.width,H="right"),(T=i.createFigure({name:"text",attrs:{x:P,y:M,text:D,align:H,baseline:"middle"},styles:te(te({},f),{backgroundColor:I.color})}))===null||T===void 0||T.draw(r)}})}})}},t}(Vt),du=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!1},t.prototype.drawDefaultFigures=function(r,i,n,o,a,s,l,u,c,f,h,d,v,p){this.drawFigures(r,i,this.getDefaultFigures(i,n,o,a,s,l,u,c,h,d,p),f)},t.prototype.getDefaultFigures=function(r,i,n,o,a,s,l,u,c,f,h){var d,v,p=[];if(r.needDefaultYAxisFigure&&r.id===((d=h.instance)===null||d===void 0?void 0:d.id)&&h.paneId===this.getWidget().getPane().getId()){var g=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER,_=(v=f==null?void 0:f.isFromZero())!==null&&v!==void 0?v:!1,S,y;_?(S="left",y=0):(S="right",y=n.width),i.forEach(function(w,C){var I=r.points[C];if(ee(I.value)){g=Math.min(g,w.y),m=Math.max(m,w.y);var T=je(He(Be(I.value,o.price),l),u);p.push({type:"text",attrs:{x:y,y:w.y,text:T,align:S,baseline:"middle"},ignoreEvent:!0})}}),i.length>1&&p.unshift({type:"rect",attrs:{x:0,y:g,width:n.width,height:m-g},ignoreEvent:!0})}return p},t.prototype.getFigures=function(r,i,n,o,a,s,l,u,c,f,h){var d,v;return(v=(d=r.createYAxisFigures)===null||d===void 0?void 0:d.call(r,{overlay:r,coordinates:i,bounding:n,barSpace:o,precision:a,thousandsSeparator:s,decimalFoldThreshold:l,dateTimeFormat:u,defaultStyles:c,xAxis:f,yAxis:h}))!==null&&v!==void 0?v:[]},t}(cu),vu=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.drawImp=function(r){var i,n=this.getWidget(),o=n.getPane(),a=n.getBounding(),s=n.getPane().getChart().getChartStore(),l=s.getTooltipStore().getCrosshair(),u=s.getStyles().crosshair;if(fe(l.paneId)&&this.compare(l,o.getId())&&u.show){var c=this.getDirectionStyles(u),f=c.text;if(c.show&&f.show){var h=o.getAxisComponent(),d=this.getText(l,s,h);r.font=Er(f.size,f.weight,f.family),(i=this.createFigure({name:"text",attrs:this.getTextAttrs(d,r.measureText(d).width,l,a,h,f),styles:f}))===null||i===void 0||i.draw(r)}}},t.prototype.compare=function(r,i){return r.paneId===i},t.prototype.getDirectionStyles=function(r){return r.horizontal},t.prototype.getText=function(r,i,n){var o=n,a=n.convertFromPixel(r.y),s;if(o.getType()===Qe.Percentage){var l=i.getVisibleFirstData();s="".concat(((a-l.close)/l.close*100).toFixed(2),"%")}else{var u=i.getIndicatorStore().getInstances(r.paneId),c=0,f=!1;o.isInCandle()?c=i.getPrecision().price:u.forEach(function(h){c=Math.max(h.precision,c),f||(f=h.shouldFormatBigNumber)}),s=Be(a,c),f&&(s=i.getCustomApi().formatBigNumber(s))}return je(He(s,i.getThousandsSeparator()),i.getDecimalFoldThreshold())},t.prototype.getTextAttrs=function(r,i,n,o,a,s){var l=a,u,c;return l.isFromZero()?(u=0,c="left"):(u=o.width,c="right"),{x:u,y:n.y,text:r,align:c,baseline:"middle"}},t}(Vt),sp=function(e){pe(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n._yAxisView=new np(n),n._candleLastPriceLabelView=new op(n),n._indicatorLastValueView=new ap(n),n._overlayYAxisView=new du(n),n._crosshairHorizontalLabelView=new vu(n),n.getContainer().style.cursor="ns-resize",n.addChild(n._overlayYAxisView),n}return t.prototype.getName=function(){return me.Y_AXIS},t.prototype.updateMain=function(r){this._yAxisView.draw(r),this.getPane().getAxisComponent().isInCandle()&&this._candleLastPriceLabelView.draw(r),this._indicatorLastValueView.draw(r)},t.prototype.updateOverlay=function(r){this._overlayYAxisView.draw(r),this._crosshairHorizontalLabelView.draw(r)},t}(Oo),pu=function(){function e(t){this._range={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0},this._prevRange={from:0,to:0,range:0,realFrom:0,realTo:0,realRange:0},this._ticks=[],this._autoCalcTickFlag=!0,this._parent=t}return e.prototype.getParent=function(){return this._parent},e.prototype.buildTicks=function(t){if(this._autoCalcTickFlag&&(this._range=this.calcRange()),this._prevRange.from!==this._range.from||this._prevRange.to!==this._range.to||t){this._prevRange=this._range;var r=this.optimalTicks(this._calcTicks());return this._ticks=this.createTicks({range:this._range,bounding:this.getSelfBounding(),defaultTicks:r}),!0}return!1},e.prototype.getTicks=function(){return this._ticks},e.prototype.getScrollZoomEnabled=function(){var t;return(t=this.getParent().getOptions().axisOptions.scrollZoomEnabled)!==null&&t!==void 0?t:!0},e.prototype.setRange=function(t){this._autoCalcTickFlag=!1,this._range=t},e.prototype.getRange=function(){return this._range},e.prototype.setAutoCalcTickFlag=function(t){this._autoCalcTickFlag=t},e.prototype.getAutoCalcTickFlag=function(){return this._autoCalcTickFlag},e.prototype._calcTicks=function(){var t=this._range,r=t.realFrom,i=t.realTo,n=t.realRange,o=[];if(n>=0){var a=Tr(this._calcTickInterval(n),2),s=a[0],l=a[1],u=Ua(Math.ceil(r/s)*s,l),c=Ua(Math.floor(i/s)*s,l),f=0,h=u;if(s!==0)for(;h<=c;){var d=h.toFixed(l);o[f]={text:d,coord:0,value:d},++f,h+=s}}return o},e.prototype._calcTickInterval=function(t){var r=Ed(t/8),i=Id(r);return[r,i]},e}(),lp=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.calcRange=function(){var r,i,n,o,a=this.getParent(),s=a.getChart(),l=s.getChartStore(),u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,f=[],h=!1,d=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER,p=Number.MAX_SAFE_INTEGER,g=l.getIndicatorStore().getInstances(a.getId());g.forEach(function($){var ue,ye,Me;h||(h=(ue=$.shouldOhlc)!==null&&ue!==void 0?ue:!1),p=Math.min(p,$.precision),ee($.minValue)&&(d=Math.min(d,$.minValue)),ee($.maxValue)&&(v=Math.max(v,$.maxValue)),f.push({figures:(ye=$.figures)!==null&&ye!==void 0?ye:[],result:(Me=$.result)!==null&&Me!==void 0?Me:[]})});var m=4,_=this.isInCandle();if(_){var S=l.getPrecision().price;p!==Number.MAX_SAFE_INTEGER?m=Math.min(p,S):m=S}else p!==Number.MAX_SAFE_INTEGER&&(m=p);var y=l.getVisibleDataList(),w=s.getStyles().candle,C=w.type===bt.Area,I=w.area.value,T=_&&!C||!_&&h;y.forEach(function($){var ue=$.dataIndex,ye=$.data;if(N(ye)&&(T&&(u=Math.min(u,ye.low),c=Math.max(c,ye.high)),_&&C)){var Me=ye[I];ee(Me)&&(u=Math.min(u,Me),c=Math.max(c,Me))}f.forEach(function(Se){var We,ze=Se.figures,st=Se.result,et=(We=st[ue])!==null&&We!==void 0?We:{};ze.forEach(function(mt){var tt=et[mt.key];ee(tt)&&(u=Math.min(u,tt),c=Math.max(c,tt))})})}),u!==Number.MAX_SAFE_INTEGER&&c!==Number.MIN_SAFE_INTEGER?(u=Math.min(d,u),c=Math.max(v,c)):(u=0,c=10);var x=this.getType(),M;switch(x){case Qe.Percentage:{var D=l.getVisibleFirstData();N(D)&&ee(D.close)&&(u=(u-D.close)/D.close*100,c=(c-D.close)/D.close*100),M=Math.pow(10,-2);break}case Qe.Log:{u=qr(u),c=qr(c),M=.05*gr(-m);break}default:M=gr(-m)}if(u===c||Math.abs(u-c)<M){var P=d===u,H=v===c;u=P?u:H?u-8*M:u-4*M,c=H?c:P?c+8*M:c+4*M}var X=(i=(r=this.getParent().getYAxisWidget())===null||r===void 0?void 0:r.getBounding().height)!==null&&i!==void 0?i:0,G=a.getOptions().gap,U=(n=G==null?void 0:G.top)!==null&&n!==void 0?n:.2;U>=1&&(U=U/X);var oe=(o=G==null?void 0:G.bottom)!==null&&o!==void 0?o:.1;oe>=1&&(oe=oe/X);var ae=Math.abs(c-u);u=u-ae*oe,c=c+ae*U,ae=Math.abs(c-u);var De,J,we;return x===Qe.Log?(De=gr(u),J=gr(c),we=Math.abs(J-De)):(De=u,J=c,we=ae),{from:u,to:c,range:ae,realFrom:De,realTo:J,realRange:we}},t.prototype._innerConvertToPixel=function(r){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.getRange(),s=a.from,l=a.range,u=(r-s)/l;return this.isReverse()?Math.round(u*o):Math.round((1-u)*o)},t.prototype.isInCandle=function(){return this.getParent().getId()===Ie.CANDLE},t.prototype.getType=function(){return this.isInCandle()?this.getParent().getChart().getStyles().yAxis.type:Qe.Normal},t.prototype.getPosition=function(){return this.getParent().getChart().getStyles().yAxis.position},t.prototype.isReverse=function(){return this.isInCandle()?this.getParent().getChart().getStyles().yAxis.reverse:!1},t.prototype.isFromZero=function(){var r=this.getParent().getChart().getStyles().yAxis,i=r.inside;return r.position===ur.Left&&i||r.position===ur.Right&&!i},t.prototype.optimalTicks=function(r){var i=this,n,o,a=this.getParent(),s=(o=(n=a.getYAxisWidget())===null||n===void 0?void 0:n.getBounding().height)!==null&&o!==void 0?o:0,l=a.getChart().getChartStore(),u=l.getCustomApi(),c=[],f=this.getType(),h=l.getIndicatorStore().getInstances(a.getId()),d=l.getThousandsSeparator(),v=l.getDecimalFoldThreshold(),p=0,g=!1;this.isInCandle()?p=l.getPrecision().price:h.forEach(function(S){p=Math.max(p,S.precision),g||(g=S.shouldFormatBigNumber)});var m=l.getStyles().xAxis.tickText.size,_;return r.forEach(function(S){var y=S.value,w,C=i._innerConvertToPixel(+y);switch(f){case Qe.Percentage:{w="".concat(Be(y,2),"%");break}case Qe.Log:{C=i._innerConvertToPixel(qr(+y)),w=Be(y,p);break}default:{w=Be(y,p),g&&(w=u.formatBigNumber(y));break}}w=je(He(w,d),v);var I=ee(_);C>m&&C<s-m&&(I&&Math.abs(_-C)>m*2||!I)&&(c.push({text:w,coord:C,value:y}),_=C)}),c},t.prototype.getAutoSize=function(){var r=this.getParent(),i=r.getChart(),n=i.getStyles(),o=n.yAxis,a=o.size;if(a!=="auto")return a;var s=i.getChartStore(),l=s.getCustomApi(),u=0;if(o.show&&(o.axisLine.show&&(u+=o.axisLine.size),o.tickLine.show&&(u+=o.tickLine.length),o.tickText.show)){var c=0;this.getTicks().forEach(function(y){c=Math.max(c,di(y.text,o.tickText.size,o.tickText.weight,o.tickText.family))}),u+=o.tickText.marginStart+o.tickText.marginEnd+c}var f=n.crosshair,h=0;if(f.show&&f.horizontal.show&&f.horizontal.text.show){var d=s.getIndicatorStore().getInstances(r.getId()),v=0,p=!1;d.forEach(function(y){v=Math.max(y.precision,v),p||(p=y.shouldFormatBigNumber)});var g=2;if(this.getType()!==Qe.Percentage)if(this.isInCandle()){var m=s.getPrecision().price,_=n.indicator.lastValueMark;_.show&&_.text.show?g=Math.max(v,m):g=m}else g=v;var S=Be(this.getRange().to,g);p&&(S=l.formatBigNumber(S)),S=je(S,s.getDecimalFoldThreshold()),h+=f.horizontal.text.paddingLeft+f.horizontal.text.paddingRight+f.horizontal.text.borderSize*2+di(S,f.horizontal.text.size,f.horizontal.text.weight,f.horizontal.text.family)}return Math.max(u,h)},t.prototype.getSelfBounding=function(){return this.getParent().getYAxisWidget().getBounding()},t.prototype.convertFromPixel=function(r){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.getRange(),s=a.from,l=a.range,u=this.isReverse()?r/o:1-r/o,c=u*l+s;switch(this.getType()){case Qe.Percentage:{var f=this.getParent().getChart().getChartStore().getVisibleFirstData();return N(f)&&ee(f.close)?f.close*c/100+f.close:0}case Qe.Log:return gr(c);default:return c}},t.prototype.convertToRealValue=function(r){var i=r;return this.getType()===Qe.Log&&(i=gr(r)),i},t.prototype.convertToPixel=function(r){var i=r;switch(this.getType()){case Qe.Percentage:{var n=this.getParent().getChart().getChartStore().getVisibleFirstData();N(n)&&ee(n.close)&&(i=(r-n.close)/n.close*100);break}case Qe.Log:{i=qr(r);break}default:i=r}return this._innerConvertToPixel(i)},t.prototype.convertToNicePixel=function(r){var i,n,o=(n=(i=this.getParent().getYAxisWidget())===null||i===void 0?void 0:i.getBounding().height)!==null&&n!==void 0?n:0,a=this.convertToPixel(r);return Math.round(Math.max(o*.05,Math.min(a,o*.98)))},t.extend=function(r){var i=function(n){pe(o,n);function o(){return n!==null&&n.apply(this,arguments)||this}return o.prototype.createTicks=function(a){return r.createTicks(a)},o}(t);return i},t}(pu),up={name:"default",createTicks:function(e){var t=e.defaultTicks;return t}},Ja={default:lp.extend(up)};function cp(e){var t;return(t=Ja[e])!==null&&t!==void 0?t:Ja.default}var gu=function(){function e(t,r,i,n){this._bounding=Gl(),this._chart=i,this._id=n,this._init(t,r)}return e.prototype._init=function(t,r){this._rootContainer=t,this._container=$t("div",{width:"100%",margin:"0",padding:"0",position:"relative",overflow:"hidden",boxSizing:"border-box"}),r!==null?t.insertBefore(this._container,r):t.appendChild(this._container)},e.prototype.getContainer=function(){return this._container},e.prototype.getId=function(){return this._id},e.prototype.getChart=function(){return this._chart},e.prototype.getBounding=function(){return this._bounding},e.prototype.update=function(t){this._bounding.height!==this._container.clientHeight&&(this._container.style.height="".concat(this._bounding.height,"px")),this.updateImp(t??3,this._container,this._bounding)},e.prototype.destroy=function(){this._rootContainer.removeChild(this._container)},e}(),mu=function(e){pe(t,e);function t(r,i,n,o,a){var s=e.call(this,r,i,n,o)||this;s._yAxisWidget=null,s._options={minHeight:Pv,dragEnabled:!0,gap:{top:.2,bottom:.1},axisOptions:{name:"default",scrollZoomEnabled:!0}};var l=s.getContainer();return s._mainWidget=s.createMainWidget(l),s._yAxisWidget=s.createYAxisWidget(l),s.setOptions(a),s}return t.prototype.setOptions=function(r){var i,n,o,a=(i=r.axisOptions)===null||i===void 0?void 0:i.name;(this._options.axisOptions.name!==a&&fe(a)||!N(this._axis))&&(this._axis=this.createAxisComponent(a??"default")),pt(this._options,r);var s,l;return this.getId()===Ie.X_AXIS?(s=this.getMainWidget().getContainer(),l="ew-resize"):(s=this.getYAxisWidget().getContainer(),l="ns-resize"),!((o=(n=r.axisOptions)===null||n===void 0?void 0:n.scrollZoomEnabled)!==null&&o!==void 0)||o?s.style.cursor=l:s.style.cursor="default",this},t.prototype.getOptions=function(){return this._options},t.prototype.getAxisComponent=function(){return this._axis},t.prototype.setBounding=function(r,i,n){var o,a;pt(this.getBounding(),r);var s={};return N(r.height)&&(s.height=r.height),N(r.top)&&(s.top=r.top),this._mainWidget.setBounding(s),(o=this._yAxisWidget)===null||o===void 0||o.setBounding(s),N(i)&&this._mainWidget.setBounding(i),N(n)&&((a=this._yAxisWidget)===null||a===void 0||a.setBounding(n)),this},t.prototype.getMainWidget=function(){return this._mainWidget},t.prototype.getYAxisWidget=function(){return this._yAxisWidget},t.prototype.updateImp=function(r){var i;this._mainWidget.update(r),(i=this._yAxisWidget)===null||i===void 0||i.update(r)},t.prototype.destroy=function(){var r;e.prototype.destroy.call(this),this._mainWidget.destroy(),(r=this._yAxisWidget)===null||r===void 0||r.destroy()},t.prototype.getImage=function(r){var i=this.getBounding(),n=i.width,o=i.height,a=$t("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),s=a.getContext("2d"),l=ar(a);a.width=n*l,a.height=o*l,s.scale(l,l);var u=this._mainWidget.getBounding();if(s.drawImage(this._mainWidget.getImage(r),u.left,0,u.width,u.height),this._yAxisWidget!==null){var c=this._yAxisWidget.getBounding();s.drawImage(this._yAxisWidget.getImage(r),c.left,0,c.width,c.height)}return a},t.prototype.createYAxisWidget=function(r){return null},t}(gu),_u=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(r){var i=cp(r??"default");return new i(this)},t.prototype.createMainWidget=function(r){return new fu(r,this)},t.prototype.createYAxisWidget=function(r){return new sp(r,this)},t}(mu),fp=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createMainWidget=function(r){return new ip(r,this)},t}(_u),hp=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAxisStyles=function(r){return r.xAxis},t.prototype.createAxisLine=function(r){return{coordinates:[{x:0,y:0},{x:r.width,y:0}]}},t.prototype.createTickLines=function(r,i,n){var o=n.tickLine,a=n.axisLine.size;return r.map(function(s){return{coordinates:[{x:s.coord,y:0},{x:s.coord,y:a+o.length}]}})},t.prototype.createTickTexts=function(r,i,n){var o=n.tickText,a=n.axisLine.size,s=n.tickLine.length;return r.map(function(l){return{x:l.coord,y:a+s+o.marginStart,text:l.text,align:"center",baseline:"top"}})},t}(hu),dp=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.coordinateToPointTimestampDataIndexFlag=function(){return!0},t.prototype.coordinateToPointValueFlag=function(){return!1},t.prototype.getCompleteOverlays=function(r){return r.getInstances()},t.prototype.getProgressOverlay=function(r){return r.instance},t.prototype.getDefaultFigures=function(r,i,n,o,a,s,l,u,c,f,h){var d,v=[];if(r.needDefaultXAxisFigure&&r.id===((d=h.instance)===null||d===void 0?void 0:d.id)){var p=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;i.forEach(function(m,_){p=Math.min(p,m.x),g=Math.max(g,m.x);var S=r.points[_];if(ee(S.timestamp)){var y=s.formatDate(a,S.timestamp,"YYYY-MM-DD HH:mm",it.Crosshair);v.push({type:"text",attrs:{x:m.x,y:0,text:y,align:"center"},ignoreEvent:!0})}}),i.length>1&&v.unshift({type:"rect",attrs:{x:p,y:0,width:g-p,height:n.height},ignoreEvent:!0})}return v},t.prototype.getFigures=function(r,i,n,o,a,s,l,u,c,f,h){var d,v;return(v=(d=r.createXAxisFigures)===null||d===void 0?void 0:d.call(r,{overlay:r,coordinates:i,bounding:n,barSpace:o,precision:a,thousandsSeparator:s,decimalFoldThreshold:l,dateTimeFormat:u,defaultStyles:c,xAxis:f,yAxis:h}))!==null&&v!==void 0?v:[]},t}(du),vp=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(r){return N(r.kLineData)&&r.dataIndex===r.realDataIndex},t.prototype.getDirectionStyles=function(r){return r.vertical},t.prototype.getText=function(r,i){var n,o=(n=r.kLineData)===null||n===void 0?void 0:n.timestamp;return i.getCustomApi().formatDate(i.getTimeScaleStore().getDateTimeFormat(),o,"YYYY-MM-DD HH:mm",it.Crosshair)},t.prototype.getTextAttrs=function(r,i,n,o,a,s){var l=n.realX,u,c="center";return l-i/2-s.paddingLeft<0?(u=0,c="left"):l+i/2+s.paddingRight>o.width?(u=o.width,c="right"):u=l,{x:u,y:0,text:r,align:c,baseline:"top"}},t}(vu),pp=function(e){pe(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n._xAxisView=new hp(n),n._overlayXAxisView=new dp(n),n._crosshairVerticalLabelView=new vp(n),n.getContainer().style.cursor="ew-resize",n.addChild(n._overlayXAxisView),n}return t.prototype.getName=function(){return me.X_AXIS},t.prototype.updateMain=function(r){this._xAxisView.draw(r)},t.prototype.updateOverlay=function(r){this._overlayXAxisView.draw(r),this._crosshairVerticalLabelView.draw(r)},t}(Oo),gp=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.calcRange=function(){var r=this.getParent().getChart().getChartStore(),i=r.getTimeScaleStore().getVisibleRange(),n=i.from,o=i.to,a=n,s=o-1,l=o-n;return{from:a,to:s,range:l,realFrom:a,realTo:s,realRange:l}},t.prototype.optimalTicks=function(r){var i,n,o=this.getParent().getChart(),a=o.getChartStore(),s=a.getCustomApi().formatDate,l=[],u=r.length,c=a.getDataList();if(u>0){var f=a.getTimeScaleStore().getDateTimeFormat(),h=o.getStyles().xAxis.tickText,d=di("00-00 00:00",h.size,h.weight,h.family),v=parseInt(r[0].value,10),p=this.convertToPixel(v),g=1;if(u>1){var m=parseInt(r[1].value,10),_=this.convertToPixel(m),S=Math.abs(_-p);S<d&&(g=Math.ceil(d/S))}for(var y=0;y<u;y+=g){var w=parseInt(r[y].value,10),C=c[w],I=C.timestamp,T=s(f,I,"HH:mm",it.XAxis);if(y!==0){var x=parseInt(r[y-g].value,10),M=c[x],D=M.timestamp;T=(i=this._optimalTickLabel(s,f,I,D))!==null&&i!==void 0?i:T}var P=this.convertToPixel(w);l.push({text:T,coord:P,value:I})}var H=l.length;if(H===1)l[0].text=s(f,l[0].value,"YYYY-MM-DD HH:mm",it.XAxis);else{var X=l[0].value,G=l[1].value;if(N(l[2])){var U=l[2].text;/^[0-9]{2}-[0-9]{2}$/.test(U)?l[0].text=s(f,X,"MM-DD",it.XAxis):/^[0-9]{4}-[0-9]{2}$/.test(U)?l[0].text=s(f,X,"YYYY-MM",it.XAxis):/^[0-9]{4}$/.test(U)&&(l[0].text=s(f,X,"YYYY",it.XAxis))}else l[0].text=(n=this._optimalTickLabel(s,f,X,G))!==null&&n!==void 0?n:l[0].text}}return l},t.prototype._optimalTickLabel=function(r,i,n,o){var a=r(i,n,"YYYY",it.XAxis),s=r(i,n,"YYYY-MM",it.XAxis),l=r(i,n,"MM-DD",it.XAxis);return a!==r(i,o,"YYYY",it.XAxis)?a:s!==r(i,o,"YYYY-MM",it.XAxis)?s:l!==r(i,o,"MM-DD",it.XAxis)?l:null},t.prototype.getAutoSize=function(){var r=this.getParent().getChart().getStyles(),i=r.xAxis,n=i.size;if(n!=="auto")return n;var o=r.crosshair,a=0;i.show&&(i.axisLine.show&&(a+=i.axisLine.size),i.tickLine.show&&(a+=i.tickLine.length),i.tickText.show&&(a+=i.tickText.marginStart+i.tickText.marginEnd+i.tickText.size));var s=0;return o.show&&o.vertical.show&&o.vertical.text.show&&(s+=o.vertical.text.paddingTop+o.vertical.text.paddingBottom+o.vertical.text.borderSize*2+o.vertical.text.size),Math.max(a,s)},t.prototype.getSelfBounding=function(){return this.getParent().getMainWidget().getBounding()},t.prototype.convertTimestampFromPixel=function(r){var i=this.getParent().getChart().getChartStore().getTimeScaleStore(),n=i.coordinateToDataIndex(r);return i.dataIndexToTimestamp(n)},t.prototype.convertTimestampToPixel=function(r){var i=this.getParent().getChart().getChartStore().getTimeScaleStore(),n=i.timestampToDataIndex(r);return i.dataIndexToCoordinate(n)},t.prototype.convertFromPixel=function(r){return this.getParent().getChart().getChartStore().getTimeScaleStore().coordinateToDataIndex(r)},t.prototype.convertToPixel=function(r){return this.getParent().getChart().getChartStore().getTimeScaleStore().dataIndexToCoordinate(r)},t.extend=function(r){var i=function(n){pe(o,n);function o(){return n!==null&&n.apply(this,arguments)||this}return o.prototype.createTicks=function(a){return r.createTicks(a)},o}(t);return i},t}(pu),mp={name:"default",createTicks:function(e){var t=e.defaultTicks;return t}},Qa={default:gp.extend(mp)};function _p(e){var t;return(t=Qa[e])!==null&&t!==void 0?t:Qa.default}var yp=function(e){pe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createAxisComponent=function(r){var i=_p(r);return new i(this)},t.prototype.createMainWidget=function(r){return new pp(r,this)},t}(mu);function bp(e,t){var r=0;return function(){var i=Date.now();i-r>t&&(e.apply(this,arguments),r=i)}}var Sp=function(e){pe(t,e);function t(r,i){var n=e.call(this,r,i)||this;return n._dragFlag=!1,n._dragStartY=0,n._topPaneHeight=0,n._bottomPaneHeight=0,n._pressedMouseMoveEvent=bp(n._pressedTouchMouseMoveEvent,20),n.registerEvent("touchStartEvent",n._mouseDownEvent.bind(n)).registerEvent("touchMoveEvent",n._pressedMouseMoveEvent.bind(n)).registerEvent("touchEndEvent",n._mouseUpEvent.bind(n)).registerEvent("mouseDownEvent",n._mouseDownEvent.bind(n)).registerEvent("mouseUpEvent",n._mouseUpEvent.bind(n)).registerEvent("pressedMouseMoveEvent",n._pressedMouseMoveEvent.bind(n)).registerEvent("mouseEnterEvent",n._mouseEnterEvent.bind(n)).registerEvent("mouseLeaveEvent",n._mouseLeaveEvent.bind(n)),n}return t.prototype.getName=function(){return me.SEPARATOR},t.prototype.checkEventOn=function(){return!0},t.prototype._mouseDownEvent=function(r){this._dragFlag=!0,this._dragStartY=r.pageY;var i=this.getPane();return this._topPaneHeight=i.getTopPane().getBounding().height,this._bottomPaneHeight=i.getBottomPane().getBounding().height,!0},t.prototype._mouseUpEvent=function(){return this._dragFlag=!1,this._mouseLeaveEvent()},t.prototype._pressedTouchMouseMoveEvent=function(r){var i=r.pageY-this._dragStartY,n=this.getPane(),o=n.getTopPane(),a=n.getBottomPane(),s=i<0;if(o!==null&&(a!=null&&a.getOptions().dragEnabled)){var l=void 0,u=void 0,c=void 0,f=void 0;s?(l=o,u=a,c=this._topPaneHeight,f=this._bottomPaneHeight):(l=a,u=o,c=this._bottomPaneHeight,f=this._topPaneHeight);var h=l.getOptions().minHeight;if(c>h){var d=Math.max(c-Math.abs(i),h),v=c-d;l.setBounding({height:d}),u.setBounding({height:f+v});var p=n.getChart();p.getChartStore().getActionStore().execute(Ct.OnPaneDrag,{paneId:n.getId()}),p.adjustPaneViewport(!0,!0,!0,!0,!0)}}return!0},t.prototype._mouseEnterEvent=function(){var r,i=this.getPane(),n=i.getBottomPane();if((r=n==null?void 0:n.getOptions().dragEnabled)!==null&&r!==void 0&&r){var o=i.getChart(),a=o.getStyles().separator;return this.getContainer().style.background=a.activeBackgroundColor,!0}return!1},t.prototype._mouseLeaveEvent=function(){return this._dragFlag?!1:(this.getContainer().style.background="",!0)},t.prototype.createContainer=function(){return $t("div",{width:"100%",height:"".concat(ai,"px"),margin:"0",padding:"0",position:"absolute",top:"-3px",zIndex:"20",boxSizing:"border-box",cursor:"ns-resize"})},t.prototype.updateImp=function(r,i,n){if(n===4||n===2){var o=this.getPane().getChart().getStyles().separator;r.style.top="".concat(-Math.floor((ai-o.size)/2),"px"),r.style.height="".concat(ai,"px")}},t}(ql),es=function(e){pe(t,e);function t(r,i,n,o,a,s){var l=e.call(this,r,i,n,o)||this;return l.getContainer().style.overflow="",l._topPane=a,l._bottomPane=s,l._separatorWidget=new Sp(l.getContainer(),l),l}return t.prototype.setBounding=function(r){return pt(this.getBounding(),r),this},t.prototype.getTopPane=function(){return this._topPane},t.prototype.setTopPane=function(r){return this._topPane=r,this},t.prototype.getBottomPane=function(){return this._bottomPane},t.prototype.setBottomPane=function(r){return this._bottomPane=r,this},t.prototype.getWidget=function(){return this._separatorWidget},t.prototype.getImage=function(r){var i=this.getBounding(),n=i.width,o=i.height,a=this.getChart().getStyles().separator,s=$t("canvas",{width:"".concat(n,"px"),height:"".concat(o,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=ar(s);return s.width=n*u,s.height=o*u,l.scale(u,u),l.fillStyle=a.color,l.fillRect(0,0,n,o),s},t.prototype.updateImp=function(r,i,n){if(r===4||r===2){var o=this.getChart().getStyles().separator;i.style.backgroundColor=o.color,i.style.height="".concat(n.height,"px"),i.style.marginLeft="".concat(n.left,"px"),i.style.width="".concat(n.width,"px"),this._separatorWidget.update(r)}},t}(gu);function ts(){var e;return typeof window>"u"?!1:((e=window.navigator.userAgent.toLowerCase().indexOf("firefox"))!==null&&e!==void 0?e:-1)>-1}function Fn(){return typeof window>"u"?!1:/iPhone|iPad|iPod/.test(window.navigator.platform)}var wp=10,xp=function(){function e(t,r,i){var n=this;this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartCoordinate=null,this._touchMoveStartCoordinate=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeMouseWheel=null,this._unsubscribeContextMenu=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._startPinchMiddleCoordinate=null,this._startPinchDistance=0,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!Fn(),this._onFirefoxOutsideMouseUp=function(o){n._mouseUpHandler(o)},this._onMobileSafariDoubleClick=function(o){if(n._firesTouchEvents(o)){if(++n._tapCount,n._tapTimeoutId!==null&&n._tapCount>1){var a=n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._tapCoordinate).manhattanDistance;a<30&&!n._cancelTap&&n._processEvent(n._makeCompatEvent(o),n._handler.doubleTapEvent),n._resetTapTimeout()}}else if(++n._clickCount,n._clickTimeoutId!==null&&n._clickCount>1){var a=n._mouseTouchMoveWithDownInfo(n._getCoordinate(o),n._clickCoordinate).manhattanDistance;a<5&&!n._cancelClick&&n._processEvent(n._makeCompatEvent(o),n._handler.mouseDoubleClickEvent),n._resetClickTimeout()}},this._target=t,this._handler=r,this._options=i,this._init()}return e.prototype.destroy=function(){this._unsubscribeOutsideMouseEvents!==null&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),this._unsubscribeOutsideTouchEvents!==null&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),this._unsubscribeMousemove!==null&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),this._unsubscribeMouseWheel!==null&&(this._unsubscribeMouseWheel(),this._unsubscribeMouseWheel=null),this._unsubscribeContextMenu!==null&&(this._unsubscribeContextMenu(),this._unsubscribeContextMenu=null),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),this._unsubscribeMobileSafariEvents!==null&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()},e.prototype._mouseEnterHandler=function(t){var r=this,i,n,o;(i=this._unsubscribeMousemove)===null||i===void 0||i.call(this),(n=this._unsubscribeMouseWheel)===null||n===void 0||n.call(this),(o=this._unsubscribeContextMenu)===null||o===void 0||o.call(this);var a=this._mouseMoveHandler.bind(this);this._unsubscribeMousemove=function(){r._target.removeEventListener("mousemove",a)},this._target.addEventListener("mousemove",a);var s=this._mouseWheelHandler.bind(this);this._unsubscribeMouseWheel=function(){r._target.removeEventListener("wheel",s)},this._target.addEventListener("wheel",s,{passive:!1});var l=this._contextMenuHandler.bind(this);this._unsubscribeContextMenu=function(){r._target.removeEventListener("contextmenu",l)},this._target.addEventListener("contextmenu",l,{passive:!1}),!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseEnterEvent),this._acceptMouseLeave=!0)},e.prototype._resetClickTimeout=function(){this._clickTimeoutId!==null&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._resetTapTimeout=function(){this._tapTimeoutId!==null&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapCoordinate={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}},e.prototype._mouseMoveHandler=function(t){this._mousePressed||this._touchMoveStartCoordinate!==null||this._firesTouchEvents(t)||(this._processEvent(this._makeCompatEvent(t),this._handler.mouseMoveEvent),this._acceptMouseLeave=!0)},e.prototype._mouseWheelHandler=function(t){if(Math.abs(t.deltaX)>Math.abs(t.deltaY)){if(!N(this._handler.mouseWheelHortEvent)||(this._preventDefault(t),Math.abs(t.deltaX)===0))return;this._handler.mouseWheelHortEvent(this._makeCompatEvent(t),-t.deltaX)}else{if(!N(this._handler.mouseWheelVertEvent))return;var r=-(t.deltaY/100);if(r===0)return;switch(this._preventDefault(t),t.deltaMode){case t.DOM_DELTA_PAGE:r*=120;break;case t.DOM_DELTA_LINE:r*=32;break}if(r!==0){var i=Math.sign(r)*Math.min(1,Math.abs(r));this._handler.mouseWheelVertEvent(this._makeCompatEvent(t),i)}}},e.prototype._contextMenuHandler=function(t){this._preventDefault(t)},e.prototype._touchMoveHandler=function(t){var r=this._touchWithId(t.changedTouches,this._activeTouchId);if(r!==null&&(this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._startPinchMiddleCoordinate===null&&!this._preventTouchDragProcess)){this._pinchPrevented=!0;var i=this._mouseTouchMoveWithDownInfo(this._getCoordinate(r),this._touchMoveStartCoordinate),n=i.xOffset,o=i.yOffset,a=i.manhattanDistance;if(!(!this._touchMoveExceededManhattanDistance&&a<5)){if(!this._touchMoveExceededManhattanDistance){var s=n*.5,l=o>=s&&!this._options.treatVertDragAsPageScroll(),u=s>o&&!this._options.treatHorzDragAsPageScroll();!l&&!u&&(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}this._preventTouchDragProcess||this._processEvent(this._makeCompatEvent(t,r),this._handler.touchMoveEvent)}}},e.prototype._mouseMoveWithDownHandler=function(t){if(t.button===0){var r=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._mouseMoveStartCoordinate),i=r.manhattanDistance;i>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick&&this._processEvent(this._makeCompatEvent(t),this._handler.pressedMouseMoveEvent)}},e.prototype._mouseTouchMoveWithDownInfo=function(t,r){var i=Math.abs(r.x-t.x),n=Math.abs(r.y-t.y),o=i+n;return{xOffset:i,yOffset:n,manhattanDistance:o}},e.prototype._touchEndHandler=function(t){var r=this._touchWithId(t.changedTouches,this._activeTouchId);if(r===null&&t.touches.length===0&&(r=t.changedTouches[0]),r!==null){this._activeTouchId=null,this._lastTouchEventTimeStamp=this._eventTimeStamp(t),this._clearLongTapTimeout(),this._touchMoveStartCoordinate=null,this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);var i=this._makeCompatEvent(t,r);if(this._processEvent(i,this._handler.touchEndEvent),++this._tapCount,this._tapTimeoutId!==null&&this._tapCount>1){var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(r),this._tapCoordinate).manhattanDistance;n<30&&!this._cancelTap&&this._processEvent(i,this._handler.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processEvent(i,this._handler.tapEvent),N(this._handler.tapEvent)&&this._preventDefault(t));this._tapCount===0&&this._preventDefault(t),t.touches.length===0&&this._longTapActive&&(this._longTapActive=!1,this._preventDefault(t))}},e.prototype._mouseUpHandler=function(t){if(t.button===0){var r=this._makeCompatEvent(t);if(this._mouseMoveStartCoordinate=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),ts()){var i=this._target.ownerDocument.documentElement;i.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}if(!this._firesTouchEvents(t))if(this._processEvent(r,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId!==null&&this._clickCount>1){var n=this._mouseTouchMoveWithDownInfo(this._getCoordinate(t),this._clickCoordinate).manhattanDistance;n<5&&!this._cancelClick&&this._processEvent(r,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processEvent(r,this._handler.mouseClickEvent)}},e.prototype._clearLongTapTimeout=function(){this._longTapTimeoutId!==null&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)},e.prototype._touchStartHandler=function(t){if(this._activeTouchId===null){var r=t.changedTouches[0];this._activeTouchId=r.identifier,this._lastTouchEventTimeStamp=this._eventTimeStamp(t);var i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartCoordinate=this._getCoordinate(r),this._unsubscribeRootTouchEvents!==null&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{var n=this._touchMoveHandler.bind(this),o=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=function(){i.removeEventListener("touchmove",n),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",n,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,t),500)}this._processEvent(this._makeCompatEvent(t,r),this._handler.touchStartEvent),this._tapTimeoutId===null&&(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapCoordinate=this._getCoordinate(r))}},e.prototype._mouseDownHandler=function(t){if(t.button===2){this._preventDefault(t),this._processEvent(this._makeCompatEvent(t),this._handler.mouseRightClickEvent);return}if(t.button===0){var r=this._target.ownerDocument.documentElement;ts()&&r.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartCoordinate=this._getCoordinate(t),this._unsubscribeRootMouseEvents!==null&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{var i=this._mouseMoveWithDownHandler.bind(this),n=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=function(){r.removeEventListener("mousemove",i),r.removeEventListener("mouseup",n)},r.addEventListener("mousemove",i),r.addEventListener("mouseup",n)}this._mousePressed=!0,!this._firesTouchEvents(t)&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseDownEvent),this._clickTimeoutId===null&&(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickCoordinate=this._getCoordinate(t)))}},e.prototype._init=function(){var t=this;this._target.addEventListener("mouseenter",this._mouseEnterHandler.bind(this)),this._target.addEventListener("touchcancel",this._clearLongTapTimeout.bind(this));{var r=this._target.ownerDocument,i=function(n){t._handler.mouseDownOutsideEvent!=null&&(n.composed&&t._target.contains(n.composedPath()[0])||n.target!==null&&t._target.contains(n.target)||t._handler.mouseDownOutsideEvent({x:0,y:0,pageX:0,pageY:0}))};this._unsubscribeOutsideTouchEvents=function(){r.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=function(){r.removeEventListener("mousedown",i)},r.addEventListener("mousedown",i),r.addEventListener("touchstart",i,{passive:!0})}Fn()&&(this._unsubscribeMobileSafariEvents=function(){t._target.removeEventListener("dblclick",t._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick)),this._target.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this)),this._target.addEventListener("touchstart",this._touchStartHandler.bind(this),{passive:!0}),this._target.addEventListener("mousedown",function(n){if(n.button===1)return n.preventDefault(),!1}),this._target.addEventListener("mousedown",this._mouseDownHandler.bind(this)),this._initPinch(),this._target.addEventListener("touchmove",function(){},{passive:!1})},e.prototype._initPinch=function(){var t=this;!N(this._handler.pinchStartEvent)&&!N(this._handler.pinchEvent)&&!N(this._handler.pinchEndEvent)||(this._target.addEventListener("touchstart",function(r){t._checkPinchState(r.touches)},{passive:!0}),this._target.addEventListener("touchmove",function(r){if(!(r.touches.length!==2||t._startPinchMiddleCoordinate===null)&&N(t._handler.pinchEvent)){var i=t._getTouchDistance(r.touches[0],r.touches[1]),n=i/t._startPinchDistance;t._handler.pinchEvent(te(te({},t._startPinchMiddleCoordinate),{pageX:0,pageY:0}),n),t._preventDefault(r)}},{passive:!1}),this._target.addEventListener("touchend",function(r){t._checkPinchState(r.touches)}))},e.prototype._checkPinchState=function(t){t.length===1&&(this._pinchPrevented=!1),t.length!==2||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(t)},e.prototype._startPinch=function(t){var r,i=(r=this._target.getBoundingClientRect())!==null&&r!==void 0?r:{left:0,top:0};this._startPinchMiddleCoordinate={x:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,y:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this._startPinchDistance=this._getTouchDistance(t[0],t[1]),N(this._handler.pinchStartEvent)&&this._handler.pinchStartEvent({x:0,y:0,pageX:0,pageY:0}),this._clearLongTapTimeout()},e.prototype._stopPinch=function(){this._startPinchMiddleCoordinate!==null&&(this._startPinchMiddleCoordinate=null,N(this._handler.pinchEndEvent)&&this._handler.pinchEndEvent({x:0,y:0,pageX:0,pageY:0}))},e.prototype._mouseLeaveHandler=function(t){var r,i,n;(r=this._unsubscribeMousemove)===null||r===void 0||r.call(this),(i=this._unsubscribeMouseWheel)===null||i===void 0||i.call(this),(n=this._unsubscribeContextMenu)===null||n===void 0||n.call(this),!this._firesTouchEvents(t)&&this._acceptMouseLeave&&(this._processEvent(this._makeCompatEvent(t),this._handler.mouseLeaveEvent),this._acceptMouseLeave=!Fn())},e.prototype._longTapHandler=function(t){var r=this._touchWithId(t.touches,this._activeTouchId);r!==null&&(this._processEvent(this._makeCompatEvent(t,r),this._handler.longTapEvent),this._cancelTap=!0,this._longTapActive=!0)},e.prototype._firesTouchEvents=function(t){var r;return N((r=t.sourceCapabilities)===null||r===void 0?void 0:r.firesTouchEvents)?t.sourceCapabilities.firesTouchEvents:this._eventTimeStamp(t)<this._lastTouchEventTimeStamp+500},e.prototype._processEvent=function(t,r){r==null||r.call(this._handler,t)},e.prototype._makeCompatEvent=function(t,r){var i=this,n,o=r??t,a=(n=this._target.getBoundingClientRect())!==null&&n!==void 0?n:{left:0,top:0};return{x:o.clientX-a.left,y:o.clientY-a.top,pageX:o.pageX,pageY:o.pageY,isTouch:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click"&&t.type!=="wheel",preventDefault:function(){t.type!=="touchstart"&&i._preventDefault(t)}}},e.prototype._getTouchDistance=function(t,r){var i=t.clientX-r.clientX,n=t.clientY-r.clientY;return Math.sqrt(i*i+n*n)},e.prototype._preventDefault=function(t){t.cancelable&&t.preventDefault()},e.prototype._getCoordinate=function(t){return{x:t.pageX,y:t.pageY}},e.prototype._eventTimeStamp=function(t){var r;return(r=t.timeStamp)!==null&&r!==void 0?r:performance.now()},e.prototype._touchWithId=function(t,r){for(var i=0;i<t.length;++i)if(t[i].identifier===r)return t[i];return null},e}(),Cp=function(){function e(t,r){var i=this;this._flingStartTime=new Date().getTime(),this._flingScrollRequestId=null,this._startScrollCoordinate=null,this._touchCoordinate=null,this._touchCancelCrosshair=!1,this._touchZoomed=!1,this._pinchScale=1,this._mouseDownWidget=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,this._mouseMoveTriggerWidgetInfo={pane:null,widget:null},this._boundKeyBoardDownEvent=function(n){if(n.shiftKey)switch(n.code){case"Equal":{i._chart.getChartStore().getTimeScaleStore().zoom(.5);break}case"Minus":{i._chart.getChartStore().getTimeScaleStore().zoom(-.5);break}case"ArrowLeft":{var o=i._chart.getChartStore().getTimeScaleStore();o.startScroll(),o.scroll(-3*o.getBarSpace().bar);break}case"ArrowRight":{var o=i._chart.getChartStore().getTimeScaleStore();o.startScroll(),o.scroll(3*o.getBarSpace().bar);break}}},this._container=t,this._chart=r,this._event=new xp(t,this,{treatVertDragAsPageScroll:function(){return!1},treatHorzDragAsPageScroll:function(){return!1}}),t.addEventListener("keydown",this._boundKeyBoardDownEvent)}return e.prototype.pinchStartEvent=function(){return this._touchZoomed=!0,this._pinchScale=1,!0},e.prototype.pinchEvent=function(t,r){var i=this._findWidgetByEvent(t),n=i.pane,o=i.widget;if((n==null?void 0:n.getId())!==Ie.X_AXIS&&(o==null?void 0:o.getName())===me.MAIN){var a=this._makeWidgetEvent(t,o),s=(r-this._pinchScale)*5;return this._pinchScale=r,this._chart.getChartStore().getTimeScaleStore().zoom(s,{x:a.x,y:a.y}),!0}return!1},e.prototype.mouseWheelHortEvent=function(t,r){var i=this._chart.getChartStore().getTimeScaleStore();return i.startScroll(),i.scroll(r),!0},e.prototype.mouseWheelVertEvent=function(t,r){var i=this._findWidgetByEvent(t).widget,n=this._makeWidgetEvent(t,i),o=i==null?void 0:i.getName();return o===me.MAIN?(this._chart.getChartStore().getTimeScaleStore().zoom(r,{x:n.x,y:n.y}),!0):!1},e.prototype.mouseDownEvent=function(t){var r,i,n=this._findWidgetByEvent(t),o=n.pane,a=n.widget;if(this._mouseDownWidget=a,a!==null){var s=this._makeWidgetEvent(t,a),l=a.getName();switch(l){case me.SEPARATOR:return a.dispatchEvent("mouseDownEvent",s);case me.MAIN:{var u=(r=o.getAxisComponent().getRange())!==null&&r!==void 0?r:null;return this._prevYAxisRange=u===null?u:te({},u),this._startScrollCoordinate={x:s.x,y:s.y},this._chart.getChartStore().getTimeScaleStore().startScroll(),a.dispatchEvent("mouseDownEvent",s)}case me.X_AXIS:{var c=a.dispatchEvent("mouseDownEvent",s);return c&&this._chart.updatePane(1),this._xAxisStartScaleCoordinate={x:s.x,y:s.y},this._xAxisStartScaleDistance=s.pageX,c}case me.Y_AXIS:{var c=a.dispatchEvent("mouseDownEvent",s);c&&this._chart.updatePane(1);var u=(i=o.getAxisComponent().getRange())!==null&&i!==void 0?i:null;return this._prevYAxisRange=u===null?u:te({},u),this._yAxisStartScaleDistance=s.pageY,c}}}return!1},e.prototype.mouseMoveEvent=function(t){var r,i,n,o=this._findWidgetByEvent(t),a=o.pane,s=o.widget,l=this._makeWidgetEvent(t,s);if((((r=this._mouseMoveTriggerWidgetInfo.pane)===null||r===void 0?void 0:r.getId())!==(a==null?void 0:a.getId())||((i=this._mouseMoveTriggerWidgetInfo.widget)===null||i===void 0?void 0:i.getName())!==(s==null?void 0:s.getName()))&&(s==null||s.dispatchEvent("mouseEnterEvent",l),(n=this._mouseMoveTriggerWidgetInfo.widget)===null||n===void 0||n.dispatchEvent("mouseLeaveEvent",l),this._mouseMoveTriggerWidgetInfo={pane:a,widget:s}),s!==null){var u=s.getName();switch(u){case me.MAIN:{var c=s.dispatchEvent("mouseMoveEvent",l),f=this._chart.getChartStore(),h={x:l.x,y:l.y,paneId:a==null?void 0:a.getId()};return c&&f.getTooltipStore().getActiveIcon()!==null&&(h=void 0,s!==null&&(s.getContainer().style.cursor="pointer")),this._chart.getChartStore().getTooltipStore().setCrosshair(h),c}case me.SEPARATOR:case me.X_AXIS:case me.Y_AXIS:{var c=s.dispatchEvent("mouseMoveEvent",l);return this._chart.getChartStore().getTooltipStore().setCrosshair(),c}}}return!1},e.prototype.pressedMouseMoveEvent=function(t){var r,i,n,o,a;if(this._mouseDownWidget!==null&&this._mouseDownWidget.getName()===me.SEPARATOR)return this._mouseDownWidget.dispatchEvent("pressedMouseMoveEvent",t);var s=this._findWidgetByEvent(t),l=s.pane,u=s.widget;if(u!==null&&((r=this._mouseDownWidget)===null||r===void 0?void 0:r.getPane().getId())===(l==null?void 0:l.getId())&&((i=this._mouseDownWidget)===null||i===void 0?void 0:i.getName())===u.getName()){var c=this._makeWidgetEvent(t,u),f=u.getName();switch(f){case me.MAIN:{var h=u.getBounding(),d=u.dispatchEvent("pressedMouseMoveEvent",c);if(!d&&this._startScrollCoordinate!==null){var v=l.getAxisComponent();if(this._prevYAxisRange!==null&&v.getScrollZoomEnabled()&&l.getId()===Ie.CANDLE){var p=this._prevYAxisRange,g=p.from,m=p.to,_=p.range,S;(n=v==null?void 0:v.isReverse())!==null&&n!==void 0&&n?S=this._startScrollCoordinate.y-c.y:S=c.y-this._startScrollCoordinate.y;var y=S/h.height,w=_*y,C=g+w,I=m+w,T=v.convertToRealValue(C),x=v.convertToRealValue(I);v.setRange({from:C,to:I,range:I-C,realFrom:T,realTo:x,realRange:x-T})}var M=c.x-this._startScrollCoordinate.x;this._chart.getChartStore().getTimeScaleStore().scroll(M)}return this._chart.getChartStore().getTooltipStore().setCrosshair({x:c.x,y:c.y,paneId:l==null?void 0:l.getId()}),d}case me.X_AXIS:{var d=u.dispatchEvent("pressedMouseMoveEvent",c);if(d)this._chart.updatePane(1);else{var D=l.getAxisComponent();if(!((o=D==null?void 0:D.getScrollZoomEnabled())!==null&&o!==void 0)||o){var y=this._xAxisStartScaleDistance/c.pageX;if(Number.isFinite(y)){var P=(y-this._xAxisScale)*10;this._xAxisScale=y,this._chart.getChartStore().getTimeScaleStore().zoom(P,(a=this._xAxisStartScaleCoordinate)!==null&&a!==void 0?a:void 0)}}}return d}case me.Y_AXIS:{var d=u.dispatchEvent("pressedMouseMoveEvent",c);if(d)this._chart.updatePane(1);else{var v=l.getAxisComponent();if(this._prevYAxisRange!==null&&v.getScrollZoomEnabled()){var H=this._prevYAxisRange,g=H.from,m=H.to,_=H.range,y=c.pageY/this._yAxisStartScaleDistance,X=_*y,w=(X-_)/2,C=g-w,I=m+w,T=v.convertToRealValue(C),x=v.convertToRealValue(I);v.setRange({from:C,to:I,range:X,realFrom:T,realTo:x,realRange:x-T}),this._chart.adjustPaneViewport(!1,!0,!0,!0)}}return d}}}return!1},e.prototype.mouseUpEvent=function(t){var r=this._findWidgetByEvent(t).widget,i=!1;if(r!==null){var n=this._makeWidgetEvent(t,r),o=r.getName();switch(o){case me.MAIN:case me.SEPARATOR:case me.X_AXIS:case me.Y_AXIS:{i=r.dispatchEvent("mouseUpEvent",n);break}}i&&this._chart.updatePane(1)}return this._mouseDownWidget=null,this._startScrollCoordinate=null,this._prevYAxisRange=null,this._xAxisStartScaleCoordinate=null,this._xAxisStartScaleDistance=0,this._xAxisScale=1,this._yAxisStartScaleDistance=0,i},e.prototype.mouseClickEvent=function(t){var r=this._findWidgetByEvent(t).widget;if(r!==null){var i=this._makeWidgetEvent(t,r);return r.dispatchEvent("mouseClickEvent",i)}return!1},e.prototype.mouseRightClickEvent=function(t){var r=this._findWidgetByEvent(t).widget,i=!1;if(r!==null){var n=this._makeWidgetEvent(t,r),o=r.getName();switch(o){case me.MAIN:case me.X_AXIS:case me.Y_AXIS:{i=r.dispatchEvent("mouseRightClickEvent",n);break}}i&&this._chart.updatePane(1)}return!1},e.prototype.mouseDoubleClickEvent=function(t){var r=this._findWidgetByEvent(t),i=r.pane,n=r.widget;if(n!==null){var o=n.getName();switch(o){case me.MAIN:{var a=this._makeWidgetEvent(t,n);return n.dispatchEvent("mouseDoubleClickEvent",a)}case me.Y_AXIS:{var s=i.getAxisComponent();if(!s.getAutoCalcTickFlag())return s.setAutoCalcTickFlag(!0),this._chart.adjustPaneViewport(!1,!0,!0,!0),!0;break}}}return!1},e.prototype.mouseLeaveEvent=function(){return this._chart.getChartStore().getTooltipStore().setCrosshair(),!0},e.prototype.touchStartEvent=function(t){var r=this._findWidgetByEvent(t),i=r.pane,n=r.widget;if(n!==null){var o=this._makeWidgetEvent(t,n),a=n.getName();switch(a){case me.MAIN:{var s=(r=i.getAxisComponent().getRange())!==null&&r!==void 0?r:null;this._prevYAxisRange=s===null?s:te({},s);var l=this._chart.getChartStore(),u=l.getTooltipStore();if(n.dispatchEvent("mouseDownEvent",o))return this._touchCancelCrosshair=!0,this._touchCoordinate=null,u.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._flingScrollRequestId!==null&&($a(this._flingScrollRequestId),this._flingScrollRequestId=null),this._flingStartTime=new Date().getTime(),this._startScrollCoordinate={x:o.x,y:o.y},l.getTimeScaleStore().startScroll(),this._touchZoomed=!1,this._touchCoordinate!==null){var c=o.x-this._touchCoordinate.x,f=o.y-this._touchCoordinate.y,h=Math.sqrt(c*c+f*f);h<wp?(this._touchCoordinate={x:o.x,y:o.y},u.setCrosshair({x:o.x,y:o.y,paneId:i==null?void 0:i.getId()})):(this._touchCoordinate=null,this._touchCancelCrosshair=!0,u.setCrosshair())}return!0}case me.X_AXIS:case me.Y_AXIS:{var d=n.dispatchEvent("mouseDownEvent",o);d&&this._chart.updatePane(1);var s=(r=i.getAxisComponent().getRange())!==null&&r!==void 0?r:null;return this._prevYAxisRange=s===null?s:te({},s),this._yAxisStartScaleDistance=o.pageY,d}}}return!1},e.prototype.touchMoveEvent=function(t){var r,i,n,o=this._findWidgetByEvent(t),a=o.pane,s=o.widget;if(s!==null){var l=this._makeWidgetEvent(t,s),u=s.getName(),c=this._chart.getChartStore(),f=c.getTooltipStore();switch(u){case me.MAIN:{if(s.dispatchEvent("pressedMouseMoveEvent",l))return(r=l.preventDefault)===null||r===void 0||r.call(l),f.setCrosshair(void 0,!0),this._chart.updatePane(1),!0;if(this._touchCoordinate!==null)(i=l.preventDefault)===null||i===void 0||i.call(l),f.setCrosshair({x:l.x,y:l.y,paneId:a==null?void 0:a.getId()});else if(this._startScrollCoordinate!==null){var h=s.getBounding();if(this._startScrollCoordinate!==null){var d=a.getAxisComponent();if(this._prevYAxisRange!==null&&d.getScrollZoomEnabled()&&a.getId()===Ie.CANDLE){var v=this._prevYAxisRange,p=v.from,g=v.to,m=v.range,_;(n=d==null?void 0:d.isReverse())!==null&&n!==void 0&&n?_=this._startScrollCoordinate.y-l.y:_=l.y-this._startScrollCoordinate.y;var S=_/h.height,y=m*S,w=p+y,C=g+y,I=d.convertToRealValue(w),T=d.convertToRealValue(C);d.setRange({from:w,to:C,range:C-w,realFrom:I,realTo:T,realRange:T-I})}var x=l.x-this._startScrollCoordinate.x;this._chart.getChartStore().getTimeScaleStore().scroll(x)}else{var x=l.x-this._startScrollCoordinate.x;c.getTimeScaleStore().scroll(x)}}return!0}case me.X_AXIS:case me.Y_AXIS:{var M=s.dispatchEvent("pressedMouseMoveEvent",l);if(M)this._chart.updatePane(1);else{var d=a.getAxisComponent();if(this._prevYAxisRange!==null&&d.getScrollZoomEnabled()){var D=this._prevYAxisRange,p=D.from,g=D.to,m=D.range,S=l.pageY/this._yAxisStartScaleDistance,P=m*S,y=(P-m)/2,w=p-y,C=g+y,I=d.convertToRealValue(w),T=d.convertToRealValue(C);d.setRange({from:w,to:C,range:P,realFrom:I,realTo:T,realRange:T-I}),this._chart.adjustPaneViewport(!1,!0,!0,!0)}}return M}}}return!1},e.prototype.touchEndEvent=function(t){var r=this,i=this._findWidgetByEvent(t).widget;if(i!==null){var n=this._makeWidgetEvent(t,i),o=i.getName();switch(o){case me.MAIN:{if(this._prevYAxisRange=null,i.dispatchEvent("mouseUpEvent",n),this._startScrollCoordinate!==null){var a=new Date().getTime()-this._flingStartTime,s=n.x-this._startScrollCoordinate.x,l=s/(a>0?a:1)*20;if(a<200&&Math.abs(l)>0){var u=this._chart.getChartStore().getTimeScaleStore(),c=function(){r._flingScrollRequestId=Gi(function(){u.startScroll(),u.scroll(l),l=l*(1-.025),Math.abs(l)<1?r._flingScrollRequestId!==null&&($a(r._flingScrollRequestId),r._flingScrollRequestId=null):c()})};c()}}return!0}case me.X_AXIS:case me.Y_AXIS:{var f=i.dispatchEvent("mouseUpEvent",n);f&&this._chart.updatePane(1),this._prevYAxisRange=null,this._yAxisStartScaleDistance=0}}}return!1},e.prototype.tapEvent=function(t){var r=this._findWidgetByEvent(t),i=r.pane,n=r.widget,o=!1;if(n!==null){var a=this._makeWidgetEvent(t,n),s=n.dispatchEvent("mouseClickEvent",a);if(n.getName()===me.MAIN){var l=this._makeWidgetEvent(t,n),u=this._chart.getChartStore(),c=u.getTooltipStore();s?(this._touchCancelCrosshair=!0,this._touchCoordinate=null,c.setCrosshair(void 0,!0),o=!0):(!this._touchCancelCrosshair&&!this._touchZoomed&&(this._touchCoordinate={x:l.x,y:l.y},c.setCrosshair({x:l.x,y:l.y,paneId:i==null?void 0:i.getId()},!0),o=!0),this._touchCancelCrosshair=!1)}(o||s)&&this._chart.updatePane(1)}return o},e.prototype.doubleTapEvent=function(t){return this.mouseDoubleClickEvent(t)},e.prototype.longTapEvent=function(t){var r=this._findWidgetByEvent(t),i=r.pane,n=r.widget;if(n!==null&&n.getName()===me.MAIN){var o=this._makeWidgetEvent(t,n);this._touchCoordinate={x:o.x,y:o.y},this._chart.getChartStore().getTooltipStore().setCrosshair({x:o.x,y:o.y,paneId:i==null?void 0:i.getId()});var a=i.getAxisComponent();return a.getAutoCalcTickFlag()||a.setAutoCalcTickFlag(!0),!0}return!1},e.prototype._findWidgetByEvent=function(t){var r,i,n,o,a=t.x,s=t.y,l=this._chart.getAllSeparatorPanes(),u=this._chart.getChartStore().getStyles().separator.size;try{for(var c=Cr(l),f=c.next();!f.done;f=c.next()){var h=Tr(f.value,2),d=h[1],v=d.getBounding(),p=v.top-Math.round((ai-u)/2);if(a>=v.left&&a<=v.left+v.width&&s>=p&&s<=p+ai)return{pane:d,widget:d.getWidget()}}}catch(M){r={error:M}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var g=this._chart.getAllDrawPanes(),m=null;try{for(var _=Cr(g),S=_.next();!S.done;S=_.next()){var y=S.value,v=y.getBounding();if(a>=v.left&&a<=v.left+v.width&&s>=v.top&&s<=v.top+v.height){m=y;break}}}catch(M){n={error:M}}finally{try{S&&!S.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}var w=null;if(m!==null){if(w===null){var C=m.getMainWidget(),I=C.getBounding();a>=I.left&&a<=I.left+I.width&&s>=I.top&&s<=I.top+I.height&&(w=C)}if(w===null){var T=m.getYAxisWidget();if(T!==null){var x=T.getBounding();a>=x.left&&a<=x.left+x.width&&s>=x.top&&s<=x.top+x.height&&(w=T)}}}return{pane:m,widget:w}},e.prototype._makeWidgetEvent=function(t,r){var i,n,o,a=(i=r==null?void 0:r.getBounding())!==null&&i!==void 0?i:null;return te(te({},t),{x:t.x-((n=a==null?void 0:a.left)!==null&&n!==void 0?n:0),y:t.y-((o=a==null?void 0:a.top)!==null&&o!==void 0?o:0)})},e.prototype.destroy=function(){this._container.removeEventListener("keydown",this._boundKeyBoardDownEvent),this._event.destroy()},e}(),kt;(function(e){e.Root="root",e.Main="main",e.YAxis="yAxis"})(kt||(kt={}));var yu=function(){function e(t,r){this._drawPanes=[],this._separatorPanes=new Map,this._initContainer(t),this._chartEvent=new Cp(this._chartContainer,this),this._chartStore=new Ov(this,r),this._initPanes(r),this.adjustPaneViewport(!0,!0,!0)}return e.prototype._initContainer=function(t){this._container=t,this._chartContainer=$t("div",{position:"relative",width:"100%",outline:"none",borderStyle:"none",cursor:"crosshair",boxSizing:"border-box",userSelect:"none",webkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",webkitTapHighlightColor:"transparent"}),this._chartContainer.tabIndex=1,t.appendChild(this._chartContainer)},e.prototype._initPanes=function(t){var r=this,i,n=(i=t==null?void 0:t.layout)!==null&&i!==void 0?i:[{type:"candle"}],o=!1,a=!1,s=function(l){if(!a){var u=r._createPane(yp,Ie.X_AXIS,l??{});r._xAxisPane=u,a=!0}};n.forEach(function(l){var u,c,f;switch(l.type){case"candle":{if(!o){var h=(u=l.options)!==null&&u!==void 0?u:{};pt(h,{id:Ie.CANDLE}),r._candlePane=r._createPane(fp,Ie.CANDLE,h);var d=(c=l.content)!==null&&c!==void 0?c:[];d.forEach(function(p){r.createIndicator(p,!0,h)}),o=!0}break}case"indicator":{var d=(f=l.content)!==null&&f!==void 0?f:[];if(d.length>0){var v;d.forEach(function(g){N(v)?r.createIndicator(g,!0,{id:v}):v=r.createIndicator(g,!0,l.options)})}break}case"xAxis":{s(l.options);break}}}),s({position:"bottom"})},e.prototype._createPane=function(t,r,i){var n=null,o=null,a=i==null?void 0:i.position;switch(a){case"top":{var s=this._drawPanes[0];N(s)&&(o=new t(this._chartContainer,s.getContainer(),this,r,i??{}),n=0);break}case"bottom":break;default:for(var l=this._drawPanes.length-1;l>-1;l--){var u=this._drawPanes[l],c=this._drawPanes[l-1];if((u==null?void 0:u.getOptions().position)==="bottom"&&(c==null?void 0:c.getOptions().position)!=="bottom"){o=new t(this._chartContainer,u.getContainer(),this,r,i??{}),n=l;break}}}N(o)||(o=new t(this._chartContainer,null,this,r,i??{}));var f;if(ee(n)?(this._drawPanes.splice(n,0,o),f=n):(this._drawPanes.push(o),f=this._drawPanes.length-1),o.getId()!==Ie.X_AXIS){var h=this._drawPanes[f+1];if(N(h)&&h.getId()===Ie.X_AXIS&&(h=this._drawPanes[f+2]),N(h)){var d=this._separatorPanes.get(h);N(d)?d.setTopPane(o):(d=new es(this._chartContainer,h.getContainer(),this,"",o,h),this._separatorPanes.set(h,d))}var v=this._drawPanes[f-1];if(N(v)&&v.getId()===Ie.X_AXIS&&(v=this._drawPanes[f-2]),N(v)){var d=new es(this._chartContainer,o.getContainer(),this,"",v,o);this._separatorPanes.set(o,d)}}return o},e.prototype._measurePaneHeight=function(){var t=this,r,i=Math.floor(this._container.clientHeight),n=this._chartStore.getStyles().separator.size,o=this._xAxisPane.getAxisComponent().getAutoSize(),a=i-o-this._separatorPanes.size*n;a<0&&(a=0);var s=0;this._drawPanes.forEach(function(c){if(c.getId()!==Ie.CANDLE&&c.getId()!==Ie.X_AXIS){var f=c.getBounding().height,h=c.getOptions().minHeight;f<h&&(f=h),s+f>a?(s=a,f=Math.max(a-s,0)):s+=f,c.setBounding({height:f})}});var l=a-s;(r=this._candlePane)===null||r===void 0||r.setBounding({height:l}),this._xAxisPane.setBounding({height:o});var u=0;this._drawPanes.forEach(function(c){var f=t._separatorPanes.get(c);N(f)&&(f.setBounding({height:n,top:u}),u+=n),c.setBounding({top:u}),u+=c.getBounding().height})},e.prototype._measurePaneWidth=function(){var t=this,r=Math.floor(this._container.clientWidth),i=this._chartStore.getStyles(),n=i.yAxis,o=n.position===ur.Left,a=!n.inside,s=0,l=0,u=0,c=0;this._drawPanes.forEach(function(g){g.getId()!==Ie.X_AXIS&&(l=Math.max(l,g.getAxisComponent().getAutoSize()))}),l>r&&(l=r),a?(s=r-l,o?(u=0,c=l):(u=r-l,c=0)):(s=r,c=0,o?u=0:u=r-l),this._chartStore.getTimeScaleStore().setTotalBarSpace(s);var f={width:r},h={width:s,left:c},d={width:l,left:u},v=i.separator.fill,p;a&&!v?p=h:p=f,this._drawPanes.forEach(function(g){var m;(m=t._separatorPanes.get(g))===null||m===void 0||m.setBounding(p),g.setBounding(f,h,d)})},e.prototype._setPaneOptions=function(t,r){var i,n;if(fe(t.id)){var o=this.getDrawPaneById(t.id),a=!1;if(o!==null){var s=r;if(t.id!==Ie.CANDLE&&ee(t.height)&&t.height>0){var l=Math.max((i=t.minHeight)!==null&&i!==void 0?i:o.getOptions().minHeight,0),u=Math.max(l,t.height);o.setBounding({height:u}),s=!0,a=!0,this.adjustPaneViewport(!1,!0,!0,!0,!0)}(fe((n=t.axisOptions)===null||n===void 0?void 0:n.name)||N(t.gap))&&(s=!0),o.setOptions(t),s&&this.adjustPaneViewport(a,!0,!0,!0,!0)}}},e.prototype.getDrawPaneById=function(t){if(t===Ie.CANDLE)return this._candlePane;if(t===Ie.X_AXIS)return this._xAxisPane;var r=this._drawPanes.find(function(i){return i.getId()===t});return r??null},e.prototype.getContainer=function(){return this._container},e.prototype.getChartStore=function(){return this._chartStore},e.prototype.getXAxisPane=function(){return this._xAxisPane},e.prototype.getAllDrawPanes=function(){return this._drawPanes},e.prototype.getAllSeparatorPanes=function(){return this._separatorPanes},e.prototype.adjustPaneViewport=function(t,r,i,n,o){t&&this._measurePaneHeight();var a=r,s=n??!1,l=o??!1;(s||l)&&this._drawPanes.forEach(function(u){var c=u.getAxisComponent().buildTicks(l);a||(a=c)}),a&&this._measurePaneWidth(),(i??!1)&&(this._xAxisPane.getAxisComponent().buildTicks(!0),this.updatePane(4))},e.prototype.updatePane=function(t,r){if(N(r)){var i=this.getDrawPaneById(r);i==null||i.update(t)}else this._separatorPanes.forEach(function(n){n.update(t)}),this._drawPanes.forEach(function(n){n.update(t)})},e.prototype.crosshairChange=function(t){var r=this,i=this._chartStore.getActionStore();if(i.has(Ct.OnCrosshairChange)){var n={};this._drawPanes.forEach(function(o){var a=o.getId(),s={},l=r._chartStore.getIndicatorStore().getInstances(a);l.forEach(function(u){var c,f=u.result;s[u.name]=f[(c=t.dataIndex)!==null&&c!==void 0?c:f.length-1]}),n[a]=s}),fe(t.paneId)&&i.execute(Ct.OnCrosshairChange,te(te({},t),{indicatorData:n}))}},e.prototype.getDom=function(t,r){var i,n;if(fe(t)){var o=this.getDrawPaneById(t);if(o!==null){var a=r??kt.Root;switch(a){case kt.Root:return o.getContainer();case kt.Main:return o.getMainWidget().getContainer();case kt.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getContainer())!==null&&n!==void 0?n:null}}}else return this._chartContainer;return null},e.prototype.getSize=function(t,r){var i,n;if(N(t)){var o=this.getDrawPaneById(t);if(o!==null){var a=r??kt.Root;switch(a){case kt.Root:return o.getBounding();case kt.Main:return o.getMainWidget().getBounding();case kt.YAxis:return(n=(i=o.getYAxisWidget())===null||i===void 0?void 0:i.getBounding())!==null&&n!==void 0?n:null}}}else return{width:Math.floor(this._chartContainer.clientWidth),height:Math.floor(this._chartContainer.clientHeight),left:0,top:0,right:0,bottom:0};return null},e.prototype.setStyles=function(t){var r,i;this._chartStore.setOptions({styles:t});var n;fe(t)?n=Kl(t):n=t,N((r=n==null?void 0:n.yAxis)===null||r===void 0?void 0:r.type)&&((i=this._candlePane)===null||i===void 0||i.getAxisComponent().setAutoCalcTickFlag(!0)),this.adjustPaneViewport(!0,!0,!0,!0,!0)},e.prototype.getStyles=function(){return this._chartStore.getStyles()},e.prototype.setLocale=function(t){this._chartStore.setOptions({locale:t}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},e.prototype.getLocale=function(){return this._chartStore.getLocale()},e.prototype.setCustomApi=function(t){this._chartStore.setOptions({customApi:t}),this.adjustPaneViewport(!0,!0,!0,!0,!0)},e.prototype.setPriceVolumePrecision=function(t,r){this._chartStore.setPrecision({price:t,volume:r})},e.prototype.getPriceVolumePrecision=function(){return this._chartStore.getPrecision()},e.prototype.setTimezone=function(t){this._chartStore.setOptions({timezone:t}),this._xAxisPane.getAxisComponent().buildTicks(!0),this._xAxisPane.update(3)},e.prototype.getTimezone=function(){return this._chartStore.getTimeScaleStore().getTimezone()},e.prototype.setOffsetRightDistance=function(t){this._chartStore.getTimeScaleStore().setOffsetRightDistance(t,!0)},e.prototype.getOffsetRightDistance=function(){return this._chartStore.getTimeScaleStore().getOffsetRightDistance()},e.prototype.setMaxOffsetLeftDistance=function(t){t<0||this._chartStore.getTimeScaleStore().setMaxOffsetLeftDistance(t)},e.prototype.setMaxOffsetRightDistance=function(t){t<0||this._chartStore.getTimeScaleStore().setMaxOffsetRightDistance(t)},e.prototype.setLeftMinVisibleBarCount=function(t){t<0||this._chartStore.getTimeScaleStore().setLeftMinVisibleBarCount(Math.ceil(t))},e.prototype.setRightMinVisibleBarCount=function(t){t<0||this._chartStore.getTimeScaleStore().setRightMinVisibleBarCount(Math.ceil(t))},e.prototype.setBarSpace=function(t){this._chartStore.getTimeScaleStore().setBarSpace(t)},e.prototype.getBarSpace=function(){return this._chartStore.getTimeScaleStore().getBarSpace().bar},e.prototype.getVisibleRange=function(){return this._chartStore.getTimeScaleStore().getVisibleRange()},e.prototype.clearData=function(){this._chartStore.clear()},e.prototype.getDataList=function(){return this._chartStore.getDataList()},e.prototype.applyNewData=function(t,r,i){this._chartStore.addData(t,St.Init,r).then(function(){}).catch(function(){}).finally(function(){i==null||i()});var n=this.getDrawPaneById("candle_pane"),o=n.getAxisComponent();o.setAutoCalcTickFlag(!0),this.adjustPaneViewport(!1,!0,!0,!0)},e.prototype.applyMoreData=function(t,r,i){this._chartStore.addData(t,St.Forward,r??!0).then(function(){}).catch(function(){}).finally(function(){i==null||i()})},e.prototype.updateData=function(t,r){this._chartStore.addData(t).then(function(){}).catch(function(){}).finally(function(){r==null||r()})},e.prototype.loadMore=function(t){this._chartStore.setLoadMoreCallback(t)},e.prototype.setLoadDataCallback=function(t){this._chartStore.setLoadDataCallback(t)},e.prototype.createIndicator=function(t,r,i,n){var o=this,a,s=fe(t)?{name:t}:t;if(jl(s.name)===null)return null;var l=i==null?void 0:i.id,u=this.getDrawPaneById(l??"");if(u!==null)this._chartStore.getIndicatorStore().addInstance(s,l??"",r??!1).then(function(h){var d;o._setPaneOptions(i??{},(d=u.getAxisComponent().buildTicks(!0))!==null&&d!==void 0?d:!1)}).catch(function(h){});else{l??(l=zl(Ie.INDICATOR));var c=this._createPane(_u,l,i??{}),f=(a=i==null?void 0:i.height)!==null&&a!==void 0?a:Mv;c.setBounding({height:f}),this._chartStore.getIndicatorStore().addInstance(s,l,r??!1).finally(function(){o.adjustPaneViewport(!0,!0,!0,!0,!0),n==null||n()})}return l??null},e.prototype.overrideIndicator=function(t,r,i){var n=this;this._chartStore.getIndicatorStore().override(t,r??null).then(function(o){var a=Tr(o,2),s=a[0],l=a[1];(s||l)&&(n.adjustPaneViewport(!1,l,!0,l),i==null||i())}).catch(function(){})},e.prototype.getIndicatorByPaneId=function(t,r){return this._chartStore.getIndicatorStore().getInstanceByPaneId(t,r)},e.prototype.removeIndicator=function(t,r){var i,n,o,a=this._chartStore.getIndicatorStore(),s=a.removeInstance(t,r);if(s){var l=!1;if(t!==Ie.CANDLE&&!a.hasInstances(t)){var u=this.getDrawPaneById(t),c=this._drawPanes.findIndex(function(m){return m.getId()===t});if(u!==null){l=!0;var f=this._separatorPanes.get(u);if(N(f)){var h=f==null?void 0:f.getTopPane();try{for(var d=Cr(this._separatorPanes),v=d.next();!v.done;v=d.next()){var p=v.value;if(p[1].getTopPane().getId()===u.getId()){p[1].setTopPane(h);break}}}catch(m){i={error:m}}finally{try{v&&!v.done&&(n=d.return)&&n.call(d)}finally{if(i)throw i.error}}f.destroy(),this._separatorPanes.delete(u)}this._drawPanes.splice(c,1),u.destroy();var g=this._drawPanes[0];N(g)&&g.getId()===Ie.X_AXIS&&(g=this._drawPanes[1]),(o=this._separatorPanes.get(g))===null||o===void 0||o.destroy(),this._separatorPanes.delete(g)}}this.adjustPaneViewport(l,!0,!0,!0,!0)}},e.prototype.createOverlay=function(t,r){var i=[];if(fe(t))i=[{name:t}];else if(wt(t))i=t.map(function(s){return fe(s)?{name:s}:s});else{var n=t;i=[n]}var o=!0;(!N(r)||this.getDrawPaneById(r)===null)&&(r=Ie.CANDLE,o=!1);var a=this._chartStore.getOverlayStore().addInstances(i,r,o);return wt(t)?a:a[0]},e.prototype.getOverlayById=function(t){return this._chartStore.getOverlayStore().getInstanceById(t)},e.prototype.overrideOverlay=function(t){this._chartStore.getOverlayStore().override(t)},e.prototype.removeOverlay=function(t){var r;N(t)&&(fe(t)?r={id:t}:r=t),this._chartStore.getOverlayStore().removeInstance(r)},e.prototype.setPaneOptions=function(t){this._setPaneOptions(t,!1)},e.prototype.setZoomEnabled=function(t){this._chartStore.getTimeScaleStore().setZoomEnabled(t)},e.prototype.isZoomEnabled=function(){return this._chartStore.getTimeScaleStore().getZoomEnabled()},e.prototype.setScrollEnabled=function(t){this._chartStore.getTimeScaleStore().setScrollEnabled(t)},e.prototype.isScrollEnabled=function(){return this._chartStore.getTimeScaleStore().getScrollEnabled()},e.prototype.scrollByDistance=function(t,r){var i=ee(r)&&r>0?r:0,n=this._chartStore.getTimeScaleStore();if(n.startScroll(),i>0){var o=new eo({duration:i});o.doFrame(function(a){var s=t*(a/i);n.scroll(s)}),o.start()}else n.scroll(t)},e.prototype.scrollToRealTime=function(t){var r=this._chartStore.getTimeScaleStore(),i=r.getBarSpace().bar,n=r.getLastBarRightSideDiffBarCount()-r.getInitialOffsetRightDistance()/i,o=n*i;this.scrollByDistance(o,t)},e.prototype.scrollToDataIndex=function(t,r){var i=this._chartStore.getTimeScaleStore(),n=(i.getLastBarRightSideDiffBarCount()+(this.getDataList().length-1-t))*i.getBarSpace().bar;this.scrollByDistance(n,r)},e.prototype.scrollToTimestamp=function(t,r){var i=to(this.getDataList(),"timestamp",t);this.scrollToDataIndex(i,r)},e.prototype.zoomAtCoordinate=function(t,r,i){var n=ee(i)&&i>0?i:0,o=this._chartStore.getTimeScaleStore(),a=o.getBarSpace().bar,s=a*t,l=s-a;if(n>0){var u=0,c=new eo({duration:n});c.doFrame(function(f){var h=l*(f/n),d=(h-u)/o.getBarSpace().bar*ro;o.zoom(d,r),u=h}),c.start()}else o.zoom(l/a*ro,r)},e.prototype.zoomAtDataIndex=function(t,r,i){var n=this._chartStore.getTimeScaleStore().dataIndexToCoordinate(r);this.zoomAtCoordinate(t,{x:n,y:0},i)},e.prototype.zoomAtTimestamp=function(t,r,i){var n=to(this.getDataList(),"timestamp",r);this.zoomAtDataIndex(t,n,i)},e.prototype.convertToPixel=function(t,r){var i,n=r.paneId,o=n===void 0?Ie.CANDLE:n,a=r.absolute,s=a===void 0?!1:a,l=[];if(o!==Ie.X_AXIS){var u=this.getDrawPaneById(o);if(u!==null){var c=this._chartStore.getTimeScaleStore(),f=u.getBounding(),h=new Array().concat(t),d=this._xAxisPane.getAxisComponent(),v=u.getAxisComponent();l=h.map(function(p){var g={},m=p.dataIndex;if(ee(p.timestamp)&&(m=c.timestampToDataIndex(p.timestamp)),ee(m)&&(g.x=d==null?void 0:d.convertToPixel(m)),ee(p.value)){var _=v==null?void 0:v.convertToPixel(p.value);g.y=s?f.top+_:_}return g})}}return wt(t)?l:(i=l[0])!==null&&i!==void 0?i:{}},e.prototype.convertFromPixel=function(t,r){var i,n=r.paneId,o=n===void 0?Ie.CANDLE:n,a=r.absolute,s=a===void 0?!1:a,l=[];if(o!==Ie.X_AXIS){var u=this.getDrawPaneById(o);if(u!==null){var c=this._chartStore.getTimeScaleStore(),f=u.getBounding(),h=new Array().concat(t),d=this._xAxisPane.getAxisComponent(),v=u.getAxisComponent();l=h.map(function(p){var g,m,_={};if(ee(p.x)){var S=(g=d==null?void 0:d.convertFromPixel(p.x))!==null&&g!==void 0?g:-1;_.dataIndex=S,_.timestamp=(m=c.dataIndexToTimestamp(S))!==null&&m!==void 0?m:void 0}if(ee(p.y)){var y=s?p.y-f.top:p.y;_.value=v.convertFromPixel(y)}return _})}}return wt(t)?l:(i=l[0])!==null&&i!==void 0?i:{}},e.prototype.executeAction=function(t,r){var i;switch(t){case Ct.OnCrosshairChange:{var n=te({},r);n.paneId=(i=n.paneId)!==null&&i!==void 0?i:Ie.CANDLE,this._chartStore.getTooltipStore().setCrosshair(n);break}}},e.prototype.subscribeAction=function(t,r){this._chartStore.getActionStore().subscribe(t,r)},e.prototype.unsubscribeAction=function(t,r){this._chartStore.getActionStore().unsubscribe(t,r)},e.prototype.getConvertPictureUrl=function(t,r,i){var n=this,o=this._chartContainer.clientWidth,a=this._chartContainer.clientHeight,s=$t("canvas",{width:"".concat(o,"px"),height:"".concat(a,"px"),boxSizing:"border-box"}),l=s.getContext("2d"),u=ar(s);s.width=o*u,s.height=a*u,l.scale(u,u),l.fillStyle=i??"#FFFFFF",l.fillRect(0,0,o,a);var c=t??!1;return this._drawPanes.forEach(function(f){var h=n._separatorPanes.get(f);if(N(h)){var d=h.getBounding();l.drawImage(h.getImage(c),d.left,d.top,d.width,d.height)}var v=f.getBounding();l.drawImage(f.getImage(c),0,v.top,o,v.height)}),s.toDataURL("image/".concat(r??"jpeg"))},e.prototype.resize=function(t){this.adjustPaneViewport(t,!0,!0,!0,!0)},e.prototype.destroy=function(){this._chartEvent.destroy(),this._drawPanes.forEach(function(t){t.destroy()}),this._drawPanes=[],this._separatorPanes.forEach(function(t){t.destroy()}),this._separatorPanes.clear(),this._container.removeChild(this._chartContainer)},e}(),qi=new Map,Ep=1;function _g(e,t){var r;if(fe(e)?r=document.getElementById(e):r=e,r===null)return null;var i=qi.get(r.id);if(N(i))return i;var n="k_line_chart_".concat(Ep++);return i=new yu(r,t),i.id=n,r.setAttribute("k-line-chart-id",n),qi.set(n,i),i}function yg(e){var t,r,i;if(e instanceof yu)i=e.id;else{var n=void 0;fe(e)?n=document.getElementById(e):n=e,i=(t=n==null?void 0:n.getAttribute("k-line-chart-id"))!==null&&t!==void 0?t:null}i!==null&&((r=qi.get(i))===null||r===void 0||r.destroy(),qi.delete(i))}var bg={clone:Hr,merge:pt,isString:fe,isNumber:ee,isValid:N,isObject:Tt,isArray:wt,isFunction:Nt,isBoolean:or,formatValue:qe,formatPrecision:Be,formatBigNumber:Nl,formatDate:Bl,formatThousands:He,formatFoldDecimal:je,calcTextWidth:di,getLinearSlopeIntercept:fn,getLinearYFromSlopeIntercept:Fo,getLinearYFromCoordinates:vi,checkCoordinateOnArc:ou,checkCoordinateOnCircle:Zl,checkCoordinateOnLine:Xl,checkCoordinateOnPolygon:Ql,checkCoordinateOnRect:tu,checkCoordinateOnText:iu,drawArc:au,drawCircle:Jl,drawLine:Yl,drawPolygon:eu,drawRect:Lo,drawText:Bo,drawRectText:zv};const bu=typeof window<"u"&&window.localStorage.getItem("od_type")||"normal",Ip=typeof window<"u"&&window.localStorage.getItem("loss_spread")||"",Tp=typeof window<"u"&&window.localStorage.getItem("win_spread")||"",hn=typeof window<"u"&&window.localStorage.getItem("in_mix_type")||"average";typeof window<"u"&&window.localStorage.getItem("out_mix_type");const Vo=typeof window<"u"&&window.localStorage.getItem("action")||"open",Wo=typeof window<"u"&&window.localStorage.getItem("lever")||"10",zo=typeof window<"u"&&window.localStorage.getItem("risk")||"10",Ho=typeof window<"u"&&window.localStorage.getItem("sz_type")||"risk",Su=typeof window<"u"&&window.localStorage.getItem("loss_type")||"point",Pp=typeof window<"u"&&window.localStorage.getItem("monitor_item")||"ema",wu=typeof window<"u"&&window.localStorage.getItem("win_multiple")||"1.5",dn=typeof window<"u"&&window.localStorage.getItem("first_ratio")||"30",Mp=typeof window<"u"?JSON.parse(window.localStorage.getItem("black_list")||"[]"):[],Rn={symbol:"",tradtype:"swap",minSz:"",minCoin:"",side:"",action_info:{},action:Vo,order_type:"market",key:"",price:"",lever:Number(Wo),win_price:"",loss_price:"",loss_type:Su,ignore_loss:"normal",risk:Number(zo),api_key:"",monitor_action:"",q_win_price:"5",q_loss_price:"10",hi_win_price:0,hi_loss_price:0,account_name:"",account:"",ignore_add:"no",positionAmt:"",position_mode:"cross",action_type:"",sz_type:Ho,order_num:2,qty_type:"average",mix_type:hn,win_type:"move",limit_price:"",end_price:"",first_ratio:Number(dn),out_action:"",out_part:"",endprice:"",endtime:"",testtime:"",half_lock:"no",original_timezone:"",price_period:"",action_status:"",reduce_type:"loop",advanced_action:"",profit_out_ratio:30,profit_out:"no",effective_action:"",action_info_inside:{action_status:"add",action:"",symbol:"",side:"",action_type:"",action_data:"",out_type:"",price_period:"",api_key:"",set_win_loss:"no",win_present:"",loss_present:"",signal_period_1:"",signal_period_2:"",signal_period:"",times:"",prices:""}},Ap={symbol:"",action:"open",lever:10,win_price:0,loss_price:0,loss_type:"price",risk:10,api_key:"",ignore_add:"no",sz_type:"risk",order_num:2,mix_type:hn,win_type:"move",limit_price:.3,end_price:.8,first_ratio:Number(dn),half_lock:"no",reduce_type:"loop",profit_out_ratio:30,profit_out:"no",ignore_loss:"normal",account_name:"",status:"on",allow_action:"both",allow_side:"both",allow_add:"no",profit_type:"profit",trade_type:"SWAP"},rs={key:"",order_trader:"",user_type:""},Dp={api_key:"",max_holds:"",white_list:[]},is={keyword:"",notice_app:"",notice_url:"",recver:"",ismaster:""},kp={flow_name:"",key:"",risk:0,url:"",status:"on",signal_port:80},Di={account_switch:"",trade_type:"",action:Vo,sz_type:Ho,lever:Number(Wo),risk:Number(zo),order_type:"market",order_num:2,first_ratio:Number(dn),symbol:"",side:"",price:"",win_price:"",loss_price:"",loss_type:Su,ignore_loss:"no",mix_type:hn,win_type:"move",limit_price:"",action_inside:"open",symbol_type:"cap",action_status:"modify",black_list:Mp,symbol_num:"",end_price:"",end_time:"",price_period:"",reduce_type:"loop",api_key:"",account_name:"",times:"",prices:"",signal_period:"",master_action:"",action_data:"",set_win_loss:"no",ratio:.1,pos:"",imr:"",availPos:"",forward:"no",loss_present:"",win_present:"",reset_win_loss:"no",reset_mode:"keep",win_multiple:Number(wu),first_ratio_type:"percent",od_type:bu,sub_action:"",callbackSpread:"",profit_ratio:"10",profit_lever:"100",loss_spread:Ip,win_spread:Tp},ns={account_switch:"",action:Pp,trade_type:"",symbol:"",monitor_status:"auto",signal_period:"",time_period:"",side:"",auto_set:"yes",loss_present:"",win_multiple:Number(wu),lever:Number(Wo),risk:Number(zo),safeorder:"yes",end_time:"",signal_action:"",action_change:"",price:"",end_price:"",loss_price:"",win_type:"move",mix_type:hn,win_price:"",limit_price:"",info:"",number:"",order_action:Vo,monitor_item:"",price_period:"",monitor_type:"",kbars:"",half_lock:"no",signal_check:"",endkbar:0,signal_verify:"half",new_signal_action:"",sz_type:Ho,out_type:"",out_period:"",ema_period:52,have_symbol:"no",api_key:"",recver:"",rec_type:"",testtime:"",mix_open:"no",order_num:2,order_type:"double",temp_start_price:"",times:"",prices:"",first_ratio:Number(dn),ignore_loss:"normal",symbols:"",reduce_type:"loop",od_type:bu,signal_item:[],items:[],callbackSpread:"",profit_ratio:"10",profit_lever:"100"},Fp=Al("counter",{state:()=>({set_info:ce({}),orderinfo:ce(Object.assign({},Rn)),trade_order_info:ce(Object.assign({},Rn)),bot_set:ce(Object.assign({},rs)),api_info:ce(Object.assign({},{})),monitor_info:ce(Object.assign({},ns)),notice_info:ce(Object.assign({},is)),flower_info:ce(Object.assign({},{})),trade_signal:ce(Object.assign({},Ap)),swap_signal_info:ce(Object.assign({},Di)),swap_trade_info:ce(Object.assign({},Di)),limit_list:ce([]),selecttab:_e("swap"),monitor_data_symbol:_e(""),symbollist:ce([]),storsi_data:ce({}),bot_data:ce({}),signal_items:ce([]),holdlist:ce([]),bot_con_out_list:ce([]),api_list:ce([]),monitor_list:ce([]),signal_list:ce([]),flower_list:ce([]),price_to_do_list:ce([]),strategy_list:ce([]),spot_list:ce([]),notice_list:ce([]),trade_signal_list:ce([]),strategy_Set:ce([Object.assign({},Dp)]),monitor_items_list:ce([]),selectTag:_e("open"),user_type:_e("normal"),isbrowser:_e("no"),color:_e("#ffffff"),set_mode:_e(!1),monitor_selectTag:_e("ai"),show_period_select:_e(!1),show_drwa_bar:_e(!1),profit_steps:[{action:"整理模式",value:"1"},{action:"拆分两次",value:"2"},{action:"拆分三次",value:"3"}],monitoractions:[{action:"突破入场-趋势线",value:"trend_line_break"},{action:"突破入场-均线",value:"ema_break"},{action:"回撤入场-趋势线",value:"trend_line_support"},{action:"回撤入场-均线",value:"ema_support"},{action:"摸底摸顶",value:"mos_open"},{action:"信号监控",value:"monitor"}],emas:[{action:"EMA26",value:"26"},{action:"EMA52",value:"52"},{action:"EMA144",value:"144"},{action:"EMA576",value:"576"}],locks:[{action:"普通锁仓",value:"normal_lock"},{action:"分段锁仓",value:"mix_lock"},{action:"均线锁仓",value:"ema_lock"},{action:"画线锁仓",value:"trend_line_lock"}],monitor_action:[{action:"锁仓",value:"lock_position"},{action:"斩仓",value:"sub_position"},{action:"加仓",value:"add_postion"},{action:"离场",value:"close_postion"},{action:"管理",value:"master_tools"}],con_out_list:[{action:"EMA动态离场",value:"ema_out"},{action:"MACD动作离场",value:"macd_out"},{action:"均线金死叉离场",value:"ema_cross_out"},{action:"画线离场",value:"trend_line_out"}],master_actions_list:[{action:"锁仓动作",value:"lock_position"},{action:"斩仓动作",value:"reduce_position"},{action:"加仓动作",value:"add_position"},{action:"管理动作",value:"master_tools"},{action:"离场动作",value:"close_position"},{action:"批量动作",value:"multi_action"}],multi_action_list:[{action:"批量离场",value:"multi_close_position"},{action:"批量部分离场",value:"multi_part_out"},{action:"批量本金保护",value:"multi_keep_safe"}],multi_action_inside_list:[{action:"根据盈利金额",value:"by_profit"},{action:"根据盈利比例",value:"by_profit_ratio"},{action:"根据持仓方向",value:"by_side"},{action:"双向全部仓位",value:"both_side"}],out_action_list:[{action:"动态利润",value:"close_position_by_profit"},{action:"市价平仓",value:"close_position"},{action:"部分离场",value:"close_position_by_ratio"},{action:"均线动态离场",value:"close_position_by_ema"},{action:"画线动态离场",value:"close_position_by_trend_line"},{action:"移动止盈止损",value:"close_position_by_move_stop"},{action:"分段离场",value:"close_position_by_mix"},{action:"均线交叉离场",value:"close_position_by_ema_cross"},{action:"清空交易所",value:"close_all_orders"},{action:"测试功能(1)",value:"close_all_orders_by_profit"},{action:"测试功能(2)",value:"close_all_orders_by_ratio"}],postion_action_list:[{action:"止盈止损",value:"reset_win_loss"},{action:"本金保护",value:"keep_safe"},{action:"人工接管",value:"put_black_list"},{action:"取消订单",value:"cancel_order"},{action:"止盈止损(部分)",value:"reset_win_loss_part"},{action:"批量撤销止盈止损",value:"cancel_all_win_loss"}],Conditional_action_list:[{action:"均线金死叉离场",value:"ema_cross_out"},{action:"画线离场",value:"trend_line_out"}],monitor_item:[{action:"高级背离",value:"ai_monitor"},{action:"动能监控",value:"energy_monitor"},{action:"结构判断",value:"period_check"}],strategys:[{action:"MACD-AI",value:"macd_divergence"},{action:"EMA144-AI",value:"EMA144_first"}],ema_cross_out_list:[{action:"金叉离场",value:"crossover"},{action:"死叉离场",value:"crossunder"}],macd_out_list:[{action:"MACD 形成金叉",value:"crossover"},{action:"MACD 形成死叉",value:"crossunder"},{action:"MACD 上穿零轴",value:"througover"},{action:"MACD 下穿零轴",value:"througunder"}],storsi_out_list:[{action:"STORSI 形成金叉",value:"crossover"},{action:"STORSI 形成死叉",value:"crossunder"},{action:"STORSI 进入超买",value:"in_overbuy"},{action:"STORSI 离开超买",value:"out_overbuy"},{action:"STORSI 进入超卖",value:"in_oversell"},{action:"STORSI 离开超卖",value:"out_oversell"}],actionlist:[{action:"普通模式",value:"open"},{action:"分段模式",value:"mix"},{action:"循环模式",value:"reduce_mode"},{action:"重设止盈止损",value:"reset_win_loss"},{action:"本金保护",value:"keep_safe"},{action:"条件离场",value:"con_out"},{action:"追加斩仓",value:"auto_reduce"},{action:"快速锁仓",value:"auto_lock"},{action:"市价平仓",value:"pingall"},{action:"撤销止盈止损",value:"cancel_algos"},{action:"部分离场",value:"part_out"},{action:"分段离场",value:"mix_out"},{action:"均线锁仓",value:"ema_lock"},{action:"分段锁仓",value:"mix_lock"},{action:"动态利润",value:"profit_out"},{action:"画线锁仓",value:"trend_line_lock"},{action:"撤销委托(组)",value:"cancel_the_same_loss"}],openactionlist:[{action:"普通模式",value:"open"},{action:"分段模式",value:"mix"},{action:"循环模式",value:"reduce_mode"}],add_postion_action_list:[{action:"分段加仓",value:"mix_add"},{action:"均线加仓",value:"ema_add"},{action:"画线加仓",value:"trend_line_add"}],master_actions:[{action:"止盈止损",value:"reset_win_loss"},{action:"本金保护",value:"keep_safe"},{action:"条件离场",value:"con_out"},{action:"追加斩仓",value:"auto_reduce"},{action:"快速锁仓",value:"auto_lock"},{action:"市价平仓",value:"pingall"},{action:"部分离场",value:"part_out"},{action:"分段离场",value:"mix_out"},{action:"均线锁仓",value:"ema_lock"},{action:"分段锁仓",value:"mix_lock"},{action:"动态利润",value:"profit_out"},{action:"画线锁仓",value:"trend_line_lock"},{action:"撤销同组委托",value:"cancel_the_same_loss"}],IndicatorSeries:[{action:"显示 EMA",value:"ema"},{action:"显示 MACD",value:"macd"},{action:"显示 STORSI",value:"storsi"}],sz_type_list:[{action:"固定保证金",value:"usdt"},{action:"以损定仓",value:"risk"},{action:"指定张数",value:"coin"},{action:"以损订仓(模版)",value:"qrisk"},{action:"固定保证金(模版)",value:"qusdt"},{action:"以损定仓(模版)",value:"qrisk"}],ema_type_list:[{action:"26/52_最小",value:" 26-52-min"},{action:"26/52_最大",value:"26-52-max"},{action:"52/144_最小",value:"52-144-min"},{action:"52/144_最大",value:"52-144-max"},{action:"26/52/144_最小",value:"26-52-144-min"},{action:"26/52/144_最大",value:"26-52-144-max"}],monitor_openactionlist:[{action:"普通开仓",value:"open"},{action:"分段入场",value:"mix"},{action:"循环斩仓",value:"reduce_mode"}],allperids:[{name:"1分钟",value:"1m"},{name:"3分钟",value:"3m"},{name:"5分钟",value:"5m"},{name:"15分钟",value:"15m"},{name:"30分钟",value:"30m"},{name:"1小时",value:"1H"},{name:"2小时",value:"2H"},{name:"4小时",value:"4H"},{name:"6小时",value:"6H"},{name:"12小时",value:"12H"},{name:"1日",value:"1D"},{name:"2日",value:"2D"},{name:"3日",value:"3D"},{name:"5日",value:"5D"},{name:"1周",value:"1W"},{name:"1月",value:"1M"}]}),actions:{updateOrderinfo(){Object.assign(this.orderinfo,this.set_info)},set_set_mode(e){if(typeof e!="boolean")throw new TypeError("Expected a boolean value");this.set_mode=e},set_selectTag(e){if(typeof e!="string")throw new TypeError("Expected a string value");this.selectTag=e},reset_swap_info(){Object.assign(this.swap_signal_info,Di),Object.assign(this.swap_trade_info,Di),this.swap_signal_info.symbol=Wt().symbol.ticker,this.swap_signal_info.price_period=Wt().period.timeframe,this.swap_trade_info.symbol=Wt().symbol.ticker,this.swap_trade_info.price_period=Wt().period.timeframe},resetOrderinfo(){Object.assign(this.orderinfo,Rn),this.orderinfo.symbol=Wt().symbol.ticker,this.orderinfo.price_period=Wt().period.timeframe},resetBotSet(){Object.assign(this.orderinfo,rs)},resetMonitor_info(){Object.assign(this.monitor_info,ns),this.monitor_info.symbol=Wt().symbol.ticker,this.monitor_info.price_period=Wt().period.timeframe},resetNotice_info(){Object.assign(this.monitor_info,is)},resetFlower_info(){Object.assign(this.monitor_info,kp)},key_name(){if(this.monitor_info.sz_type==="risk")return"仓位风险";if(this.monitor_info.sz_type==="coin")return"仓位张数";if(this.monitor_info.sz_type==="usdt")return"保证金.U";if(this.monitor_info.sz_type.includes("present"))return"余额占比"},open_key_name(){return this.orderinfo.action==="auto_reduce"?"加仓张数":this.orderinfo.sz_type==="risk"?"仓位风险":this.orderinfo.sz_type==="coin"?"仓位张数":this.orderinfo.sz_type==="usdt"?"保证金.U":this.orderinfo.sz_type.includes("present")?"余额占比":"仓位大小"}}});let rr=null;function xu(){return rr}function Rp(e){return rr?(console.warn("WebSocket已经存在，请先关闭当前的WebSocket"),rr):(rr=new WebSocket(e),rr)}function Op(){rr&&(rr.close(),rr=null)}function os(e,t,r,i){console.log("unsubscribe:",e,t,r,i);const n=xu();if(n&&n.readyState===WebSocket.OPEN)try{n.send(JSON.stringify({action:"unsubscribe",params:{symbol:t,multiplier:r,timespan:i},ws_id:e}))}catch(o){console.error("发送unsubscribe消息失败:",o)}else console.warn("WebSocket未打开，无法发送unsubscribe消息")}function as(e,t,r,i){console.log("subscribe:",e,t,r,i);const n=xu();if(n&&n.readyState===WebSocket.OPEN)try{n.send(JSON.stringify({action:"subscribe",params:{symbol:t,multiplier:r,timespan:i},ws_id:e}))}catch(o){console.error("发送subscribe消息失败:",o)}else console.warn("WebSocket未打开，无法发送subscribe消息")}function ss(e,t,r,i,n){if(typeof t!="string"||typeof r!="string")throw new Error("Invalid input type");if(!t||!r)throw new Error("Input cannot be empty");Lp({symbol:e,url:i,key:r},function(o){n&&n(o||{})})}function Lp(e,t){chrome.runtime.sendMessage({type:"sendData",info:{url:e.url,data:e}},function(r){chrome.runtime.lastError?(console.error(chrome.runtime.lastError),t&&t({})):t&&t(r)})}const ki={};function Bp(e){if(!e)return 0;const t=e.substring(e.length-1),r=parseInt(e.substring(0,e.length-1));let i=0;if(t=="y")i=31536e3;else if(t=="M")i=2592e3;else if(t=="w"||t=="W")i=604800;else if(t=="d"||t=="D")i=86400;else if(t=="h"||t=="H")i=3600;else if(t=="m")i=60;else if(t=="s")i=1;else throw Error(`unsupport timeframe: ${e}`);return i*r*1e3}const Kr=[{key:"entry_price",value:"#00FF00",name:"price"},{key:"loss_price",value:"#FF0000",name:"loss_price"},{key:"end_price",value:"#D9D919",name:"end_price"},{key:"win_price",value:"#00FF00",name:"win_price"},{key:"active_price",value:"#00FF00",name:"price"},{key:"monitor_loss_price",value:"#FF0000",name:"loss_price"},{key:"safe_price",value:"#D9D919",name:"end_price"},{key:"monitor_win_price",value:"#00FF00",name:"win_price"},{key:"monitor_safe_point",value:"#00FF00",name:"temp_start_price"},{key:"monitor_end_price",value:"#D9D919",name:"end_price"},{key:"ruler_tool",value:"#D9D919",name:""},{key:"avg_price",value:"#D9D919",name:""},{key:"loss_win",value:"#D9D919",name:""},{key:"straightLine",value:"#00FF00",name:""},{key:"limit_price",value:"#00FF00",name:"limit_price"},{key:"monitor_limit_price",value:"#00FF00",name:"limit_price"},{key:"parallelStraightLine_self",value:"#00FF00",name:"limit_price"},{key:"mix_avg_price",value:"#00FF00",name:"limit_price"}],Np=[{key:"segment",text:"segment"},{key:"rayLine",text:"ray_line"},{key:"straightLine",text:"straight_line"},{key:"priceLine",text:"price_line"},{key:"horizontalStraightLine",text:"horizontal_straight_line"},{key:"horizontalRayLine",text:"horizontal_ray_line"},{key:"horizontalSegment",text:"horizontal_segment"},{key:"verticalStraightLine",text:"vertical_straight_line"},{key:"verticalRayLine",text:"vertical_ray_line"},{key:"verticalSegment",text:"vertical_segment"}],Vp=[{key:"priceChannelLine",text:"price_channel_line"},{key:"parallelStraightLine",text:"parallel_straight_line"}],Wp=[{key:"circle",text:"circle"},{key:"rect",text:"rect"},{key:"parallelogram",text:"parallelogram"},{key:"triangle",text:"triangle"}],zp=[{key:"fibonacciLine",text:"fibonacci_line"},{key:"fibonacciSegment",text:"fibonacci_segment"},{key:"fibonacciCircle",text:"fibonacci_circle"},{key:"fibonacciSpiral",text:"fibonacci_spiral"},{key:"fibonacciSpeedResistanceFan",text:"fibonacci_speed_resistance_fan"},{key:"fibonacciExtension",text:"fibonacci_extension"},{key:"gannBox",text:"gann_box"}],Hp=[{key:"xabcd",text:"xabcd"},{key:"abcd",text:"abcd"},{key:"threeWaves",text:"three_waves"},{key:"fiveWaves",text:"five_waves"},{key:"eightWaves",text:"eight_waves"},{key:"anyWaves",text:"any_waves"}],Wt=Al("kline",()=>{const e=Fp(),t=_e(!0),r=_e(!1),i=_e(!1),n=ce([{key:"single-line",icon:"segment",list:Np},{key:"more-line",icon:"priceChannelLine",list:Vp},{key:"polygon",icon:"circle",list:Wp},{key:"fibonacci",icon:"fibonacciLine",list:zp},{key:"wave",icon:"xabcd",list:Hp}]),o=[{key:"priceLine",text:"price_line",name:"价格线"},{key:"priceChannelLine",text:"price_channel_line",name:"价格通道"},{key:"parallelStraightLine",text:"parallelStraightLine",name:"平行线"},{key:"segment",text:"segment",name:"线段"},{key:"straightLine",text:"straight_line",name:"射线"},{key:"arrow",text:"arrow",name:"箭头"},{key:"triangle",text:"triangle",name:"三角形"},{key:"horizontalStraightLine",text:"horizontal_straight_line",name:"水平线"},{key:"verticalStraightLine",text:"vertical_straight_line",name:"垂直线"},{key:"eightWaves",text:"eight_waves",name:"路径"},{key:"ruler_tool",text:"ruler_tool",name:"矩形"},{key:"fibonacciSegment",text:"fibonacciSegment",name:"斐波数列"},{key:"fibonacciExtension",text:"fibonacciExtension",name:"斐波扩展"},{key:"circle",text:"circle",name:"圆形"},{key:"parallelogram",text:"parallelogram",name:"平行四边形"}];function a(A){if(ki[A])return ki[A];const F=A.length-1,R=A.substring(F),W=A.substring(0,F),Z=parseInt(W);let le="minute";if(R=="w"||R=="W")le="week";else if(R=="d"||R=="D")le="day";else if(R=="h"||R=="H")le="hour";else if(R=="m")le="minute";else if(R=="M")le="month";else throw new Error(`unsupport period: ${A}`);let Ae=A;R!="m"&&(Ae=`${W}${R.toUpperCase()}`);const ie=Bp(A);return ki[A]={multiplier:Z,timespan:le,text:Ae,timeframe:A,secs:ie},ki[A]}const s=ce([]),l=ce([]),c=["1m","3m","5m","10m","15m","30m","45m","90m","1H","2H","3H","4H","6H","8H","12H","1D","2D","3D","5D","1W","1M"].map(A=>{try{return a(A)}catch(F){return console.error(`Error creating period for ${A}:`,F),null}}).filter(A=>A!==null),f=_e(!1),h=_e("yes"),d=_e(!1),v=_e(""),p=_e(!1),g=["MACD","KDJ"],m=_e([]),_=ce({}),S=_e(""),y=_e(!1),w=_e(!0),C=_e(!0),I=_e(""),T=_e(!1),x=_e("chart"),M=_e(0),D=_e("no"),P=_e(!1),H=_e(!1),X=ce([]),G=ce([]),U=ce([]),oe=ce([]),ae=ce([]),De=ce([]),J=_e(null);function we(){confirm("您不同意规则，页面将关闭。")&&(window.close(),window.closed||alert("浏览器安全策略阻止了页面关闭。请手动关闭浏览器窗口。"))}const $=ce({}),ue=ce({}),ye=ce({});function Me(A){J.value&&A.forEach(F=>{var R;(R=J.value)==null||R.removeOverlay({name:F})})}function Se(A,F){const R=l.find(W=>W.name===A.name);if(F==="add")if(R){const W=l.indexOf(R);W!==-1&&(l.splice(W,1),l.push(A))}else l.push(A);else if(F==="edit"){if(R){const W=l.indexOf(R);W!==-1&&(l.splice(W,1),l.push(A))}}else if(F==="del"&&R){const W=l.indexOf(R);W!==-1&&l.splice(W,1)}}function We(A){var Ke,_t,bi,jo,Xo,$o;if(!A.length||A.length<2)return["","",""];const F=JSON.parse(JSON.stringify(A));if(((Ke=F[0])==null?void 0:Ke.timestamp)===void 0)return["","",""];const R=(_t=J.value)==null?void 0:_t.getDataList();if(!R||R.length<10)return["","",""];const W=R.at(-1);if(!W)return["","",""];const Z=R.at(-2);if(!Z)return["","",""];const le=R.at(-10);if(!le)return["","",""];const Ae=W.timestamp-Z.timestamp;F.forEach((ot,Eu)=>{if(Eu===0&&ot.dataIndex===void 0){const Yo=ot.timestamp,gn=R.reduce((Uo,Iu,Tu)=>Math.abs(Iu.timestamp-Yo)<Math.abs(R[Uo].timestamp-Yo)?Tu:Uo,0);gn!==-1&&(ot.dataIndex=gn,ot.timestamp=R[gn].timestamp);return}ot!=null&&ot.timestamp||(ot.timestamp=F[0].timestamp+(ot.dataIndex-F[0].dataIndex)*Ae)});const ie=((bi=F[1])==null?void 0:bi.timestamp)-((jo=F[0])==null?void 0:jo.timestamp);if(ie===0)throw new Error("点位0和点位1的时间戳相同，无法计算斜率");const ve=(F[0].value-F[1].value)/ie;(Xo=A[1])!=null&&Xo.timestamp||(F[1].timestamp=W.timestamp,F[1].value=F[0].value+ve*(F[0].timestamp-W.timestamp));let q=0;if(A[2]&&(q=F[0].value+ve*(F[0].timestamp-F[2].timestamp)-F[2].value),A[2]&&!(($o=A[2])!=null&&$o.timestamp)){const ot=F[0].value+ve*(F[0].timestamp-le.timestamp);F[2].value=ot-q,F[2].timestamp=le.timestamp}const Re=F.map(ot=>String(ot.value)).join(","),Je=F.map(ot=>String(ot.timestamp)).join(","),Et=($==null?void 0:$.pricePrecision)??2;return[Je,Re,Math.abs(q).toFixed(Et+1),q]}function ze(A,F,R=!1,W=[]){if(!J.value)return;const Z=(ie,ve)=>{var Re,Je;const q=(Je=(Re=ve[0])==null?void 0:Re.value)==null?void 0:Je.toFixed($.pricePrecision);if(q&&Number(q)>0)switch(ie){case"limit_price":e.swap_signal_info.limit_price=String(q),e.swap_trade_info.limit_price=String(q);break;case"win_price":e.swap_signal_info.win_price=String(q),e.swap_trade_info.win_price=String(q);break;case"loss_price":e.swap_signal_info.loss_price=String(q),e.swap_trade_info.loss_price=String(q);break;case"entry_price":e.swap_signal_info.price=String(q),e.swap_trade_info.price=String(q);break;case"end_price":e.swap_signal_info.end_price=String(q),e.swap_trade_info.end_price=String(q);break;case"safe_price":e.monitor_info.end_price=String(q);break;case"active_price":e.monitor_info.price=String(q);break;case"monitor_win_price":e.monitor_info.win_price=String(q);break;case"monitor_loss_price":e.monitor_info.loss_price=String(q);break;case"monitor_end_price":e.monitor_info.end_price=String(q);break;case"monitor_limit_price":e.monitor_info.limit_price=String(q);break}else ie!=="monitor_safe_point"&&ie!=="straightLine"&&Me([ie])},le=ie=>{var Re,Je;const ve=ie.overlay.name,q=ie.overlay.points;if(Z(ve,q),ve==="monitor_safe_point"){const Et=(Je=(Re=q[0])==null?void 0:Re.value)==null?void 0:Je.toFixed($.pricePrecision);e.monitor_info.temp_start_price=String(Et)}if(ve==="straightLine"){const[Et,Ke,_t,bi]=We(q);e.swap_signal_info.times=Et,e.swap_trade_info.times=Et,e.swap_signal_info.prices=Ke,e.swap_trade_info.prices=Ke}if(ve==="parallelStraightLine_self"){const[Et,Ke,_t,bi]=We(q);e.monitor_info.times=Et,e.monitor_info.prices=Ke,e.monitor_info.loss_present=_t,e.swap_trade_info.times=Et,e.swap_trade_info.prices=Ke,e.swap_trade_info.loss_present=_t}},Ae=F&&F!==void 0?{line:{color:F,size:3}}:{};J.value.createOverlay({name:A,lock:R,styles:Ae,points:W,onDrawEnd:ie=>{var q,Re;const ve={name:ie.overlay.name,lock:ie.overlay.lock,color:(Re=(q=ie.overlay.styles)==null?void 0:q.line)==null?void 0:Re.color,points:ie.overlay.points};return Se(ve,"add"),le(ie),!0},onSelected:ie=>(S.value=ie.overlay.id,!0),onPressedMoveEnd:ie=>{var q,Re;const ve={name:ie.overlay.name,lock:ie.overlay.lock,color:(Re=(q=ie.overlay.styles)==null?void 0:q.line)==null?void 0:Re.color,points:ie.overlay.points};return Se(ve,"edit"),le(ie),!0},onRemoved:ie=>{var q,Re;const ve={name:ie.overlay.name,lock:ie.overlay.lock,color:(Re=(q=ie.overlay.styles)==null?void 0:q.line)==null?void 0:Re.color,points:ie.overlay.points};return Se(ve,"del"),!0}})}function st(A){if(!J.value)return;const F={onDrawEnd:W=>{const Z={id:W.overlay.id,points:W.overlay.points,name:W.overlay.name};return Y(Z,"add"),!1},onPressedMoving:()=>!1,onPressedMoveEnd:W=>{const Z={id:W.overlay.id,points:W.overlay.points,name:W.overlay.name};return Y(Z,"edit"),!1},onSelected:W=>(S.value=W.overlay.id,!0),onDeselected:()=>(S.value="",!0),onRemoved:W=>{const Z={id:W.overlay.id,points:W.overlay.points,name:W.overlay.name};return Y(Z,"del"),!0},onDoubleClick:W=>!0},R=J.value.createOverlay({...F,...A});R&&(Array.isArray(R)?s.push(...R):s.push(R))}function et(){J.value&&(J.value.removeOverlay({name:"ruler_tool"}),J.value.createOverlay({name:"ruler_tool",onDrawEnd:A=>(V(A.overlay.points),!1),onPressedMoveEnd:A=>(V(A.overlay.points),!1)}))}function mt(A,F){J.value&&(J.value.removeOverlay({name:A}),J.value.createOverlay({name:A,onDrawEnd:R=>(z(R.overlay.points,F),!1),onPressedMoveEnd:R=>(z(R.overlay.points,F),!1)}))}function tt(A,F){if(F==="ruler_tool"){if(!Array.isArray(A)||A.length!==2)return 0;try{const[R,W]=A;return Math.abs(R.value-W.value)}catch(R){return console.error("Error in spread:",R),0}}else if(F==="parallelogram"){if(!Array.isArray(A)||A.length!==3)return 0;try{const[R,W,Z,le]=We(A);return le}catch(R){return console.error("Error in spread:",R),0}}}function b(A,F){J.value&&(J.value.removeOverlay({name:A}),J.value.createOverlay({name:A,onDrawEnd:R=>{const W=tt(R.overlay.points,A);if(F=="net_loss")e.monitor_info.loss_present=W.toFixed($.pricePrecision),e.swap_signal_info.loss_present=W.toFixed($.pricePrecision),e.swap_trade_info.loss_present=W.toFixed($.pricePrecision);else if(F=="callback_spread"){const Z=W.toFixed($.pricePrecision);e.monitor_info.callbackSpread=Z,e.swap_trade_info.callbackSpread=Z}return!1},onPressedMoveEnd:R=>{const W=tt(R.overlay.points,A);if(F=="net_loss")e.monitor_info.loss_present=W.toFixed($.pricePrecision),e.swap_signal_info.loss_present=W.toFixed($.pricePrecision),e.swap_trade_info.loss_present=W.toFixed($.pricePrecision);else if(F=="callback_spread"){const Z=W.toFixed($.pricePrecision);e.monitor_info.callbackSpread=Z,e.swap_trade_info.callbackSpread=Z}return!1}}))}function E(){!J.value||!S.value||(J.value.removeOverlay({id:S.value}),S.value="")}async function k(){const A=window==null?void 0:window.localStorage.getItem("bot_ip"),F=window==null?void 0:window.localStorage.getItem("bot_key"),R=`http://${A}:443/get_kline_info/${F}/kline_info/${$.ticker}-${ue.multiplier}-${ue.timespan}`;let W;try{return W=await Pn(R),W.status!=="success"?{status:"fail"}:(sessionStorage.setItem("kline_symbol",$.ticker),sessionStorage.setItem("kline_timeframe",ue.timeframe),{data:W.results.map(le=>({timestamp:Number(le.timestamp),open:parseFloat(le.open),high:parseFloat(le.high),low:parseFloat(le.low),close:parseFloat(le.close),volume:parseFloat(le.volume),turnover:parseFloat(le.turnover),fastk:parseFloat(le.fastk),fastd:parseFloat(le.fastd)})),lays:W.lays,status:W.status})}catch(Z){return console.error("Error in fetchData:",Z),{status:"error"}}}function O(A){T.value&&console.log(A)}function B(){return new Promise((A,F)=>{const R=window==null?void 0:window.localStorage.getItem("mode"),W=window==null?void 0:window.localStorage.getItem("bot_ip"),Z=window==null?void 0:window.localStorage.getItem("bot_key"),le=sessionStorage.getItem("kline_symbol")||"",Ae=sessionStorage.getItem("kline_timeframe")||"",ie=`http://${W}:443/get_kline_info/${Z}/symbol_list/list`,ve=q=>{if(q&&q.status==="success"){X.splice(0),G.splice(0),X.push(...q.swap_list),G.push(...q.spot_list),X.sort((Ke,_t)=>(_t.cap||0)-(Ke.cap||0));const Re=X.find(Ke=>Ke.ticker===le);if(Re)Object.assign($,Re);else{const Ke=X.find(_t=>_t.ticker==="ETH-USDT-SWAP");Object.assign($,Ke)}const Je=c.find(Ke=>Ke.timeframe===Ae);if(Je)Object.assign(ue,Je);else{const Ke=c.find(_t=>_t.timeframe==="1H");Object.assign(ue,Ke)}Object.assign(ye,q.set_info),e.bot_data=q.bot_data,e.signal_items=q.signal_items,localStorage.setItem("lever",ye.lever||"10"),localStorage.setItem("risk",ye.risk||"1"),localStorage.setItem("action",ye.action||"open"),localStorage.setItem("sz_type",ye.sz_type||"risk"),localStorage.setItem("loss_type",ye.loss_type||"point"),localStorage.setItem("win_multiple",ye.win_multiple||"1.5"),localStorage.setItem("monitor_item",ye.monitor_item||"trend_line_break"),localStorage.setItem("first_ratio",ye.first_ratio||"30"),localStorage.setItem("od_type",ye.od_type||"normal"),localStorage.setItem("win_spread",ye.win_spread||""),localStorage.setItem("loss_spread",ye.loss_spread||"");let Et=JSON.stringify(ye.black_list||[]);localStorage.setItem("black_list",Et),h.value="success",A("success")}else console.error("Invalid response data:",q),A("failed")};R==="yes"?Pn(ie).then(ve).catch(q=>{console.error("Error fetching symbols:",q),F(q.message)}):new Promise((q,Re)=>{ss("ETH-USDT-SWAP",W,Z,ie,Je=>{Je?q(Je.data):Re(new Error("No data received from generatedDataList"))})}).then(ve).catch(q=>{console.error("Error fetching symbols:",q),F(q.message)})})}async function j(){const A=window==null?void 0:window.localStorage.getItem("mode"),F=window==null?void 0:window.localStorage.getItem("bot_ip"),R=window==null?void 0:window.localStorage.getItem("bot_key"),W=`http://${F}:443/periodinfos/${R}/${$.ticker}`;try{let Z;if(A==="yes"?Z=await Pn(W):Z=await new Promise((le,Ae)=>{ss("ETH-USDT-SWAP",F,R,W,ie=>{ie?le(ie.data):Ae(new Error("No data received from generatedDataList"))})}),!Z||!Z.results)throw new Error("Invalid response data");Object.assign(_,Z.results)}catch(Z){console.error("Error in getperiodinfos:",Z)}}async function Y(A,F,R){const W=window==null?void 0:window.localStorage.getItem("bot_ip"),Z=window==null?void 0:window.localStorage.getItem("bot_key");if(!W||!Z){console.error("botIp or botKey is not available");return}if(F==="del"&&d.value==!0)return;const le=`http://${W}/takeover_order`;A.action_status=F,A.kline_item=R||"lays",A.symbol=$.ticker;const Ae={symbol:$.ticker,action:"kline_data",position_mode:F,key:Z,action_info:A,sz_type:"lays"};try{const ie=await fetch(le,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ae)});if(!ie.ok)throw new Error(`Failed to send data: status code ${ie.status}`);console.log("Data sent successfully")}catch{console.error("Error sending data:")}}function V(A){if(J.value&&A&&A.length==2){const F=Math.abs(A[0].dataIndex-A[1].dataIndex),R=Ze(F);e.swap_signal_info.end_time=String(R),e.swap_trade_info.end_time=String(R),e.monitor_info.end_time=String(R),e.orderinfo.testtime=ge(R),e.monitor_info.testtime=ge(R)}}function z(A,F){if(!(!J.value||!Array.isArray(A)||A.length!==2))try{const[R,W]=A,Z=Math.abs(R.value-W.value);F=="net_loss"?(e.monitor_info.loss_present=Z.toFixed($.pricePrecision),e.swap_signal_info.loss_present=Z.toFixed($.pricePrecision),e.swap_trade_info.loss_present=Z.toFixed($.pricePrecision)):e.swap_signal_info.callbackSpread=Z.toFixed($.pricePrecision)}catch(R){console.error("Error calculating net loss:",R)}}function L(A){if(!J.value)return;const F=A=="dark"?"#2962ff":"#2DC08E",R=A=="dark"?"#FFFFFF":"#F92855";return{candle:{type:"candle_solid",bar:{upColor:F,downColor:R,noChangeColor:"#888888",upBorderColor:F,downBorderColor:R,noChangeBorderColor:"#888888",upWickColor:F,downWickColor:R,noChangeWickColor:"#888888"},tooltip:{custom:[{title:"O:",value:"{open}"},{title:"H:",value:"{high}"},{title:"L:",value:"{low}"},{title:"C:",value:"{close}"},{title:"V:",value:"{volume}"}]}},indicator:{lines:[{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:"#6B8E23"},{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:"#935EBD"},{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:"#FFFF00"},{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:"#E11D74"},{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:"#01C5C4"},{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:"#FFB6C1"},{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:"#0000CD"},{style:"solid",smooth:!1,size:1,dashedValue:[2,2],color:"#228B22"}]}}}function K(){if(!J.value)return;s.forEach(F=>{var R;(R=J.value)==null||R.removeOverlay(F)}),s.splice(0,s.length);const A=Kr.map(F=>F.key);Me(A)}async function re(){var A;if(J.value){try{d.value=!0,console.log("开始加载历史行情");const F=await k();if(console.log("历史行情获取状态:",F.status),F.status==="fail"){console.error("Failed to fetch data");return}if(F.status==="error"){console.error("Error fetching data");return}if(F.data.length>0){if(K(),J.value.applyNewData(F.data,!1),d.value=!1,J.value.setPriceVolumePrecision(Number($.pricePrecision),0),v.value==="changesymbol"){const R=Kr.map(W=>W.key);Me(R)}if(v.value="",J.value.scrollToRealTime(),I.value?(console.log("重新订阅"),as(I.value,$.ticker,ue.multiplier,ue.timespan)):(console.log("全新订阅"),Q()),fr(),Mt(),l.length>0&&l.forEach(R=>{ze(R.name,R.color,R.lock,R.points)}),((A=F==null?void 0:F.lays)==null?void 0:A.symbol)===$.ticker)for(const R of F.lays.data)J.value.getOverlayById(R.id)?console.log("存在跳过"):st(R);p.value=!1}else console.error("No data fetched")}catch(F){console.error("Error in onMounted:",F)}p.value=!1}}async function Q(){const A=window==null?void 0:window.localStorage.getItem("mode"),R=`ws://${window==null?void 0:window.localStorage.getItem("bot_ip")}:8765`,W=window==null?void 0:window.localStorage.getItem("bot_key");function Z(){const ie=Rp(R);ie.onopen=()=>{console.log("尝试连接实时行情服务器"),ie.send(JSON.stringify({action:"auth",params:W}))},ie.onmessage=p.value===!1?Ae:()=>{},ie.onerror=ve=>{console.error("WebSocket错误:",ve),le()},ie.onclose=()=>{console.log("WebSock被关闭,choose to reconnect"),y.value=!1,le()}}function le(){setTimeout(()=>{Op(),Z()},1e4)}function Ae(ie){if(p.value===!0){console.log("切换K 线，跳过更新");return}const ve=JSON.parse(ie.data);if(ve.status==="auth_success"){console.log("实时行情服务器连接成功"),y.value=!0,I.value=ve.ws_id,as(I.value,$.ticker,ue.multiplier,ue.timespan);return}if(ve.bot_data&&typeof ve.bot_data=="object"&&Object.keys(ve.bot_data).length>0&&(e.bot_data=ve.bot_data),!!y.value&&!(!J.value||A!=="yes")){for(const q in ve)q!=="symbol"&&q!=="period"&&q!=="bot_data"&&!isNaN(ve[q])&&(ve[q]=parseFloat(ve[q]));ve.symbol===$.ticker&&ve.period===ue.timeframe&&(p.value===!1?J.value.updateData(ve):console.log("加载k线停止更新"))}}Z()}function se(A){A.ticker===$.ticker||x.value!=="chart"||!J.value||(os(I.value,$.ticker,ue.multiplier,ue.timespan),p.value=!0,Object.assign($,A),sessionStorage.setItem("symbol",JSON.stringify(A)),v.value="changesymbol",e.swap_signal_info.symbol=$.ticker,e.monitor_info.symbol=$.ticker,e.monitor_info.price_period=ue.timeframe,e.swap_signal_info.price_period=ue.timeframe,e.swap_trade_info.price_period=ue.timeframe,e.swap_trade_info.symbol=$.ticker,i.value=!0,Y({symbol_info:$},"edit","symbol_info"))}function de(A){A.timeframe===ue.timeframe||x.value!=="chart"||!J.value||(os(I.value,$.ticker,ue.multiplier,ue.timespan),p.value=!0,Object.assign(ue,A),sessionStorage.setItem("period",JSON.stringify(A)),e.monitor_info.price_period=ue.timeframe,e.swap_signal_info.price_period=ue.timeframe,e.swap_signal_info.symbol=$.ticker,e.swap_trade_info.price_period=ue.timeframe,e.swap_trade_info.symbol=$.ticker,e.monitor_info.symbol=$.ticker,i.value=!0,Y({period_info:ue},"edit","symbol_info"))}function ge(A,F="YYYY-MM-DD HH:mm:00"){const R=new Date(A),W=String(R.getFullYear()),Z=String(R.getMonth()+1).padStart(2,"0"),le=String(R.getDate()).padStart(2,"0"),Ae=String(R.getHours()).padStart(2,"0"),ie=String(R.getMinutes()).padStart(2,"0");return F.replace("YYYY",W).replace("MM",Z).replace("DD",le).replace("HH",Ae).replace("mm",ie)}function be(A){if(A instanceof Date)return ge(A);if(typeof A!="string")return String(A);try{const F=new Date(A);if(!isNaN(F.getTime()))return ge(F)}catch(F){console.error("Error parsing date:",F)}return A}function ke(A){const F=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(Z)?$/,R=A.match(F);if(!R)throw new Error("Invalid date-time format. Expected YYYY-MM-DD HH:mm:ss or YYYY-MM-DD HH:mm:ssZ");const[,W,Z,le,Ae,ie,ve,q]=R,Re=[W,Z-1,le,Ae,ie,ve].map(Number);let Je;return q==="Z"?Je=new Date(Date.UTC(...Re)):Je=new Date(...Re),Je.getTime()}function Ze(A){return Date.now()+ue.secs*A}function Pt(A){if(A)if(A.includes(":")){const F=ke(A);return ge(F)}else return ge(Number(A));else return"长期有效"}function fr(){if(typeof $.ctVal>"u"||typeof $.minSz>"u"||typeof $.ctValCcy>"u")return null;const F=($.minSz*$.ctVal).toFixed(5).replace(/\.?0+$/,"");e.orderinfo.minSz=`${String($.minSz)}张`,e.orderinfo.minCoin=`${F}个${$.ctValCcy}`}function Mt(){if(!J.value)return;J.value.overrideIndicator({name:"MACD",precision:$.pricePrecision},"MACD_BOARD");const A=ye.ema_periods.filter(F=>F!==0);J.value.overrideIndicator({name:"EMA",calcParams:A},"candle_pane"),J.value.overrideIndicator({name:"STORSI",precision:2},"STORSI_BOARD")}function rt(A,F){return F in A&&(delete A[F],console.log(`Key '${F}' was found and removed.`)),A}function Ue(A){return A==null?void 0:A.split("-")[0]}function Le(A,F,R="swap_signal_info"){var Z;if(!J.value)return;const W=Kr.find(le=>le.key===A);if(W){let le=[];if(F){const Ae=(Z=J.value)==null?void 0:Z.getDataList();if(Ae&&Ae.length>0){const ie=Ae[Ae.length-1];let ve;if(R==="swap_signal_info")ve=e.swap_signal_info[W.name];else if(R==="monitor_info")ve=e.monitor_info[W.name];else if(R==="swap_trade_info")ve=e.swap_trade_info[W.name];else{console.warn(`Unrecognized 'from' value: ${R}. Using default value.`);return}le=[{timestamp:ie.timestamp,value:Number(ve)}]}else console.error("Kline data is empty or invalid")}try{Me([W.key]),ze(W.key,W.value,!1,le)}catch(Ae){console.error("Error creating price tool:",Ae)}}else console.warn(`Price tool with name '${A}' not found`)}function Pr(){if(!J.value)return;const A=Kr.map(F=>F.key);Me(A)}function vn(A){return x.value==="chart"&&$.ticker===A}function At(){Object.assign(_,{})}function pn(){return[]}return{count:M,chart:J,symbol:$,period:ue,all_symbols:X,createTag:ze,resize:D,del_price_line:Me,All_overlays:n,favorite_overlays:De,testdata:o,addOverlay:st,clickRemove:E,selectDraw:S,draw:x,fetchData:k,getSymbols:B,loadklinehistory:re,realtime_kline:Q,set_symbol:se,set_period:de,AllPeriods:c,showsymbol:H,makePeriod:a,ind:g,save_inds:m,showRiskDialog:w,showboard:C,creatRuler:et,loadingkline:p,sendData:Y,save_overlays:s,periodinfos:_,getperiodinfos:j,showcard:P,rebuildchart:i,removeralloverlays:K,save_price_lines:l,edit_save_price_lines:Se,getThemeStyles:L,convertTimestampToLocalTime:ge,parseDateTime:ke,getendtime:Ze,make_time:be,return_time:Pt,removeKeyIfExists:rt,getBaseCurrency:Ue,status:h,spot_list:G,set_info:ye,show_indicator:t,min_size:r,reset_indicator:f,price_tool:Kr,create_price_tool:Le,del_all_price_tool:Pr,ws_id:I,showlog:O,debug_mode:T,get_net_loss:mt,trade_signal_list:ae,Can_Draw:vn,getNumberKeysFromInterface:pn,strategy_list:U,strategy_set_list:oe,closeWindow:we,reset_periodinfos:At,get_spread:b}}),jp=$s({__name:"App",setup(e){const t=sa(()=>Ko(()=>import("./board-BxTy2jsv.js"),__vite__mapDeps([0,1,2,3]))),r=sa(()=>Ko(()=>import("./chart-rOLy3Hs5.js"),__vite__mapDeps([4,1,2,3,5,6,7,8,9]))),i=_e(""),n=Wt(),o=()=>{const s=window.innerWidth,l=window.innerHeight;console.log(s,l),i.value=s<500?"board":"chart",s<500?(i.value="board",n.show_indicator=!1,n.min_size=!0):(i.value="chart",n.show_indicator=!0,n.min_size=!1)};So(()=>{try{const s=!!(window.chrome&&chrome.runtime&&chrome.runtime.id);localStorage.setItem("mode",s?"no":"yes"),o(),window.addEventListener("resize",o)}catch(s){a("Error during component mount:",s)}}),wo(()=>{try{window.removeEventListener("resize",o)}catch(s){a("Error during component unmount:",s)}});const a=(s,l)=>{console.error(s,l)};return(s,l)=>(ii(),gf(dt,null,[i.value==="board"?(ii(),Xi(Vn(t),{key:0})):Sa("",!0),i.value==="chart"?(ii(),Xi(Vn(r),{key:1})):Sa("",!0)],64))}}),Cu=oh(jp);Cu.use(uh());Cu.mount("#app");const Sg=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Pn as $,ig as A,$c as B,Qp as C,bf as D,tg as E,ug as F,ag as G,Mf as H,ce as I,dt as J,$i as K,ut as L,sn as M,Yp as N,og as O,Xs as P,Jp as Q,lr as R,kc as S,bl as T,Up as U,dg as V,Ac as W,Ee as X,af as Y,sf as Z,sg as _,Fp as a,yf as a0,eg as a1,bg as a2,yg as a3,Op as a4,kt as a5,_g as a6,mg as a7,gg as a8,_s as a9,Sg as aA,Hu as aa,As as ab,Oe as ac,ne as ad,Pe as ae,Bt as af,xe as ag,lg as ah,vt as ai,Ve as aj,ng as ak,hg as al,dc as am,oh as an,Ir as ao,qp as ap,vg as aq,pg as ar,sa as as,fg as at,Go as au,Kp as av,Gp as aw,Au as ax,cg as ay,mn as az,wo as b,ii as c,$s as d,Xi as e,ei as f,ss as g,yl as h,he as i,gf as j,vl as k,Vn as l,Ye as m,lo as n,So as o,wc as p,Zp as q,rg as r,Sa as s,$p as t,Wt as u,so as v,Oi as w,_e as x,Ns as y,pl as z};
