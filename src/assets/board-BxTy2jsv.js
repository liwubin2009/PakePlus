import{d as w,u,a as S,w as s,o as p,b,c as y,e as I,$ as T,g as h}from"./main-BeSCBoN1.js";import{_ as k,E as v}from"./zixuan_list.vue_vue_type_style_index_0_lang-Bztu2ySh.js";import"./index-DyY66E7G.js";const $=w({__name:"board",setup(L){const i=u(),t=S();function l(o,e){return JSON.stringify(o)!==JSON.stringify(e)?JSON.parse(JSON.stringify(e)):o}async function m(){const o=window==null?void 0:window.localStorage.getItem("mode"),e=window==null?void 0:window.localStorage.getItem("bot_ip"),n=window==null?void 0:window.localStorage.getItem("bot_key"),a=`http://${e}:443/get_kline_test/ETH-USDT-SWAP/${n}`;let r;o==="yes"?r=await T(a):r=await new Promise(f=>{h("ETH-USDT-SWAP",e,n,a,function(g){f(g.data)})});const d=l(t.holdlist,r.hold_list);d!==t.holdlist&&(t.holdlist=d);const _=l(t.limit_list,r.limit_list);_!==t.limit_list&&(t.limit_list=_),t.bot_data=r.bot_data,console.log("更新持仓列表:")}const c=()=>{v.confirm("本工具旨在提供便捷的使用体验，但请注意，胜率与收益与您的操作密切相关。如果您决定继续使用本工具，则视为您已充分了解并知悉相关风险，并愿意承担盈亏的责任。","风险提示",{confirmButtonText:"继续使用",cancelButtonText:"关闭离开",type:"warning",center:!0}).then(()=>{t.set_mode=!0,t.selectTag="set"}).catch(()=>{console.log("用户选择关闭"),i.closeWindow()})};return s(()=>t.monitor_info.endkbar,(o,e)=>{if(o===0){t.monitor_info.end_time="",t.monitor_info.testtime="";return}const n=i.getendtime(Number(o));t.orderinfo.endtime=String(n),t.monitor_info.end_time=String(n),t.orderinfo.testtime=i.convertTimestampToLocalTime(n),t.monitor_info.testtime=i.convertTimestampToLocalTime(n)}),s(()=>t.monitor_info.price_period,(o,e)=>{o!==e&&(t.monitor_info.end_time="",t.monitor_info.endkbar=0,t.monitor_info.testtime="")}),s(()=>t.monitor_info.action,(o,e)=>{o!==e&&(t.monitor_info.end_time="",t.monitor_info.endkbar=0,t.monitor_info.testtime="")}),p(async()=>{const o=window==null?void 0:window.localStorage.getItem("bot_ip"),e=window==null?void 0:window.localStorage.getItem("bot_key");if(window==null||window.localStorage.getItem("mode"),window==null||window.localStorage.getItem("lever"),window==null||window.localStorage.getItem("action"),window==null||window.localStorage.getItem("risk"),!o||!e){c();return}t.selectTag="open",i.getSymbols();const n=await i.getSymbols();if(console.log("获取符号状态:",n),n!=="success"){c();return}i.draw="board",m();const a=setInterval(()=>{m()},2e4);b(()=>{clearInterval(a)})}),(o,e)=>(y(),I(k))}});export{$ as default};
