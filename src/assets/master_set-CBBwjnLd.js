import{D as m,G as U,B as x,z as j,E as q}from"./zixuan_list.vue_vue_type_style_index_0_lang-Bztu2ySh.js";/* empty css                  */import{E as T,a as F}from"./el-option-DgYD06Jd.js";import{d as L,u as Q,x as g,a as X,o as Y,c as i,j as v,k as a,m as o,p as s,l,a0 as r,v as c,J as E,a1 as z,e as P,s as C,t as B}from"./main-BeSCBoN1.js";import{p as R,a as K}from"./post_browser-CYSuer52.js";import{E as A,a as Z}from"./index-Bdt1jrkR.js";import{E as S}from"./index-CSTuB7SG.js";import{E as ee}from"./index-B8aHpL5e.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DyY66E7G.js";const le={class:"radio-group-container"},oe={key:0,style:{width:"300px"}},ae={class:"container"},se={class:"container"},ne={class:"container"},ue={key:1},re={class:"radio-group-container"},de={key:0},ie={class:"container"},ce={style:{color:"black","font-size":"10px","user-select":"none","text-align":"left"}},_e={class:"container"},pe={class:"container"},me={class:"container"},ve={class:"container"},fe={class:"container"},ye={class:"container"},we={class:"container"},Ve={key:1,style:{width:"300px"}},ge=L({__name:"master_set",setup(be){Q();const V=g("user_list"),b=g("add"),d=X(),h=g({}),D=g({}),f=g({}),n=g({});async function N(y){return await q.confirm(y,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})}function G(y){try{const t={...y};["update_time","account_name","account_uid","user"].forEach(u=>{t[u]!==void 0&&delete t[u]}),D.value=t}catch(t){console.error("Error in sanitizeSignalInfo:",t),S({title:"错误",message:"处理信号信息时发生错误",type:"error"})}}async function M(){const y=localStorage.getItem("bot_ip"),t=localStorage.getItem("bot_key"),_=localStorage.getItem("mode"),u=`http://${y}/takeover_order`,p={symbol:"ETH-USDT-SWAP",action:"bot_set",key:t,action_info:{action_status:"get_master_data"}};try{let e;_==="no"?e=await new Promise(k=>{R(p,u,I=>k(I.data))}):e=await K(p,u),e.status==="success"?(h.value=e.data,setTimeout(()=>{S({title:"执行成功",message:e.msg,type:"success"})},1e3)):await N(e.msg)}catch(e){S({title:"提示",message:"请求出现错误，请重试",type:"error"}),console.error(e)}}const H=[{value:"test",action:"试用用户"},{value:"trade_leader",action:"交易员"},{value:"common",action:"普通用户"}],J=[{value:"365",action:"一年"},{value:"730",action:"两年"},{value:"1095",action:"三年"}];async function $(){const y=localStorage.getItem("bot_ip"),t=localStorage.getItem("bot_key"),_=localStorage.getItem("mode");let u,p,e;if(V.value==="user_list")u="edit_user_info",p=f.value,p={...f.value,action_status:u},e="确认增加账号吗";else if(V.value==="flower_list")u="edit_flower_info",p={...n.value,action:b.value==="add"?"add":"del",action_status:u},e="正在添加，请稍等";else return;const k={symbol:"ETH-USDT-SWAP",action:"bot_set",key:t,action_info:p},I=`http://${y}/takeover_order`;if(await N(e))try{let w;_==="no"?w=await new Promise(O=>{R(k,I,W=>O(W.data))}):w=await K(k,I),w.status==="success"?(await M(),setTimeout(()=>{S({title:"执行成功",message:w.msg,type:"success"})},1e3)):await N(w.msg)}catch(w){S({title:"提示",message:"请求出现错误，请重试",type:"error"}),console.error(w)}}return Y(async()=>{await M()}),(y,t)=>{const _=F,u=j,p=ee;return i(),v(E,null,[a("div",le,[o(l(U),{size:"default",modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=e=>V.value=e)},{default:s(()=>[o(l(m),{value:"user_list"},{default:s(()=>[r("用户信息")]),_:1}),o(l(m),{value:"flower_list"},{default:s(()=>[r("跟随信息")]),_:1})]),_:1},8,["modelValue"])]),V.value==="user_list"?(i(),v("div",oe,[a("div",ae,[a("p",{style:c({color:l(d).color})},"选择用户:",4),o(l(T),{modelValue:f.value.user,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value.user=e),placeholder:"选择一个开仓模式",teleported:!1,style:{width:"200px"}},{default:s(()=>[(i(!0),v(E,null,z(h.value.user_list,e=>(i(),P(_,{key:e.user,label:e.user,value:e.user},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),a("div",se,[a("p",{style:c({color:l(d).color})},"用户类型:",4),o(l(T),{modelValue:f.value.user_type,"onUpdate:modelValue":t[2]||(t[2]=e=>f.value.user_type=e),placeholder:"选择一个开仓模式",teleported:!1,style:{width:"200px"}},{default:s(()=>[(i(),v(E,null,z(H,e=>o(_,{key:e.action,label:e.action,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),a("div",ne,[a("p",{style:c({color:l(d).color})},"续期时间:",4),o(l(T),{modelValue:f.value.days,"onUpdate:modelValue":t[3]||(t[3]=e=>f.value.days=e),placeholder:"选择一个开仓模式",teleported:!1,style:{width:"200px"}},{default:s(()=>[(i(),v(E,null,z(J,e=>o(_,{key:e.action,label:e.action,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),o(u,{type:"primary",onClick:t[4]||(t[4]=e=>$())},{default:s(()=>[r("提交执行")]),_:1})])):C("",!0),V.value==="flower_list"?(i(),v("div",ue,[a("div",re,[o(l(U),{size:"default",modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=e=>b.value=e)},{default:s(()=>[o(l(m),{value:"add"},{default:s(()=>[r("添加跟随")]),_:1}),o(l(m),{value:"edit"},{default:s(()=>[r("跟随列表")]),_:1})]),_:1},8,["modelValue"])]),b.value==="add"?(i(),v("div",de,[a("div",ie,[a("p",{style:c({color:l(d).color})},"要跟随谁:",4),o(l(T),{modelValue:n.value.account_uid,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.account_uid=e),placeholder:"选择一个开仓模式",teleported:!1,style:{width:"200px"}},{default:s(()=>[(i(!0),v(E,null,z(h.value.trader_list,e=>(i(),P(_,{key:e.account_name,label:e.account_name,value:e.account_uid,onClick:k=>G(e)},null,8,["label","value","onClick"]))),128))]),_:1},8,["modelValue"])]),o(p,{style:{"max-width":"300px","margin-top":"1cqh"}},{default:s(()=>[a("div",null,[a("pre",ce,B(JSON.stringify(D.value,null,2)),1)])]),_:1}),a("div",_e,[a("p",{style:c({color:l(d).color})},"谁要跟随:",4),o(l(x),{modelValue:n.value.api_key,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.api_key=e),style:{width:"200px"}},null,8,["modelValue"])]),a("div",pe,[a("p",{style:c({color:l(d).color})},"设备地址:",4),o(l(x),{modelValue:n.value.bot_ip,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.bot_ip=e),style:{width:"200px"}},null,8,["modelValue"])]),a("div",me,[a("p",{style:c({color:l(d).color})},"设备秘钥:",4),o(l(x),{modelValue:n.value.bot_key,"onUpdate:modelValue":t[9]||(t[9]=e=>n.value.bot_key=e),style:{width:"200px"}},null,8,["modelValue"])]),a("div",ve,[a("p",{style:c({color:l(d).color})},"跟随比例:",4),o(l(x),{modelValue:n.value.present,"onUpdate:modelValue":t[10]||(t[10]=e=>n.value.present=e),style:{width:"200px"}},null,8,["modelValue"])]),a("div",fe,[a("p",{style:c({color:l(d).color})},"取个名称:",4),o(l(x),{modelValue:n.value.accept_user,"onUpdate:modelValue":t[11]||(t[11]=e=>n.value.accept_user=e),style:{width:"200px"}},null,8,["modelValue"])]),a("div",ye,[a("p",{style:c({color:l(d).color})},"动作限制:",4),o(l(U),{size:"default",modelValue:n.value.allow_action,"onUpdate:modelValue":t[12]||(t[12]=e=>n.value.allow_action=e)},{default:s(()=>[o(l(m),{value:"both"},{default:s(()=>[r("开平仓")]),_:1}),o(l(m),{value:"open"},{default:s(()=>[r("只开仓")]),_:1}),o(l(m),{value:"close"},{default:s(()=>[r("只平仓")]),_:1})]),_:1},8,["modelValue"])]),a("div",we,[a("p",{style:c({color:l(d).color})},"信号加仓:",4),o(l(U),{size:"default",modelValue:n.value.allow_add,"onUpdate:modelValue":t[13]||(t[13]=e=>n.value.allow_add=e)},{default:s(()=>[o(l(m),{value:"no"},{default:s(()=>[r("禁止加仓")]),_:1}),o(l(m),{value:"yes"},{default:s(()=>[r("允许加仓")]),_:1})]),_:1},8,["modelValue"])]),o(u,{type:"primary",onClick:t[14]||(t[14]=e=>$())},{default:s(()=>[r("提交执行")]),_:1})])):C("",!0),b.value==="edit"?(i(),v("div",Ve,[o(l(Z),{data:h.value.flower_list},{default:s(()=>[o(l(A),{type:"expand",style:{width:"10vw"}},{default:s(e=>[a("div",null,[a("p",null,"地址: "+B(e.row.notice_url),1),a("p",null," 知否主要: "+B(e.row.ismaster=="yes"?"是主要":"非主要"),1),o(u,{size:"small",type:"danger",round:""},{default:s(()=>[r("删除账户")]),_:1}),o(u,{size:"small",type:"danger",round:""},{default:s(()=>[r("修改跟随")]),_:1})])]),_:1}),o(l(A),{label:"Name",style:{width:"90vw"}},{default:s(e=>[r(B(e.row.accept_user),1)]),_:1})]),_:1},8,["data"])])):C("",!0)])):C("",!0)],64)}}}),Ne=te(ge,[["__scopeId","data-v-40af082b"]]);export{Ne as default};
