import{D as b,G as j,B as G,H as q,z as Q,E as W}from"./zixuan_list.vue_vue_type_style_index_0_lang-Bztu2ySh.js";/* empty css                  */import{E as H,a as X}from"./el-option-DgYD06Jd.js";import{d as Y,a as Z,u as ee,x as w,w as U,o as te,c as _,j as y,k as u,m as o,p as l,l as t,a0 as r,J as A,a1 as K,e as h,t as v,s as f,v as le,E as ae}from"./main-BeSCBoN1.js";import{s as oe}from"./SendData-B_I2FNqn.js";import{E as p,a as $}from"./index-Bdt1jrkR.js";import{E as O}from"./index-CSTuB7SG.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DyY66E7G.js";const ne={class:"container-header"},se={key:0,class:"container"},re={class:"select-container"},de={class:"center-container"},ue={key:1},ce={key:2},_e={class:"container-header"},me={key:0},pe={class:"center-container"},ve={key:1},fe={class:"center-container"},we={key:2},ye={class:"container_1"},be={class:"center-container"},he=Y({__name:"result",setup(ge){const c=Z(),s=ee(),g=w([]),k=w([]),N=w([]),R=w([]),E=w([]),B=w([]),C=w("signal"),x=w("list"),S=w("");async function T(i){return await W.confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"})}function z(i,a){if(!s.chart)return;const d=s.all_symbols.find(n=>n.ticker===i);if(d){const n=s.makePeriod(a);d.ticker!==s.symbol.ticker?(Object.assign(s.period,n),s.set_symbol(d)):(console.log("symbol一直"),s.set_period(n))}}function F(){try{const i=c.bot_data.monitor_signal_list;if(!Array.isArray(i))throw new Error("signal_list 不是一个有效的数组");return N.value=[...new Set(i.map(a=>a.monitor_item))],R.value=[...new Set(i.map(a=>a.period))],i.filter(a=>{const d=g.value.length===0||g.value.includes(a.monitor_item),n=k.value.length===0||k.value.includes(a.period);return d&&n}).sort((a,d)=>d.monitor_time-a.monitor_time)}catch(i){return console.error("获取项时发生错误:",i.message),[]}}function P(){try{const i=c.bot_data.viewpoint_list;if(!Array.isArray(i))throw new Error("viewpoint_list 不是一个有效的数组");return i.filter(a=>a.symbol===s.symbol.ticker).sort((a,d)=>d.start_time-a.start_time)}catch(i){return console.error("获取观点列表时发生错误:",i.message),[]}}async function V(i,a,d){const n=localStorage.getItem("bot_ip"),e=localStorage.getItem("bot_key");let m;i==="signal"?m={monitor_id:d.monitor_id,action_status:a}:m=a==="add"?{viewpoint:S.value,symbol:s.symbol.ticker,period:s.period.timeframe,end_time:c.monitor_info.end_time,action:"add"}:{viewpoint:d.viewpoint,action:"del"};const J={symbol:s.symbol.ticker,action:i==="signal"?"signal_item":"viewpoint",key:e,action_info:m},L=`http://${n}/takeover_order`;try{if(await T("确认增加账号吗")){const I=await oe(J,L);I.status==="sucess"?O({title:"执行成功",message:I.msg,type:"success"}):await T(I.msg)}}catch(M){O({title:"提示",message:"请求出现错误，请重试",type:"error"}),console.error("请求错误:",M)}}function D(){const i=new Map;try{[{list:c.bot_data.storsi_signal,description:"盯盘"},{list:c.bot_data.hold,description:"持仓"},{list:c.bot_data.zixuan,description:"收藏"},{list:c.bot_data.viewpoint_list,description:"观点"}].forEach(({list:d,description:n})=>{d==null||d.forEach(e=>{if(!i.has(e.symbol))i.set(e.symbol,n);else{const m=i.get(e.symbol);m.includes(n)||i.set(e.symbol,`${m}, ${n}`)}})})}catch(a){console.error("获取收藏列表时发生错误:",a.message)}return Array.from(i.entries(),([a,d])=>({symbol:a,description:d}))}return U(()=>c.bot_data.monitor_signal_list,()=>{E.value=F()}),U(()=>[c.bot_data.storsi_signal,c.bot_data.hold,c.bot_data.zixuan,c.bot_data.viewpoint_list],()=>{try{B.value=D()}catch(i){console.error("更新信号列表时发生错误:",i.message)}}),U([()=>g.value,()=>k.value],()=>{E.value=F()}),te(()=>{E.value=F(),B.value=D()}),(i,a)=>{const d=X,n=Q;return _(),y(A,null,[u("div",ne,[o(t(j),{size:"default",modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value=e)},{default:l(()=>[o(t(b),{value:"Favorites"},{default:l(()=>[r("关注列表")]),_:1}),o(t(b),{value:"signal"},{default:l(()=>[r("盘面信号")]),_:1}),o(t(b),{value:"viewpoint"},{default:l(()=>[r("观点面板")]),_:1})]),_:1},8,["modelValue"])]),C.value==="signal"?(_(),y("div",se,[u("div",re,[o(t(H),{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),multiple:"",placeholder:"监控项目",teleported:!1},{default:l(()=>[(_(!0),y(A,null,K(N.value,e=>(_(),h(d,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(t(H),{modelValue:k.value,"onUpdate:modelValue":a[2]||(a[2]=e=>k.value=e),multiple:"",placeholder:"监控周期",teleported:!1},{default:l(()=>[(_(!0),y(A,null,K(R.value,e=>(_(),h(d,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o(t($),{data:E.value,style:{width:"298px"}},{default:l(()=>[o(t(p),{type:"expand",width:"30"},{default:l(e=>[u("div",null,[u("p",null,"创建: "+v(t(s).return_time(e.row.monitor_time)),1),u("div",de,[o(n,{size:"small",round:"",color:"#FF0000",onClick:m=>V("signal","del",e.row)},{default:l(()=>[r("删除信号")]),_:2},1032,["onClick"]),o(n,{size:"small",round:"",color:"#0000FF",onClick:m=>V("signal","edit",e.row)},{default:l(()=>[r("信号延期")]),_:2},1032,["onClick"])])])]),_:1}),o(t(p),{label:"代码",width:"70"},{default:l(e=>[r(v(e.row.symbol.split("-")[0]),1)]),_:1}),o(t(p),{label:"说明",width:"135"},{default:l(e=>[r(v(e.row.info),1)]),_:1}),t(s).draw==="chart"?(_(),h(t(p),{key:0,align:"right",label:"操作",width:"63"},{default:l(e=>[o(n,{size:"small",type:"danger",onClick:m=>z(e.row.symbol,e.row.period)},{default:l(()=>[r("查看")]),_:2},1032,["onClick"])]),_:1})):f("",!0)]),_:1},8,["data"])])):f("",!0),C.value==="Favorites"?(_(),y("div",ue,[o(t($),{data:B.value,style:{width:"298px"}},{default:l(()=>[o(t(p),{label:"代码",width:"100"},{default:l(e=>[r(v(e.row.symbol.split("-")[0]),1)]),_:1}),o(t(p),{label:"说明",width:"100"},{default:l(e=>[r(v(e.row.description),1)]),_:1}),t(s).draw==="chart"?(_(),h(t(p),{key:0,align:"right",label:"操作",width:"100"},{default:l(e=>[o(n,{size:"small",type:"danger",onClick:m=>z(e.row.symbol,"1H")},{default:l(()=>[r("查看")]),_:2},1032,["onClick"])]),_:1})):f("",!0)]),_:1},8,["data"])])):f("",!0),C.value==="viewpoint"?(_(),y("div",ce,[u("div",_e,[o(t(j),{size:"default",modelValue:x.value,"onUpdate:modelValue":a[3]||(a[3]=e=>x.value=e)},{default:l(()=>[o(t(b),{value:"list"},{default:l(()=>[r("盘面观点")]),_:1}),o(t(b),{value:"add"},{default:l(()=>[r("添加观点")]),_:1}),o(t(b),{value:"all"},{default:l(()=>[r("所有观点")]),_:1})]),_:1},8,["modelValue"])]),x.value==="list"?(_(),y("div",me,[o(t($),{data:P(),style:{width:"300px"}},{default:l(()=>[o(t(p),{type:"expand",width:"20"},{default:l(e=>[u("div",null,[u("p",null,"创建: "+v(t(s).return_time(e.row.start_time)),1),u("p",null,"到期: "+v(t(s).return_time(e.row.end_time)),1),u("div",pe,[o(n,{size:"default",type:"danger",onClick:m=>V("viewpoint","del",e.row)},{default:l(()=>[r("删除观点")]),_:2},1032,["onClick"])])])]),_:1}),o(t(p),{label:"说明",width:"200"},{default:l(e=>[r(v(e.row.viewpoint),1)]),_:1}),t(s).draw==="chart"?(_(),h(t(p),{key:0,align:"right",label:"操作",width:"80"},{default:l(e=>[o(n,{size:"small",type:"danger",onClick:m=>z(e.row.symbol,e.row.period)},{default:l(()=>[r("查看")]),_:2},1032,["onClick"])]),_:1})):f("",!0)]),_:1},8,["data"])])):f("",!0),x.value==="all"?(_(),y("div",ve,[o(t($),{data:t(c).bot_data.viewpoint_list,style:{width:"300px"}},{default:l(()=>[o(t(p),{type:"expand",width:"20"},{default:l(e=>[u("div",null,[u("p",null,"创建: "+v(t(s).return_time(e.row.start_time)),1),u("p",null,"到期: "+v(t(s).return_time(e.row.end_time)),1),u("div",fe,[o(n,{size:"default",type:"danger",onClick:m=>V("viewpoint","del",e.row)},{default:l(()=>[r("删除观点")]),_:2},1032,["onClick"])])])]),_:1}),o(t(p),{label:"说明",width:"80"},{default:l(e=>[r(v(e.row.symbol.split("-")[0]),1)]),_:1}),o(t(p),{label:"说明",width:"120"},{default:l(e=>[r(v(e.row.viewpoint),1)]),_:1}),t(s).draw==="chart"?(_(),h(t(p),{key:0,align:"right",label:"操作",width:"80"},{default:l(e=>[o(n,{size:"small",type:"danger",onClick:m=>z(e.row.symbol,e.row.period)},{default:l(()=>[r("查看")]),_:2},1032,["onClick"])]),_:1})):f("",!0)]),_:1},8,["data"])])):f("",!0),x.value==="add"?(_(),y("div",we,[o(t(G),{modelValue:S.value,"onUpdate:modelValue":a[4]||(a[4]=e=>S.value=e),autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"输入您的盘面观点"},null,8,["modelValue"]),u("div",ye,[u("p",{style:le({color:t(c).color})},"有效期至:",4),o(t(G),{modelValue:t(c).monitor_info.testtime,"onUpdate:modelValue":a[5]||(a[5]=e=>t(c).monitor_info.testtime=e),clearable:"",placeholder:"长期有效",style:{width:"200px"}},ae({_:2},[t(s).draw==="chart"?{name:"append",fn:l(()=>[o(n,{icon:t(q),onClick:t(s).creatRuler},null,8,["icon","onClick"])]),key:"0"}:void 0]),1032,["modelValue"])]),u("div",be,[o(n,{type:"primary",onClick:a[6]||(a[6]=e=>V("viewpoint","add",""))},{default:l(()=>[r("添加观点")]),_:1})])])):f("",!0)])):f("",!0)],64)}}}),Fe=ie(he,[["__scopeId","data-v-ef533e05"]]);export{Fe as default};
